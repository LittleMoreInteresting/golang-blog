[
{
	"uri": "http://blog.911015.com/beginner/01.html",
	"title": "01-Golangå®‰è£…ä¸ä½“éªŒ",
	"tags": null,
	"description": "",
	"content": " ä¸‹è½½å¹¶å®‰è£…æŒ‰ç…§ä¸€ä¸‹æ­¥éª¤å¿«é€Ÿè¿›è¡Œã€‚ æœ‰å…³å®‰è£…çš„å…¶ä»–å†…å®¹ï¼Œæ‚¨å¯èƒ½å¯¹ä»¥ä¸‹å†…å®¹æ„Ÿå…´è¶£ï¼š\nGoå¤šç‰ˆæœ¬å®‰è£…ç®¡ç† \u0026ndash;å¦‚ä½•å®‰è£…å¤šç‰ˆæœ¬å¹¶å¸è½½ã€‚ Go æºç å®‰è£… \u0026ndash; å¦‚ä½•ä¸‹è½½æºç å¹¶åœ¨è‡ªå·±çš„æœºå™¨ä¸Šç¼–è¯‘å®‰è£…Goã€‚ ä¸‹è½½åœ°å€åœ¨è¿™é‡Œ go.dev/dl/ å„ç³»ç»Ÿç‰ˆæœ¬éƒ½æœ‰ï¼Œä¸‹è½½ä¸€ä¸ªä¸è‡ªå·±ç³»ç»ŸåŒ¹é…çš„ç‰ˆæœ¬ï¼Œå¯ä»¥é€‰æœ€æ–°ç‰ˆæœ¬è¿›è¡Œå®‰è£…å­¦ä¹ ã€‚\nå®‰è£…Go é€‰æ‹©ä¸‹é¢å¯¹åº”çš„è®¡ç®—æœºæ“ä½œç³»ç»Ÿï¼Œç„¶åæŒ‰ç…§å…¶å®‰è£…è¯´æ˜è¿›è¡Œæ“ä½œã€‚\nLinux åˆ é™¤/usr/local/Goæ–‡ä»¶å¤¹ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ï¼Œåˆ é™¤ä»¥å‰çš„Goå®‰è£…ï¼Œç„¶åå°†åˆšä¸‹è½½çš„å­˜æ¡£æå–åˆ°/usr/localä¸­ï¼Œåœ¨/usr/local/go: Copy\rrm -rf /usr/local/go \u0026amp;\u0026amp; tar -C /usr/local -xzf go1.20.4.linux-amd64.tar.gz ï¼ˆæ‚¨å¯èƒ½éœ€è¦ä»¥rootç”¨æˆ·èº«ä»½æˆ–é€šè¿‡sudoè¿è¡Œè¯¥å‘½ä»¤ï¼‰ã€‚ä¸è¦å°†å½’æ¡£æ–‡ä»¶è§£å‹ç¼©åˆ°ç°æœ‰çš„/usr/local/goç›®å½•ä¸­ã€‚è¿™ä¼šå¯¼è‡´Goå®‰è£…å¤±è´¥\nå°†/usr/local/go/binæ·»åŠ åˆ°PATHç¯å¢ƒå˜é‡ä¸­ æ‚¨å¯ä»¥é€šè¿‡å°†ä»¥å†…å®¹æ·»åŠ åˆ°$HOME/.profileæˆ–/etc/profileï¼ˆå…¨å±€å®‰è£…ï¼‰æ¥å®Œæˆæ­¤æ“ä½œï¼š\nCopy\rexport PATH=$PATH:/usr/local/go/bin **æ³¨æ„**ï¼šå¯¹é…ç½®æ–‡ä»¶æ‰€åšçš„æ›´æ”¹å¯èƒ½è¦ç­‰åˆ°ä¸‹æ¬¡ç™»å½•è®¡ç®—æœºæ—¶æ‰èƒ½åº”ç”¨ã€‚è¦ç«‹å³åº”ç”¨æ›´æ”¹ï¼Œåªéœ€ç›´æ¥è¿è¡Œshellå‘½ä»¤ï¼Œæˆ–è€…ä½¿ç”¨`source $HOME/.profile` ç­‰å‘½ä»¤ä»æ¦‚è¦æ–‡ä»¶ä¸­æ‰§è¡Œè¿™äº›å‘½ä»¤ã€‚\r3. é€šè¿‡æ‰“å¼€å‘½ä»¤æç¤ºç¬¦å¹¶è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ¥éªŒè¯æ˜¯å¦å·²å®‰è£…Go\rCopy\r$ go version 4. ç¡®è®¤è¯¥å‘½ä»¤æ‰“å°å·²å®‰è£…çš„Goç‰ˆæœ¬ã€‚\rMac æ‰“å¼€ä¸‹è½½çš„è½¯ä»¶åŒ…æ–‡ä»¶ï¼Œå¹¶æŒ‰ç…§æç¤ºå®‰è£…Go è¯¥è½¯ä»¶åŒ…å°†Goå®‰è£…åˆ°/usr/local/goã€‚è¯¥åŒ…åº”è¯¥å°†/usr/local/go/binç›®å½•æ”¾åœ¨PATHç¯å¢ƒå˜é‡ä¸­ã€‚å¯èƒ½éœ€è¦é‡æ–°å¯åŠ¨ä»»ä½•æ‰“å¼€çš„ç»ˆç«¯ä¼šè¯æ‰èƒ½ä½¿æ›´æ”¹ç”Ÿæ•ˆã€‚\né€šè¿‡æ‰“å¼€å‘½ä»¤æç¤ºç¬¦å¹¶é”®å…¥ä»¥ä¸‹å‘½ä»¤æ¥éªŒè¯æ˜¯å¦å·²å®‰è£…Go go version\nç¡®è®¤è¯¥å‘½ä»¤æ‰“å°å·²å®‰è£…çš„Goç‰ˆæœ¬ã€‚ Window 1ã€æ‰“å¼€æ‚¨ä¸‹è½½çš„MSIæ–‡ä»¶ï¼Œå¹¶æŒ‰ç…§æç¤ºå®‰è£…Goã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå®‰è£…ç¨‹åºå°†å®‰è£…Goåˆ° Program Filesæˆ–Program Filesï¼ˆx86ï¼‰ã€‚æ‚¨å¯ä»¥æ ¹æ®éœ€è¦æ›´æ”¹ä½ç½®ã€‚å®‰è£…åï¼Œæ‚¨éœ€è¦å…³é—­å¹¶é‡æ–°æ‰“å¼€ä»»ä½•æ‰“å¼€çš„å‘½ä»¤æç¤ºç¬¦ï¼Œä»¥ä¾¿åœ¨å‘½ä»¤æç¤ºç¬¦ä¸‹åæ˜ å®‰è£…ç¨‹åºå¯¹ç¯å¢ƒæ‰€åšçš„æ›´æ”¹ã€‚\n2ã€éªŒè¯æ‚¨æ˜¯å¦å·²å®‰è£…Goï¼›\nåœ¨Windowsä¸­ï¼Œå•å‡»â€œå¼€å§‹â€èœå•ã€‚ åœ¨èœå•çš„æœç´¢æ¡†ä¸­ï¼Œé”®å…¥cmdï¼Œç„¶åæŒ‰Enteré”®ã€‚ åœ¨å‡ºç°çš„â€œå‘½ä»¤æç¤ºç¬¦â€çª—å£ä¸­ï¼Œé”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š go version ç¡®è®¤è¯¥å‘½ä»¤æ‰“å°å·²å®‰è£…çš„Goç‰ˆæœ¬ã€‚ Reference Installing Go "
},
{
	"uri": "http://blog.911015.com/tour/01.html",
	"title": "1ã€åŸºç¡€ç¯‡ï¼ˆä¸€ï¼‰ï¼šåŒ…ã€å˜é‡å’Œæ–¹æ³•",
	"tags": null,
	"description": "åŸºç¡€ç¯‡ï¼ˆä¸€ï¼‰ï¼šåŒ…ã€å˜é‡å’Œæ–¹æ³•ï¼›å­¦ä¹ ä»»ä½•Goç¨‹åºçš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ã€‚",
	"content": "åŒ…ï¼ˆ packageï¼‰ æ¯ä¸ªGoé¡¹ç›®éƒ½æ˜¯ç”±ç¨‹åºåŒ…ç»„æˆçš„ã€‚ ç¨‹åºåœ¨mainåŒ…ä¸­è¿è¡Œã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math/rand\u0026#34; ) func main() { fmt.Println(\u0026#34;My favorite number is\u0026#34;, rand.Intn(10)) } æ­¤ç¨‹åºä½¿ç”¨å¯¼å…¥çš„â€œfmtâ€å’Œâ€œmath/randâ€åŒ…ã€‚ æŒ‰ç…§æƒ¯ä¾‹ï¼ŒåŒ…åç§°ä¸ºå¯¼å…¥è·¯å¾„çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚ä¾‹å¦‚ï¼Œâ€œmath/randâ€åŒ…å«ä»¥randä¸ºåŒ…åçš„æ–‡ä»¶ã€‚\nimport æ­¤ä»£ç å°†å¯¼å…¥åˆ†ç»„åˆ°ä¸€ä¸ªå¸¦æ‹¬å·çš„çš„importè¯­å¥ä¸­ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math\u0026#34; ) func main() { fmt.Printf(\u0026#34;Now you have %g problems.\\n\u0026#34;, math.Sqrt(7)) } æ‚¨è¿˜å¯ä»¥ç¼–å†™å¤šä¸ªimportè¯­å¥ï¼Œå¦‚ï¼š\nimport \u0026#34;fmt\u0026#34; import \u0026#34;math\u0026#34; ä½†æ˜¯ï¼Œå»ºè®®ä½¿ç”¨å¸¦æ‹¬å·çš„importè¯­å¥ã€‚\nå¯¼å‡ºåç§° åœ¨ Go ä¸­ï¼Œå¦‚æœåç§°ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œåˆ™ä¼šå¯¼å‡ºè¯¥åç§°ã€‚ä¾‹å¦‚ï¼ŒPizzaï¼ŒPi æ˜¯æ˜¯ä»mathåŒ…ä¸­å¯¼å‡ºçš„åç§°ã€‚ pizzaå¹¶ä¸”piä¸è¦ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œå› æ­¤å®ƒä»¬ä¸ä¼šè¢«å¯¼å‡ºã€‚ å¯¼å…¥åŒ…æ—¶ï¼Œæ‚¨åªèƒ½å¼•ç”¨å…¶å¯¼å‡ºçš„åç§°ã€‚ä»»ä½•â€œæœªå¯¼å‡ºâ€çš„åç§°éƒ½æ— æ³•ä»åŒ…å¤–éƒ¨è®¿é—®ã€‚ è¿è¡Œä»£ç ã€‚è¯·æ³¨æ„é”™è¯¯æ¶ˆæ¯ã€‚ è¦ä¿®å¤é”™è¯¯ï¼Œè¯·é‡å‘½åmath.piä¸ºmath.Piå¹¶é‡è¯•ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math\u0026#34; ) func main() { fmt.Println(math.pi) } å‡½æ•°/æ–¹æ³• (Functions) Functions å‡½æ•°å¯ä»¥æ¥å—é›¶ä¸ªæˆ–å¤šä¸ªå‚æ•°ã€‚ åœ¨æœ¬ä¾‹ä¸­ï¼Œaddæ¥æ”¶ä¸¤ä¸ªintç±»å‹çš„å‚æ•°ã€‚\nè¯·æ³¨æ„ï¼Œè¯¥ç±»å‹ä½äºå˜é‡åä¹‹åã€‚\npackage main import \u0026#34;fmt\u0026#34; func add(x int, y int) int { return x + y } func main() { fmt.Println(add(42, 13)) } å½“ä¸¤ä¸ªæˆ–å¤šä¸ªè¿ç»­çš„å‘½åå‡½æ•°å‚æ•°å…±äº«ä¸€ä¸ªç±»å‹æ—¶ï¼Œå¯ä»¥ä»é™¤æœ€åä¸€ä¸ªä¹‹å¤–çš„æ‰€æœ‰å‚æ•°ä¸­çœç•¥è¯¥ç±»å‹ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¯ä»¥æŠŠ x int, y int ç®€å†™ä¸º x, y int\nå¤šè¿”å›å€¼ Multiple results å‡½æ•°å¯ä»¥è¿”å›ä»»æ„æ•°é‡çš„ç»“æœã€‚å‡½æ•°å¯ä»¥è¿”å›ä»»æ„æ•°é‡çš„ç»“æœã€‚\npackage main import \u0026#34;fmt\u0026#34; func swap(x, y string) (string, string) { return y, x } func main() { a, b := swap(\u0026#34;hello\u0026#34;, \u0026#34;world\u0026#34;) fmt.Println(a, b) } å…·åè¿”å›å€¼ Named return values Goçš„è¿”å›å€¼å¯ä»¥å‘½åã€‚è¿™ç§å†™æ³•å°†è§†ä¸ºåœ¨å‡½æ•°é¡¶éƒ¨å®šä¹‰çš„å˜é‡ã€‚è¿™äº›å˜é‡ç”¨äºè®°å½•è¿”å›å€¼ã€‚ä¸å¸¦å‚æ•°çš„returnè¯­å¥è¿”å›å‘½åçš„è¿”å›å€¼ã€‚è¿™ç§æ–¹å¼é€‚åˆæ¯”è¾ƒçŸ­çš„å‡½æ•°ï¼›å¦‚æœæ˜¯å‡½æ•°ä½“æ¯”è¾ƒé•¿çš„å‡½æ•°è¿™ç§æ–¹å¼å¯è¯»æ€§ä¼šæ¯”è¾ƒå·®\npackage main import \u0026#34;fmt\u0026#34; func split(sum int) (x, y int) { x = sum * 4 / 9 y = sum - x return } func main() { fmt.Println(split(17)) } å˜é‡ï¼ˆVariablesï¼‰ varè¯­å¥å£°æ˜äº†ä¸€ä¸ªå˜é‡åˆ—è¡¨ï¼›åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨ä¸­ï¼Œç±»å‹æ˜¯æœ€åä¸€ä¸ªã€‚ varè¯­å¥å¯ä»¥æ˜¯åŒ…çº§åˆ«çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å‡½æ•°çº§åˆ«çš„ã€‚ä¾‹å­ä¸­åˆ†åˆ«å±•ç¤ºäº†è¿™ä¸¤ç§æƒ…å†µã€‚\npackage main import \u0026#34;fmt\u0026#34; var c, python, java bool func main() { var i int fmt.Println(i, c, python, java) } å®šä¹‰å¸¦åˆå§‹å€¼çš„å˜é‡ var å£°æ˜æ¯ä¸ªå˜é‡åŒ…å«åˆå§‹å€¼çš„å˜é‡ã€‚ å¦‚æœå­˜åœ¨åˆå§‹å€¼ï¼Œåˆ™å¯ä»¥çœç•¥ç±»å‹ï¼›è¯¥å˜é‡å°†é‡‡ç”¨åˆå§‹å€¼è®¾å®šé¡¹çš„ç±»å‹ã€‚\npackage main import \u0026#34;fmt\u0026#34; var i, j int = 1, 2 func main() { var c, python, java = true, false, \u0026#34;no!\u0026#34; fmt.Println(i, j, c, python, java) } çŸ­å˜é‡å£°æ˜ åœ¨å‡½æ•°å†…éƒ¨ï¼Œå¯ä»¥ä½¿ç”¨ := çŸ­èµ‹å€¼è¯­å¥æ¥ä»£æ›¿éšå¼ç±»å‹çš„varå£°æ˜ã€‚åœ¨å‡½æ•°ä¹‹å¤–ï¼Œæ¯æ¡è¯­å¥éƒ½ä»¥å…³é”®å­—ï¼ˆvarã€funcç­‰ï¼‰å¼€å¤´ï¼Œå› æ­¤:=æ„é€ ä¸å¯ç”¨ã€‚\npackage main import \u0026#34;fmt\u0026#34; func main() { var i, j int = 1, 2 k := 3 c, python, java := true, false, \u0026#34;no!\u0026#34; fmt.Println(i, j, k, c, python, java) } åŸºæœ¬ç±»å‹ Goè¯­è¨€çš„åŸºæœ¬ç±»å‹æœ‰\nbool string int int8 int16 int32 int64 uint uint8 uint16 uint32 uint64 uintptr byte // alias for uint8 rune // alias for int32 // represents a Unicode code point float32 float64 complex64 complex128 è¯¥ç¤ºä¾‹æ˜¾ç¤ºäº†å‡ ç§ç±»å‹çš„å˜é‡ï¼Œè¿˜æ˜¾ç¤ºäº†å˜é‡å£°æ˜å¯ä»¥è¢«â€œåˆ†è§£â€åˆ°å—ä¸­ï¼Œå°±åƒimportè¯­å¥ä¸€æ ·\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math/cmplx\u0026#34; ) var ( ToBe bool = false MaxInt uint64 = 1\u0026lt;\u0026lt;64 - 1 z complex128 = cmplx.Sqrt(-5 + 12i) ) func main() { fmt.Printf(\u0026#34;Type: %T Value: %v\\n\u0026#34;, ToBe, ToBe) fmt.Printf(\u0026#34;Type: %T Value: %v\\n\u0026#34;, MaxInt, MaxInt) fmt.Printf(\u0026#34;Type: %T Value: %v\\n\u0026#34;, z, z) } intã€uintå’Œuintptrç±»å‹åœ¨32ä½ç³»ç»Ÿä¸Šé€šå¸¸ä¸º32ä½å®½ï¼Œåœ¨64ä½ç³»ç»Ÿä¸Šä¸º64ä½å®½ã€‚å½“æ‚¨éœ€è¦ä¸€ä¸ªæ•´æ•°å€¼æ—¶ï¼Œæ‚¨åº”è¯¥ä½¿ç”¨intï¼Œé™¤éæ‚¨æœ‰ç‰¹å®šçš„ç†ç”±ä½¿ç”¨å¤§å°æˆ–æ— ç¬¦å·æ•´æ•°ç±»å‹ã€‚\né›¶å€¼ åœ¨æ²¡æœ‰æ˜¾å¼åˆå§‹å€¼çš„æƒ…å†µä¸‹å£°æ˜çš„å˜é‡å°†è¢«èµ‹äºˆé›¶å€¼ã€‚ å„ç±»å‹é›¶å€¼:\næ•°å­—ç±»å‹ 0, å¸ƒå°”ç±»å‹ false stringç±»å‹ \u0026quot;\u0026quot; (ç©ºå­—ç¬¦ä¸²) . package main import \u0026#34;fmt\u0026#34; func main() { var i int var f float64 var b bool var s string fmt.Printf(\u0026#34;%v %v %v %q\\n\u0026#34;, i, f, b, s) } ç±»å‹è½¬æ¢ è¡¨è¾¾å¼T(v) å°†å€¼vè½¬æ¢ä¸ºç±»å‹Tã€‚ ä¸€äº›æ•°å­—è½¬æ¢\nvar i int = 42 var f float64 = float64(i) var u uint = uint(f) æˆ–è€…ï¼Œæ›´ç®€å•åœ°è¯´ï¼š\ni := 42 f := float64(i) u := uint(f) ä¸Cä¸åŒï¼ŒGoè¯­è¨€ä¸åŒç±»å‹çš„é¡¹ä¹‹é—´çš„èµ‹å€¼éœ€è¦æ˜¾å¼è½¬æ¢ã€‚å°è¯•åˆ é™¤ç¤ºä¾‹ä¸­çš„float64æˆ–uintè½¬æ¢ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math\u0026#34; ) func main() { var x, y int = 3, 4 var f float64 = math.Sqrt(float64(x*x + y*y)) var z uint = uint(f) fmt.Println(x, y, z) } ç±»å‹æ¨æ–­ å½“å£°æ˜å˜é‡è€Œä¸æŒ‡å®šæ˜¾å¼ç±»å‹æ—¶ï¼ˆé€šè¿‡ä½¿ç”¨ := è¯­æ³•æˆ–var =è¡¨è¾¾å¼è¯­æ³•ï¼‰ï¼Œå˜é‡çš„ç±»å‹æ˜¯ä»å³ä¾§çš„å€¼æ¨æ–­å‡ºæ¥çš„ã€‚ å½“å£°æ˜çš„å³ä¾§è¢«è¾“å…¥æ—¶ï¼Œæ–°å˜é‡æ˜¯ç›¸åŒç±»å‹çš„\nvar i int j := i // j æ˜¯ int ç±»å‹ ä½†æ˜¯ï¼Œå½“å³ä¾§åŒ…å«éç±»å‹åŒ–çš„æ•°å­—å¸¸é‡æ—¶ï¼Œæ–°å˜é‡å¯èƒ½æ˜¯intã€float64æˆ–complex128ï¼Œå…·ä½“å–å†³äºå¸¸é‡çš„ç²¾åº¦ï¼š\ni := 42 // int f := 3.142 // float64 g := 0.867 + 0.5i // complex128 package main import \u0026#34;fmt\u0026#34; func main() { v := 42 // change me! fmt.Printf(\u0026#34;v is of type %T\\n\u0026#34;, v) } å°è¯•æ›´æ”¹ç¤ºä¾‹ä»£ç ä¸­vçš„åˆå§‹å€¼ï¼Œå¹¶è§‚å¯Ÿå…¶ç±»å‹æ˜¯å¦‚ä½•å—åˆ°å½±å“çš„ã€‚\nå¸¸é‡ å¸¸é‡æ˜¯åƒå˜é‡ä¸€æ ·å£°æ˜çš„ï¼Œä½†ä½¿ç”¨constå…³é”®å­—ã€‚å¸¸é‡å¯ä»¥æ˜¯å­—ç¬¦ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼æˆ–æ•°å€¼ã€‚ä¸èƒ½ä½¿ç”¨ := è¯­æ³•å£°æ˜å¸¸é‡ã€‚\npackage main import \u0026#34;fmt\u0026#34; const Pi = 3.14 func main() { const World = \u0026#34;ä¸–ç•Œ\u0026#34; fmt.Println(\u0026#34;Hello\u0026#34;, World) fmt.Println(\u0026#34;Happy\u0026#34;, Pi, \u0026#34;Day\u0026#34;) const Truth = true fmt.Println(\u0026#34;Go rules?\u0026#34;, Truth) } æ•°å€¼å¸¸é‡ æ•°å€¼å¸¸é‡æ˜¯é«˜ç²¾åº¦çš„å€¼ã€‚éç±»å‹åŒ–çš„å¸¸é‡é‡‡ç”¨å…¶ä¸Šä¸‹æ–‡æ‰€éœ€çš„ç±»å‹ã€‚\npackage main import \u0026#34;fmt\u0026#34; const ( // é€šè¿‡å‘å·¦ç§»åŠ¨1ä½100ä½æ¥åˆ›å»ºä¸€ä¸ªå·¨å¤§çš„æ•°å­—ã€‚ // æ¢å¥è¯è¯´ï¼ŒäºŒè¿›åˆ¶æ•°æ˜¯1ï¼Œåé¢è·Ÿç€100ä¸ªé›¶ã€‚ Big = 1 \u0026lt;\u0026lt; 100 // å†æ¬¡å‘å³ç§»åŠ¨99ä½ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ€ç»ˆå¾—åˆ°1\u0026lt;\u0026lt;1æˆ–2ã€‚ Small = Big \u0026gt;\u0026gt; 99 ) func needInt(x int) int { return x*10 + 1 } func needFloat(x float64) float64 { return x * 0.1 } func main() { fmt.Println(needInt(Small)) fmt.Println(needFloat(Small)) fmt.Println(needFloat(Big)) } ä¹Ÿå¯ä»¥å°è¯•æ‰“å°needIntï¼ˆBigï¼‰ã€‚ï¼ˆintæœ€å¤šå¯ä»¥å­˜å‚¨64ä½æ•´æ•°ï¼Œæœ‰æ—¶å¯ä»¥å­˜å‚¨æ›´å°‘çš„æ•´æ•°ã€‚ï¼‰\n"
},
{
	"uri": "http://blog.911015.com/go-zero/01.html",
	"title": "go-zero å•ä½“åº”ç”¨å®è·µï¼ˆä¸€ï¼‰",
	"tags": null,
	"description": "å•ä½“åº”ç”¨å®è·µ",
	"content": "ç¯å¢ƒæ­å»º å®˜æ–¹æ–‡æ¡£\nGolang ç¯å¢ƒå®‰è£… ğŸ‘‰ golang Go Moduleè®¾ç½® go env -w GO111MODULE=\u0026quot;on\u0026quot; goctlå®‰è£… ğŸ‘‰ goctl protoc \u0026amp; protoc-gen-goå®‰è£… goctl env check -i -f --verbose etcdï¼Œredisï¼Œmysql ç­‰å¼€å‘å·¥å…·å¯ä»¥é€šè¿‡Docker å¿«é€Ÿæ­å»ºï¼›å¯å‚è€ƒğŸ‘‰ gonivinck\nåˆ›å»ºå•ä½“åº”ç”¨ 1ã€åˆ›å»ºç›®å½• mkdir user-login cd user-login go mod init user-login 2ã€ç¼–è¾‘apiæ–‡ä»¶ userlogin.api apiè¯­æ³•ä»‹ç»\ntype ( RegisterRequest { Name string `json:\u0026#34;name\u0026#34;` Email string `json:\u0026#34;email\u0026#34;` Password string `json:\u0026#34;password\u0026#34;` } RegisterResponse { ID int `json:\u0026#34;id\u0026#34;` Name string `json:\u0026#34;name\u0026#34;` Email string `json:\u0026#34;email\u0026#34;` } LoginRequest { Email string `json:\u0026#34;email\u0026#34;` Password string `json:\u0026#34;password\u0026#34;` } LoginResponse { Token string `json:\u0026#34;token\u0026#34;` Expire int64 `json:\u0026#34;expire\u0026#34;` } ) service userlogin-api { @handler RegisterHandler post /api/register(RegisterRequest) returns (RegisterResponse); @handler LoginHandler post /api/login(LoginRequest) returns (LoginResponse); } 3ã€æ‰§è¡Œç”Ÿæˆä»£ç å‘½ä»¤ goctl api go -api userlogin.api -dir . go mod tidy\nç”Ÿæˆæ–‡ä»¶ç›®å½•\nuserlogin â”œâ”€etc // // é…ç½®æ–‡ä»¶ â”œâ”€internal â”‚ â”œâ”€config // é…ç½®å£°æ˜type â”‚ â”œâ”€handler // è·¯ç”±åŠhandlerè½¬å‘ â”‚ â”œâ”€logic // ä¸šåŠ¡é€»è¾‘ â”‚ â”œâ”€svc // logicæ‰€ä¾èµ–çš„èµ„æºæ±  â”‚ â””â”€types // requestã€responseçš„structï¼Œæ ¹æ®apiè‡ªåŠ¨ç”Ÿæˆ 4ã€ç¼–è¾‘é…ç½®æ–‡ä»¶ userlogin/etc/userlogin-api.yaml\nName: userlogin-api Host: 0.0.0.0 Port: 8888 Mysql: DataSource: root:123456@tcp(mysql:3306)/user?charset=utf8mb4\u0026amp;parseTime=true\u0026amp;loc=Asia%2FShanghai CacheRedis: - Host: redis:6379 Type: node Salt: DWe7OZf6KPlnv7yy Auth: AccessSecret: uOvKLmVfztaXGpNYd4Z0I1SiT7MweJhl AccessExpire: 86400 æ·»åŠ configå£°æ˜ userlogin/internal/config/config.go å…¶ä¸­Salt ç”¨æ¥å¯†ç åŠ å¯†å­˜å‚¨ï¼ŒAuth ç”¨äº jwté‰´æƒ\ntype Config struct { rest.RestConf Mysql struct { DataSource string } CacheRedis cache.CacheConf Salt string Auth struct { AccessSecret string AccessExpire int64 } } 4ã€ç”ŸæˆModelæ–‡ä»¶ æ·»åŠ ç”¨æˆ·è¡¨ userlogin/model/user.sql\nCREATE TABLE `user` ( `id` bigint unsigned NOT NULL AUTO_INCREMENT, `name` varchar(255) NOT NULL DEFAULT \u0026#39;\u0026#39; COMMENT \u0026#39;ç”¨æˆ·å§“å\u0026#39;, `email` varchar(255) NOT NULL DEFAULT \u0026#39;\u0026#39; COMMENT \u0026#39;ç”¨æˆ·é‚®ç®±\u0026#39;, `password` varchar(255) NOT NULL DEFAULT \u0026#39;\u0026#39; COMMENT \u0026#39;ç”¨æˆ·å¯†ç \u0026#39;, `create_time` timestamp NULL DEFAULT CURRENT_TIMESTAMP, `update_time` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, PRIMARY KEY (`id`), UNIQUE KEY `idx_email_unique` (`email`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4; é€šè¿‡å‘½ä»¤ç”Ÿæˆmodelæ–‡ä»¶ model æŒ‡ä»¤\ngoctl model mysql ddl -src=\u0026ldquo;userlogin/model/user.sql\u0026rdquo; -dir=\u0026ldquo;userlogin/model/\u0026rdquo; -c\n-c å‚æ•°ä»£è¡¨ åœ¨modelå±‚ä½¿ç”¨ç¼“å­˜ éœ€è¦é…ç½®å¯¹åº”çš„ CacheRedis ç”Ÿæˆæ–‡ä»¶å¦‚ä¸‹ï¼š\nuser.sql\rusermodel.go\rusermodel_gen.go\rvars.go å¯ä»¥çœ‹åˆ° goctl å·²ç»ç”Ÿæˆäº† UserModel interface å¹¶å®ç°äº†åŸºæœ¬çš„å¢åˆ æ”¹æŸ¥è¯¢ä»£ç ï¼› 5ã€å®Œå–„æœåŠ¡ä¾èµ– ç¼–è¾‘ userlogin/internal/svc/servicecontext.go æ·»åŠ  logicæ‰€ä¾èµ–çš„ UserModel\ntype ServiceContext struct { Config config.Config UserModel model.UserModel } func NewServiceContext(c config.Config) *ServiceContext { conn := sqlx.NewMysql(c.Mysql.DataSource) return \u0026amp;ServiceContext{ Config: c, UserModel: model.NewUserModel(conn, c.CacheRedis), } } 6ã€ä¸šåŠ¡é€»è¾‘ä»£ç  1ã€æ³¨å†Œé€»è¾‘ä»£ç \ntype RegisterLogic struct { logx.Logger ctx context.Context svcCtx *svc.ServiceContext } func NewRegisterLogic(ctx context.Context, svcCtx *svc.ServiceContext) *RegisterLogic { return \u0026amp;RegisterLogic{ Logger: logx.WithContext(ctx), ctx: ctx, svcCtx: svcCtx, } } func (l *RegisterLogic) Register(req *types.RegisterRequest) (resp *types.RegisterResponse, err error) { _, err = l.svcCtx.UserModel.FindOneByEmail(l.ctx, req.Email) if err == nil { return nil, status.Error(100, \u0026#34;è¯¥ç”¨æˆ·å·²å­˜åœ¨\u0026#34;) } if err != model.ErrNotFound { return nil, status.Error(100, err.Error()) } newUser := model.User{ Name: req.Name, Email: req.Email, Password: cryptx.PasswordEncrypt(l.svcCtx.Config.Salt, req.Password), } res, err := l.svcCtx.UserModel.Insert(l.ctx, \u0026amp;newUser) if err != nil { return nil, status.Error(500, err.Error()) } newUser.Id, err = res.LastInsertId() if err != nil { return nil, status.Error(500, err.Error()) } return \u0026amp;types.RegisterResponse{ ID: int(newUser.Id), Name: newUser.Name, Email: newUser.Email, }, nil } 2ã€æ·»åŠ  JWT å·¥å…· userlogin/common/jwtx/jwt.go\npackage jwtx import \u0026#34;github.com/golang-jwt/jwt\u0026#34; func GetToken(secretKey string, iat, seconds, uid int64) (string, error) { claims := make(jwt.MapClaims) claims[\u0026#34;exp\u0026#34;] = iat + seconds claims[\u0026#34;iat\u0026#34;] = iat claims[\u0026#34;uid\u0026#34;] = uid token := jwt.New(jwt.SigningMethodHS256) token.Claims = claims return token.SignedString([]byte(secretKey)) } 3ã€ç”¨æˆ·ç™»å½•é€»è¾‘ userlogin/internal/logic/loginlogic.go\ntype LoginLogic struct { logx.Logger ctx context.Context svcCtx *svc.ServiceContext } func NewLoginLogic(ctx context.Context, svcCtx *svc.ServiceContext) *LoginLogic { return \u0026amp;LoginLogic{ Logger: logx.WithContext(ctx), ctx: ctx, svcCtx: svcCtx, } } func (l *LoginLogic) Login(req *types.LoginRequest) (resp *types.LoginResponse, err error) { res, err := l.svcCtx.UserModel.FindOneByEmail(l.ctx, req.Email) if err != nil { if err == model.ErrNotFound { return nil, status.Error(100, \u0026#34;ç”¨æˆ·ä¸å­˜åœ¨\u0026#34;) } return nil, status.Error(500, err.Error()) } // åˆ¤æ–­å¯†ç æ˜¯å¦æ­£ç¡® password := cryptx.PasswordEncrypt(l.svcCtx.Config.Salt, req.Password) if password != res.Password { return nil, status.Error(100, \u0026#34;å¯†ç é”™è¯¯\u0026#34;) } now := time.Now().Unix() accessExpire := l.svcCtx.Config.Auth.AccessExpire accessToken, err := jwtx.GetToken(l.svcCtx.Config.Auth.AccessSecret, now, accessExpire, res.Id) if err != nil { return nil, err } return \u0026amp;types.LoginResponse{ Token: accessToken, Expire: now + accessExpire, }, nil } 7ã€å¯åŠ¨æµ‹è¯•\ngo run userlogin.go -f etc/userlogin-api.yaml # Starting server at 0.0.0.0:8888... æ³¨å†Œæµ‹è¯•\ncurl -i -X POST http://127.0.0.1:8888/api/register -H \u0026#39;Content-Type: application/json\u0026#39; -d \u0026#39;{\u0026#34;name\u0026#34;:\u0026#34;test\u0026#34;,\u0026#34;email\u0026#34;:\u0026#34;test@gmail.com\u0026#34;,\u0026#34;password\u0026#34;:\u0026#34;123456\u0026#34;}\u0026#39; HTTP/1.1 200 OK Content-Type: application/json; charset=utf-8 Traceparent: 00-91ee4162c2a42c7df3111ab73cdb242f-1b886700e9099cc8-00 Date: Tue, 19 Jul 2022 16:19:33 GMT Content-Length: 47 {\u0026#34;id\u0026#34;:1,\u0026#34;name\u0026#34;:\u0026#34;test\u0026#34;,\u0026#34;email\u0026#34;:\u0026#34;test@gmail.com\u0026#34;} ç™»å½•æµ‹è¯•\ncurl -i -X POST http://127.0.0.1:8888/api/login -H \u0026#39;Content-Type: application/json\u0026#39; -d \u0026#39;{\u0026#34;email\u0026#34;:\u0026#34;test@gmail.com\u0026#34;,\u0026#34;password\u0026#34;:\u0026#34;123456\u0026#34;}\u0026#39; HTTP/1.1 200 OK Content-Type: application/json; charset=utf-8 Traceparent: 00-4cc2b11a99a2216590c50a2a7215e832-d7af5dc45fa6a65b-00 Date: Tue, 19 Jul 2022 16:22:28 GMT Content-Length: 171 {\u0026#34;token\u0026#34;:\u0026#34;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2NTgzMzQxNDgsImlhdCI6MTY1ODI0Nzc0OCwidWlkIjoxfQ.QGrhGWCRSMWGyEZyV7GatGYU_XgBVdjQRJqW7qEBk04\u0026#34;,\u0026#34;expire\u0026#34;:1658334148} jwté‰´æƒåº”ç”¨ ä¸Šé¢å·²ç»å®Œæˆäº†ç™»å½•æ³¨å†ŒåŠŸèƒ½ï¼›å¹¶ä¸”ç™»å½•è¿”å›äº†Tokenï¼›æ¥ä¸‹æ¥å°±ç”¨ä¸€ä¸‹Token\n1ã€å¼€å¯jwté‰´æƒ ç¼–å†™ api æ–‡ä»¶ åœ¨ service ä¸Šæ–¹å£°æ˜ä½¿ç”¨jwté‰´æƒ ä¿®æ”¹ userlogin/userlogin.api é‡æ–°æ‰§è¡Œ goctl api å‘½ä»¤\ntype UserInfoResponse { ID int64 `json:\u0026#34;id\u0026#34;` Name string `json:\u0026#34;name\u0026#34;` Email string `json:\u0026#34;email\u0026#34;` } @server( jwt: Auth // Auth ä¸ userlogin/internal/config/config.go ä¸­é…ç½®çš„ jwt å‚æ•°å¯¹åº” ) service userlogin-api { @handler UserInfo get /api/userinfo returns (UserInfoResponse) } å¯ä»¥çœ‹åˆ°è·¯ç”±æ–‡ä»¶ä¸­ userlogin/internal/handler/routes.go æ–°å¢çš„è·¯ç”±ä¸­é€š WithJwt å£°æ˜äº†ä½¿ç”¨jwté‰´æƒ\nserver.AddRoutes( []rest.Route{ { Method: http.MethodGet, Path: \u0026#34;/api/userinfo\u0026#34;, Handler: UserInfoHandler(serverCtx), }, }, rest.WithJwt(serverCtx.Config.Auth.AccessSecret), ) 2ã€ç¼–å†™logic ä»£ç  userlogin/internal/logic/userinfologic.go\nfunc NewUserInfoLogic(ctx context.Context, svcCtx *svc.ServiceContext) *UserInfoLogic { return \u0026amp;UserInfoLogic{ Logger: logx.WithContext(ctx), ctx: ctx, svcCtx: svcCtx, } } func (l *UserInfoLogic) UserInfo() (resp *types.UserInfoResponse, err error) { uid, _ := l.ctx.Value(\u0026#34;uid\u0026#34;).(json.Number).Int64() one, err := l.svcCtx.UserModel.FindOne(l.ctx, uid) if err != nil { return nil, err } return \u0026amp;types.UserInfoResponse{ ID: one.Id, Name: one.Name, Email: one.Email, }, nil } 3ã€è¿è¡Œæµ‹è¯• # curl -i http://127.0.0.1:8000/api/userinfo HTTP/1.1 401 Unauthorized Traceparent: 00-a418d68212d9e2c29664a7e9aeefbd14-7282c005bbcd5f24-00 Date: Thu, 21 Jul 2022 17:01:21 GMT Content-Length: 0 #curl -i -X GET \u0026#39;http://127.0.0.1:8000/api/userinfo\u0026#39; -H \u0026#39;Authorization: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2NTg1MDkzNDAsImlhdCI6MTY1ODQyMjk0MCwidWlkIjoxfQ.j6K0CjJ9jM5a3a7-DRUGq6b3uvMFcelvR7vQkZAQXWw\u0026#39; HTTP/1.1 200 OK Content-Type: application/json; charset=utf-8 Traceparent: 00-e547b466d3e7da54d932838bfdee17c4-4ec7aaedb056ef03-00 Date: Thu, 21 Jul 2022 17:07:42 GMT Content-Length: 47 {\u0026#34;id\u0026#34;:1,\u0026#34;name\u0026#34;:\u0026#34;test\u0026#34;,\u0026#34;email\u0026#34;:\u0026#34;test@gmail.com\u0026#34;} "
},
{
	"uri": "http://blog.911015.com/",
	"title": "Goè¯­è¨€å…¥é—¨",
	"tags": null,
	"description": "Goè¯­è¨€å…¥é—¨",
	"content": "\rã€ŠGoè¯­è¨€å…¥é—¨ã€‹ æ•´ç†äº†ä»é›¶å¼€å§‹å­¦ä¹ Goè¯­è¨€çš„ç›¸å…³åŸºç¡€çŸ¥è¯†ï¼›\rè·Ÿç€ç”¨æˆ·æ‰‹å†Œå­¦Golang gRPC å¿«é€Ÿä½“éªŒ go-zeroåº”ç”¨å®è·µ Goè¯­è¨€å…¥é—¨ä¹‹è·¯å…¬ä¼—å·æ–‡ç«  "
},
{
	"uri": "http://blog.911015.com/wx/2023052202.html",
	"title": "Goè¯­è¨€æµç¨‹æ§åˆ¶:Defer",
	"tags": null,
	"description": "Goè¯­è¨€æµç¨‹æ§åˆ¶:Defer",
	"content": "åœ¨ Golang ä¸­ï¼Œdefer æ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œç”¨äºå®šä¹‰å»¶è¿Ÿæ‰§è¡Œå‡½æ•°ã€‚å®ƒå¯ä»¥å°†ä¸€ä¸ªå‡½æ•°æ¨è¿Ÿåˆ°å½“å‰å‡½æ•°è¿”å›ä¹‹åæ‰§è¡Œï¼Œå³ä½¿è¯¥å‡½æ•°å‡ºç°å¼‚å¸¸æˆ–é”™è¯¯ä¹Ÿä¸ä¼šå½±å“ defer å®šä¹‰çš„ä»£ç å—ã€‚\nå¸¸è§ç”¨ä¾‹ ä»¥ä¸‹æ˜¯ defer çš„ä¸€äº›å¸¸è§ç”¨ä¾‹ï¼š 1ã€å…³é—­æ–‡ä»¶èµ„æº ä½¿ç”¨ defer å…³é—­æ–‡ä»¶èµ„æºæ˜¯ä¸€ç§éå¸¸å¸¸è§çš„æ–¹æ³•ï¼Œå¯ä»¥ç¡®ä¿æ— è®ºä»£ç ä¸­å‘ç”Ÿäº†ä»€ä¹ˆï¼Œæ–‡ä»¶éƒ½èƒ½å¤Ÿè¢«å…³é—­ã€‚\nf, err := os.Open(\u0026#34;/path/to/file\u0026#34;) if err != nil { log.Fatal(err) } defer f.Close() 2ã€è®°å½•è€—æ—¶ æˆ‘ä»¬å¯ä»¥åœ¨å¼€å§‹å¤„ç†æŸä¸ªè¯·æ±‚å‰è°ƒç”¨ time.Now() å‡½æ•°æ¥è®°å½•èµ·å§‹æ—¶é—´ï¼Œç„¶ååœ¨é€€å‡ºå‡½æ•°æ—¶è®¡ç®—ç»è¿‡çš„æ—¶é—´å¹¶æ‰“å°å‡ºæ¥ã€‚\nfunc processRequest(req *http.Request) { start := time.Now() defer logTime(start) // å¤„ç†è¯·æ±‚ } func logTime(start time.Time) { log.Printf(\u0026#34;request took %v\u0026#34;, time.Since(start)) } 3ã€é”çš„é‡Šæ”¾ å½“æˆ‘ä»¬åœ¨ä½¿ç”¨äº’æ–¥é”æ—¶ï¼Œå¿…é¡»ç¡®ä¿æ¯æ¬¡è·å–é”åéƒ½è¦åŠæ—¶é‡Šæ”¾é”ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ­»é”çš„æƒ…å†µã€‚ä½¿ç”¨ defer è¯­å¥å¯ä»¥ç¡®ä¿åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¼šé‡Šæ”¾é”ã€‚\nvar mu sync.Mutex func someFunc() { mu.Lock() defer mu.Unlock() // æ‰§è¡Œä¸€äº›éœ€è¦é”å®šçš„æ“ä½œ } æ³¨æ„äº‹é¡¹ åœ¨ä½¿ç”¨ defer æ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š\nå»¶è¿Ÿæ‰§è¡Œçš„å‡½æ•°å‚æ•°ä¼šåœ¨å®šä¹‰æ—¶è¢«è®¡ç®—ï¼Œè€Œä¸æ˜¯åœ¨å®é™…æ‰§è¡Œæ—¶è®¡ç®—ã€‚è¿™æ„å‘³ç€å¦‚æœå‚æ•°æ˜¯ä¸€ä¸ªæŒ‡é’ˆæˆ–ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œå¹¶ä¸”åœ¨å‡½æ•°é€€å‡ºä¹‹å‰è¢«ä¿®æ”¹äº†ï¼Œé‚£ä¹ˆè¿™äº›ä¿®æ”¹ä¼šå½±å“åˆ°å»¶è¿Ÿæ‰§è¡Œçš„å‡½æ•°ã€‚ä¾‹å¦‚ï¼š func someFunc() { var a = 10 defer fmt.Println(a) a = 20 } // è¾“å‡ºç»“æœä¸º 10 å¦‚æœæœ‰å¤šä¸ª defer è¯­å¥ï¼Œå®ƒä»¬çš„æ‰§è¡Œé¡ºåºä¸å£°æ˜çš„é¡ºåºç›¸åã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæœ€åä¸€ä¸ª defer è¯­å¥å°†é¦–å…ˆæ‰§è¡Œï¼Œæœ€å…ˆå£°æ˜çš„ defer è¯­å¥å°†æœ€åæ‰§è¡Œã€‚ func someFunc() { defer fmt.Println(\u0026#34;first\u0026#34;) defer fmt.Println(\u0026#34;second\u0026#34;) defer fmt.Println(\u0026#34;third\u0026#34;) } // è¾“å‡ºç»“æœä¸º third, second, first åœ¨å‡½æ•°ä¸­ï¼Œreturn è¯­å¥å¹¶ä¸æ˜¯åŸå­æ“ä½œã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒåˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼šç¬¬ä¸€æ­¥æ˜¯å°†è¿”å›å€¼èµ‹ç»™è°ƒç”¨è€…ï¼›ç¬¬äºŒæ­¥æ˜¯æ‰§è¡Œå‡½æ•°çš„æ¸…ç†å·¥ä½œï¼ˆåŒ…æ‹¬ defer è¯­å¥ï¼‰ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨ defer æ—¶ï¼Œéœ€è¦æ³¨æ„ä¸è¦è®© defer å½±å“å‡½æ•°çš„è¿”å›å€¼ã€‚ä¾‹å¦‚ï¼š func someFunc() (result int) { defer func() { result++ }() return 0 } // è¿”å›å€¼ä¸º 1 å¦‚æœåœ¨ defer è¯­å¥ä¸­ä½¿ç”¨äº†ä¸€ä¸ªå‡½æ•°è¿”å›çš„é”™è¯¯å€¼å¹¶ä¸”è¯¥å‡½æ•°å¯èƒ½ä¼šå¤±è´¥ï¼Œåˆ™åº”è¯¥åœ¨è°ƒç”¨å‡½æ•°åç«‹å³æ£€æŸ¥è¿”å›å€¼ã€‚å¦åˆ™ï¼Œåœ¨å‡½æ•°æœ€åæ‰§è¡Œæ—¶ï¼Œå¯èƒ½ä¼šå¿½ç•¥é”™è¯¯å¹¶å¯¼è‡´ä¸å¯é¢„æµ‹çš„è¡Œä¸ºã€‚ä¾‹å¦‚ï¼š func someFunc() (err error) { file, err := os.Open(\u0026#34;filename.txt\u0026#34;) if err != nil { return err } defer func() { if err := file.Close(); err != nil { log.Fatal(err) } }() // ... } "
},
{
	"uri": "http://blog.911015.com/grpc/01.html",
	"title": "ä¸€ã€Hello World",
	"tags": null,
	"description": "gRPC æ˜¯ Google å¼€å‘çš„ä¸€æ¬¾é«˜æ€§èƒ½ã€å¼€æºçš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰æ¡†æ¶ã€‚å®ƒä½¿ç”¨ Protocol Buffers ä½œä¸ºæ¥å£å®šä¹‰è¯­è¨€ï¼ˆIDLï¼‰ï¼Œå¯ä»¥åœ¨å¤šç§ç¼–ç¨‹è¯­è¨€å’Œå¹³å°ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚",
	"content": " ä¸€ä¸ªé«˜æ€§èƒ½ã€å¼€æºçš„é€šç”¨RPCæ¡†æ¶ A high performance, open source universal RPC framework\nä¸€ã€ç¯å¢ƒé…ç½® 1ã€ä¸‹è½½å¹¶å®‰è£… protocol-buffers 2ã€å®‰è£…Goè¯­è¨€æ’ä»¶\ngo install google.golang.org/protobuf/cmd/protoc-gen-go@v1.28 go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@v1.2\n3ã€åˆ›å»ºGRPCé¡¹ç›®ç›®å½•ï¼š\nmkdir grpc-demo go mod init grpc-demo\näºŒã€åˆ›å»ºå¹¶ç¼–è¯‘proto æ–‡ä»¶ hello/proto/helloworld.proto\nProtobuf ä¸­ é™¤äº†æ”¯æŒå¦‚doubleã€floatã€ int32ã€int64ã€ uint32ã€uint64ã€ boolã€ string å’Œbytes ç­‰åŸºæœ¬æ•°æ®ç±»å‹è¿˜æ”¯æŒenumï¼Œoneofï¼Œmapï¼Œrepeated ç­‰ç±»å‹ï¼›æ›´è¯¦ç»†çš„Protobufæ–‡æ¡£å¯ä»¥æŸ¥é˜… ï¼šprotocol-buffers æ–‡æ¡£\nsyntax = \u0026#34;proto3\u0026#34;; package helloworld; option go_package = \u0026#34;proto/;proto\u0026#34;; service Greeter { rpc SayHello(HelloRequest) returns (HelloReply) {}; } enum Gender { Unknown = 0; Female = 1; Male = 2; } message HelloRequest { string name = 1; int64 age = 2; oneof call { string mobile = 3; string phone = 4; } map\u0026lt;int64,string\u0026gt; role = 5; Gender gender = 6; } message HelloReply { string message = 1; } åˆ›å»ºå¥½protoæ–‡ä»¶åæ‰§è¡Œç¼–è¯‘å‘½ä»¤ï¼Œç”Ÿæˆgoæ–‡ä»¶ä»£ç \nprotoc -I=./hello/proto/ \u0026ndash;go_out=./hello/ \u0026ndash;go-grpc_out=./hello/ ./hello/proto/helloworld.proto\nå‚æ•°è¯´æ˜ï¼š -I** æˆ– \u0026ndash;proto_path ï¼šæŒ‡å®šæŒ‡å®šè¦æœç´¢çš„ç›®å½•è¿›å£ã€‚å¯ä»¥æŒ‡å®šå¤šæ¬¡ï¼›å°†æŒ‰é¡ºåºæœç´¢ç›®å½•ã€‚å¦‚æœå½“å‰protoæ–‡ä»¶ä¸­ä¾èµ–ç¬¬ä¸‰æ–¹æ–‡ä»¶ï¼Œä¸€èˆ¬éœ€è¦æŒ‡å®šç¬¬ä¸‰æ–¹æ–‡ä»¶è·¯å¾„ï¼› _\u0026ndash;go_out**= ï¼šè®¾ç½®æ‰€ç”Ÿæˆçš„Goä»£ç è¾“å‡ºçš„ç›®å½• _\u0026ndash;go-grpc_out**= ï¼š **è®¾ç½®æ‰€ç”Ÿæˆçš„ protoc-gen-go-grpc ç”Ÿæˆä»£ç è¾“å‡ºçš„ç›®å½• æ‰§è¡ŒæˆåŠŸåç”Ÿæˆ hello/proto/helloworld.pb.go hello/proto/helloworld_grep.pb.go ä¸¤ä¸ªæ–‡ä»¶\nä¸‰ã€æœåŠ¡ç«¯ä»£ç å®ç° æˆ‘ä»¬åœ¨ç¬¬äºŒæ­¥ä¸­çš„protoæ–‡ä»¶ä¸­å®šä¹‰äº† Greeter æœåŠ¡ï¼ŒGreeter æœåŠ¡åŒ…å«ä¸€ä¸ªSayHelloæ–¹æ³•ï¼›åœ¨ç”Ÿæˆçš„grpcæ–‡ä»¶ä¸­å¯ä»¥æ‰¾åˆ° ä¸€ä¸ªæ–¹æ³•\nfunc RegisterGreeterServer(s grpc.ServiceRegistrar, srv GreeterServer)\næ¥ä¸‹æ¥æœåŠ¡ç«¯è¦åšçš„å°±æ˜¯å®ç° GreeterServer æ¥å£æ³¨å†Œå¹¶å¯åŠ¨æœåŠ¡\nvar port string func init() { flag.StringVar(\u0026amp;port, \u0026#34;p\u0026#34;, \u0026#34;8000\u0026#34;, \u0026#34;å¯åŠ¨ç«¯å£å·\u0026#34;) flag.Parse() } type Server struct { pb.UnimplementedGreeterServer } func (gs Server) SayHello(ctx context.Context, r *pb.HelloRequest) (*pb.HelloReply, error) { str := r.GetMobile() if len(str) == 0 { str = r.GetPhone() } var url string for k, v := range r.Role { url = fmt.Sprintf(\u0026#34;%d=%s\u0026amp;\u0026#34;, k, v) } return \u0026amp;pb.HelloReply{Message: \u0026#34;Hello World \u0026#34; + r.Name + str + \u0026#34;?\u0026#34; + url}, nil } func main() { server := grpc.NewServer() pb.RegisterGreeterServer(server, \u0026amp;Server{}) reflection.Register(server) lis, _ := net.Listen(\u0026#34;tcp\u0026#34;, \u0026#34;:\u0026#34;+port) server.Serve(lis) } 26ï¼šreflection.Register(server) å¢åŠ åï¼Œå¯ä»¥é€šè¿‡grpcurlè¿›è¡Œæµ‹è¯•\nå››ã€å®¢æˆ·ç«¯ä»£ç å¼€å‘ å®¢æˆ·ç«¯è°ƒç”¨ä»£ç  åœ¨helloworld_grpc.pb.go å·²ç»ç”Ÿæˆï¼šfunc NewGreeterClient(cc grpc.ClientConnInterface) GreeterClient åˆ›å»ºå®¢æˆ·ç«¯å¯¹è±¡ï¼Œç›´æ¥è°ƒç”¨æœåŠ¡ç«¯æ–¹æ³•ï¼›\nvar port string func init() { flag.StringVar(\u0026amp;port, \u0026#34;p\u0026#34;, \u0026#34;8000\u0026#34;, \u0026#34;å¯åŠ¨ç«¯å£å·\u0026#34;) flag.Parse() } func main() { conn, _ := grpc.Dial(\u0026#34;:\u0026#34;+port, grpc.WithInsecure()) defer conn.Close() client := pb.NewGreeterClient(conn) _ = SayHello(client) } func SayHello(client pb.GreeterClient) error { reapy := \u0026amp;pb.HelloRequest{ Name: \u0026#34;eddycjy\u0026#34;, Call: \u0026amp;pb.HelloRequest_Mobile{Mobile: \u0026#34;151\u0026#34;}, Role: map[int64]string{1: \u0026#34;888\u0026#34;}, } resp, _ := client.SayHello(context.Background(), reapy) log.Printf(\u0026#34;client.SayHello resp: %s\u0026#34;, resp.Message) return nil } å…¶ä¸­8è¡Œä¸­ grpc.WithInsecure() æ–¹æ³•åœ¨æ–°ç‰ˆæœ¬ä¸­å·²ç»ä¸èµæˆä½¿ç”¨ï¼›å»ºè®®ä½¿ç”¨ ** grpc.WithTransportCredentials(insecure.NewCredentials())**æ›¿æ¢\n"
},
{
	"uri": "http://blog.911015.com/beginner/",
	"title": "è·Ÿç€ç”¨æˆ·æ‰‹å†Œå­¦Golang",
	"tags": null,
	"description": "Goç¼–ç¨‹è¯­è¨€æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæ—¨åœ¨æé«˜ç¨‹åºå‘˜çš„å·¥ä½œæ•ˆç‡ã€‚",
	"content": "\ræ–‡æ¡£ç®€ä»‹\rGoç¼–ç¨‹è¯­è¨€æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæ—¨åœ¨æé«˜ç¨‹åºå‘˜çš„å·¥ä½œæ•ˆç‡ã€‚\nGoè¡¨ç°åŠ›å¼ºã€ç®€æ´ã€å¹²å‡€ã€é«˜æ•ˆã€‚å®ƒçš„å¹¶å‘æœºåˆ¶ä½¿ç¼–å†™ç¨‹åºå˜å¾—å®¹æ˜“ï¼Œä»è€Œæœ€å¤§é™åº¦åœ°åˆ©ç”¨å¤šæ ¸å’Œç½‘ç»œæœºå™¨ï¼Œè€Œå®ƒçš„æ–°å‹ç³»ç»Ÿåˆ™å®ç°äº†çµæ´»å’Œæ¨¡å—åŒ–çš„ç¨‹åºæ„å»ºã€‚Goå¯ä»¥å¿«é€Ÿç¼–è¯‘ä¸ºæœºå™¨ä»£ç ï¼Œä½†åŒæ—¶å…·æœ‰åƒåœ¾æ”¶é›†çš„ä¾¿åˆ©æ€§å’Œè¿è¡Œæ—¶åå°„çš„åŠŸèƒ½ã€‚è¿™æ˜¯ä¸€ç§å¿«é€Ÿã€é™æ€ç±»å‹åŒ–ã€ç¼–è¯‘çš„è¯­è¨€ï¼Œæ„Ÿè§‰å°±åƒæ˜¯ä¸€ç§åŠ¨æ€ç±»å‹åŒ–ã€è§£é‡Šçš„è¯­è¨€ã€‚\nGolangå®˜æ–¹æ–‡æ¡£åœ°å€ä¸ºï¼šgo.dev/doc ï¼›æ–‡æ¡£å¼€å§‹ç®€å•ä»‹ç»äº†Golang çš„è¯­è¨€ç‰¹æ€§ï¼šç®€æ´ã€é«˜æ•ˆã€å¤©ç„¶å¹¶å‘ã€å¿«é€Ÿç¼–è¯‘ã€åƒåœ¾å›æ”¶ã€åå°„ï¼Œæ–°ç±»å‹ç³»ç»Ÿç­‰ç­‰ã€‚æ¥ä¸‹æ¥åˆ†æŒ‰å…¥é—¨ï¼Œè¿›é˜¶ã€é«˜çº§åˆ’åˆ†äº†å¤§æ¨¡å—è®©åˆå­¦è€…èƒ½å¤Ÿå¯»å¯»æ¸è¿›çš„æ·±å…¥å­¦ä¹ ç†è§£Golangï¼›æ¥ä¸‹æ¥æˆ‘ä»¬å°†æ ¹æ® Getting Startedéƒ¨åˆ†ä¸€æ­¥ä¸€æ­¥å…¥é—¨Golangã€‚\næœ¬ç« èŠ‚å†…å®¹ä¸ºå®˜æ–¹æ–‡æ¡£å†…å®¹ç¿»è¯‘ï¼›éƒ¨åˆ†å†…å®¹å’Œä»£ç ä¸ºä¸ªäººè¡¥å……ï¼›Copyright\nå¦‚æœå†…å®¹æœ‰è¯¯è¯· ä¸æˆ‘è”ç³»\næ•™ç¨‹åˆ—è¡¨ è¯´æ˜ å®‰è£…Golang æœ‰å…³ä¸‹è½½å’Œå®‰è£…Goçš„è¯´æ˜ã€‚ æ–°æ‰‹å…¥é—¨ ä¸€ä¸ªç®€çŸ­çš„Helloï¼ŒWorldå…¥é—¨æ•™ç¨‹ã€‚äº†è§£ä¸€äº›Goä»£ç ã€å·¥å…·ã€åŒ…å’Œæ¨¡å—ã€‚ åˆ›å»ºGoé¡¹ç›® ä»‹ç»å‡½æ•°ã€é”™è¯¯å¤„ç†ã€æ•°ç»„ã€æ˜ å°„ã€å•å…ƒæµ‹è¯•å’Œç¼–è¯‘çš„ç®€çŸ­ä¸»é¢˜æ•™ç¨‹ã€‚ å…¥é—¨å¤šæ¨¡å—å·¥ä½œåŒº ä»‹ç»åœ¨Goä¸­åˆ›å»ºå’Œä½¿ç”¨å¤šæ¨¡å—å·¥ä½œåŒºçš„åŸºæœ¬çŸ¥è¯†ã€‚å¤šæ¨¡å—å·¥ä½œç©ºé—´å¯¹äºè·¨å¤šä¸ªæ¨¡å—è¿›è¡Œæ›´æ”¹éå¸¸æœ‰ç”¨ã€‚ï¼ˆGo 1.18å¢åŠ äº†å·¥ä½œç©ºé—´æ¨¡å¼ï¼Œæœ¬åœ°åšå¤šç‰ˆæœ¬ç®¡ç†å¾ˆæ–¹ä¾¿ï¼‰ ç”¨Goå’ŒGinå¼€å‘RESTful API ä»‹ç»ä½¿ç”¨Goå’ŒGin web Frameworkç¼–å†™RESTful webæœåŠ¡APIçš„åŸºç¡€çŸ¥è¯†ã€‚ ä½¿ç”¨Goæ³›å‹ ä½¿ç”¨æ³›å‹ï¼Œæ‚¨å¯ä»¥å£°æ˜å’Œä½¿ç”¨å‡½æ•°æˆ–ç±»å‹ï¼Œè¿™äº›å‡½æ•°æˆ–ç±»å‹æ˜¯ä¸ºä¸è°ƒç”¨ä»£ç æä¾›çš„ä»»ä½•ä¸€ç»„ç±»å‹ä¸€èµ·å·¥ä½œè€Œç¼–å†™çš„ã€‚(Go 1.18 Goè¯­è¨€å¢åŠ æ³›å‹) ä½¿ç”¨fuzzingæ¨¡ç³Šæµ‹è¯• fuzzingå¯ä»¥ä¸ºæ‚¨çš„æµ‹è¯•ç”Ÿæˆè¾“å…¥ï¼Œè¿™äº›è¾“å…¥å¯ä»¥æ•æ‰åˆ°æ‚¨å¯èƒ½é”™è¿‡çš„è¾¹ç¼˜æ¡ˆä¾‹å’Œå®‰å…¨é—®é¢˜ã€‚ï¼ˆæ¨¡ç³Šæµ‹è¯•æ˜¯ä¸€ç§é€šè¿‡å‘ç›®æ ‡ç³»ç»Ÿæä¾›éé¢„æœŸçš„è¾“å…¥å¹¶ç›‘è§†å¼‚å¸¸ç»“æœæ¥å‘ç°è½¯ä»¶æ¼æ´çš„æ–¹æ³•ã€‚ï¼‰ ç¼–å†™Webåº”ç”¨ç¨‹åº æ„å»ºä¸€ä¸ªç®€å•çš„webåº”ç”¨ç¨‹åºã€‚ å¦‚ä½•ç¼–å†™Goä»£ç  æœ¬æ–‡æ¡£è§£é‡Šäº†å¦‚ä½•åœ¨æ¨¡å—ä¸­å¼€å‘ä¸€ç»„ç®€å•çš„GoåŒ…ï¼Œå¹¶å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨Goå‘½ä»¤æ¥æ„å»ºå’Œæµ‹è¯•åŒ…ã€‚ Goä¹‹æ—… Goè¯­è¨€çš„äº’åŠ¨ä»‹ç»åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ã€‚ç¬¬ä¸€éƒ¨åˆ†ä»‹ç»äº†åŸºæœ¬è¯­æ³•å’Œæ•°æ®ç»“æ„ï¼›ç¬¬äºŒéƒ¨åˆ†è®¨è®ºäº†æ–¹æ³•å’Œæ¥å£ï¼›ç¬¬ä¸‰éƒ¨åˆ†ä»‹ç»äº†Goçš„å¹¶å‘åŸè¯­ã€‚æ¯ä¸€èŠ‚éƒ½ä»¥ä¸€äº›ç»ƒä¹ ä½œä¸ºç»“æŸï¼Œè¿™æ ·ä½ å°±å¯ä»¥ç»ƒä¹ ä½ æ‰€å­¦åˆ°çš„ä¸œè¥¿ã€‚æ‚¨å¯ä»¥åœ¨çº¿å‚è§‚ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è½¯ä»¶åœ¨æœ¬åœ°å®‰è£…ï¼š go install golang.org/x/website/tour@latestè¿™å°†æŠŠtouräºŒè¿›åˆ¶æ–‡ä»¶æ”¾åœ¨GOPATHçš„binç›®å½•ä¸­ã€‚ å­¦ä¹ è®¡åˆ’ é˜…è¯»å®˜æ–¹æ–‡æ¡£ï¼› é€šè¿‡ä»£ç ç»ƒä¹ è¯­æ³• é€šè¿‡é¡¹ç›®ç†Ÿæ‚‰ä»£ç  01-Golangå®‰è£…ä¸ä½“éªŒ 02-æ–°æ‰‹å…¥é—¨ 03-åˆ›å»ºGoé¡¹ç›® 04-å…¥é—¨å¤šæ¨¡å—å·¥ä½œåŒº Go ç¼–ç¨‹è¯­è¨€ä¹‹æ—… "
},
{
	"uri": "http://blog.911015.com/beginner/02.html",
	"title": "02-æ–°æ‰‹å…¥é—¨",
	"tags": null,
	"description": "",
	"content": " åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å°†è·å¾—Goç¼–ç¨‹çš„ç®€è¦ä»‹ç»\nå®‰è£…Go . å†™ä¸€äº›ç®€å•çš„ \u0026ldquo;Hello, world\u0026rdquo; . ä½¿ç”¨goå‘½ä»¤è¿è¡Œä»£ç . ä½¿ç”¨Goç¨‹åºåŒ…å‘ç°å·¥å…·æŸ¥æ‰¾å¯ä»¥åœ¨è‡ªå·±çš„ä»£ç ä¸­ä½¿ç”¨çš„ç¨‹åºåŒ…. è°ƒç”¨å¤–éƒ¨æ¨¡å—çš„åŠŸèƒ½. å‰æœŸå‡†å¤‡ ä¸€äº›ç¼–ç¨‹ç»éªŒã€‚ è¿™é‡Œçš„ä»£ç éå¸¸ç®€å•ï¼Œä½†äº†è§£ä¸€äº›å‡½æ•°ç›¸å…³çš„çŸ¥è¯†ä¼šæœ‰æ‰€å¸®åŠ©ã€‚. ç”¨äºç¼–è¾‘ä»£ç çš„å·¥å…·ã€‚** ** ä»»ä½•æ–‡æœ¬ç¼–è¾‘å™¨éƒ½å¯ä»¥ã€‚å¤§å¤šæ•°æ–‡æœ¬ç¼–è¾‘å™¨éƒ½å¾ˆå¥½åœ°æ”¯æŒGoã€‚æœ€å—æ¬¢è¿çš„æ˜¯VSCodeï¼ˆå…è´¹ï¼‰ã€GoLandï¼ˆä»˜è´¹ï¼‰å’ŒVimï¼ˆå…è´¹ï¼‰ã€‚ ä¸€ä¸ªå‘½ä»¤ç»ˆç«¯. Goåœ¨Linuxå’ŒMacä¸Šä»¥åŠWindowsä¸­çš„PowerShellæˆ–cmdä¸Šä½¿ç”¨ä»»ä½•ç»ˆç«¯éƒ½èƒ½å¾ˆå¥½åœ°å·¥ä½œã€‚ Hello World æŒ‰ä¸€ä¸‹æ­¥éª¤å†™ä¸€æ®µ â€œHello Worldâ€ä»£ç \n1ã€æ‰“å¼€ä¸€ä¸ªå‘½ä»¤æç¤ºç¬¦å¹¶cdåˆ°æ‚¨çš„ä¸»ç›®å½•ã€‚ Linux/Mac ç³»ç»Ÿæ‰§è¡Œ : cd Windowç³»ç»Ÿæ‰§è¡Œï¼š cd %HOMEPATH%\n2ã€ä¸ºæ‚¨çš„ç¬¬ä¸€ä¸ªGoæºä»£ç åˆ›å»ºä¸€ä¸ªhelloç›®å½• å¯ä»¥ä½¿ç”¨ä¸€ä¸‹å‘½ä»¤ï¼š\nmkdir hello cd hello 3ã€ä¸ºä»£ç å¯ç”¨ä¾èµ–ç®¡ç†\nå½“æ‚¨çš„ä»£ç å¯¼å…¥å…¶ä»–é¡¹ç›®ä¸­çš„åŒ…ï¼ˆpackageï¼‰æ—¶ï¼Œæ‚¨å¯ä»¥é€šè¿‡è‡ªå·±çš„ä»£ç æ¥ç®¡ç†è¿™äº›æ¨¡å—çš„ä¾èµ–å…³ç³»ã€‚è¯¥æ¨¡å—ç”±go.modæ–‡ä»¶å®šä¹‰ï¼Œé€šè¿‡è¯¥æ–‡ä»¶è¿½è¸ªæä¾›åŒ…çš„è¿™äº›æ¨¡å—ã€‚è¯¥go.modæ–‡ä»¶ä¸æ‚¨çš„ä»£ç ä¸€èµ·ä¿å­˜ï¼ŒåŒ…æ‹¬åœ¨æ‚¨çš„æºä»£ç å­˜å‚¨åº“ä¸­ã€‚\rè¦é€šè¿‡åˆ›å»ºgo.modæ–‡ä»¶ä¸ºä»£ç å¯ç”¨ä¾èµ–ç®¡ç†ï¼Œè¯·è¿è¡Œgo mod init+æ¨¡å—çš„åç§° å‘½ä»¤ã€‚è¯¥åç§°æ˜¯æ¨¡å—çš„æ¨¡å—è·¯å¾„ã€‚\råœ¨å®é™…å¼€å‘ä¸­ï¼Œæ¨¡å—è·¯å¾„é€šå¸¸æ˜¯ä¿å­˜æºä»£ç çš„å­˜å‚¨ä»“åº“ä½ç½®ã€‚ä¾‹å¦‚ï¼Œæ¨¡å—è·¯å¾„å¯èƒ½æ˜¯github.com/mymoduleã€‚å¦‚æœæ‚¨è®¡åˆ’å‘å¸ƒæ‚¨çš„æ¨¡å—ä¾›ä»–äººä½¿ç”¨ï¼Œåˆ™æ¨¡å—è·¯å¾„å¿…é¡»æ˜¯Goå·¥å…·å¯ä»¥ä¸‹è½½æ‚¨çš„æ¨¡å—çš„ä½ç½®ã€‚\rå¯¹äºæœ¬æ•™ç¨‹ï¼Œåªéœ€ä½¿ç”¨example/helloã€‚\ngo mod init example/hello go: creating new go.mod: module example/hello 4ã€åœ¨ç¼–è¾‘å™¨ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶hello.goï¼Œåœ¨å…¶ä¸­ç¼–å†™ä»£ç ã€‚ 5ã€å°†ä»¥ä¸‹ä»£ç ç²˜è´´åˆ°hello.goæ–‡ä»¶ä¸­å¹¶ä¿å­˜è¯¥æ–‡ä»¶ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; ) func main() { fmt.Println(\u0026#34;Hello Worldï¼ˆ^-^ï¼‰\u0026#34;) } æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹è¿™æ®µä»£ç çš„å†…å®¹ï¼š\nå£°æ˜ä¸€ä¸ªä¸»åŒ…(main)ï¼ˆåŒ…æ˜¯å¯¹å‡½æ•°è¿›è¡Œåˆ†ç»„çš„ä¸€ç§æ–¹å¼ï¼Œå®ƒç”±åŒä¸€ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ç»„æˆï¼‰ã€‚ å¯¼å…¥æµè¡Œçš„fmtåŒ…ï¼Œå…¶ä¸­åŒ…å«æ ¼å¼åŒ–æ–‡æœ¬çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ‰“å°åˆ°æ§åˆ¶å°ã€‚è¿™ä¸ªåŒ…æ˜¯Goçš„æ ‡å‡†åº“ä¹‹ä¸€ã€‚ å®ç°ä¸€ä¸ªä¸»è¦åŠŸèƒ½ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°æ§åˆ¶å°ã€‚å½“æ‚¨è¿è¡Œä¸»ç¨‹åºåŒ…æ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šæ‰§è¡Œä¸€ä¸ªä¸»å‡½æ•°ï¼ˆmainï¼‰ã€‚ 6ã€è¿è¡Œä»£ç \ngo run . # Hello Worldï¼ˆ^-^ï¼‰ 7ã€go runå‘½ä»¤æ˜¯ä¼—å¤šgoå‘½ä»¤ä¹‹ä¸€ã€‚ä½¿ç”¨ go help å‘½ä»¤å¯ä»¥æŸ¥çœ‹å…¶ä»–å‘½ä»¤å¸®åŠ©æ–‡æ¡£ï¼š\nè°ƒç”¨å¤–éƒ¨åŒ… å½“ä½ éœ€è¦ä½ çš„ä»£ç æ¥åšä¸€äº›å¯èƒ½å·²ç»è¢«å…¶ä»–äººå®ç°çš„äº‹æƒ…æ—¶ï¼Œä½ å¯ä»¥å¯¼å…¥ä¸€ä¸ªå®ç°äº†è¿™äº›åŠŸèƒ½çš„åŒ…ç›´æ¥ä½¿ç”¨ã€‚\n1ã€ä½¿ç”¨å¤–éƒ¨æ¨¡å—çš„åŠŸèƒ½ï¼Œä½¿æ‰“å°çš„æ¶ˆæ¯æ›´åŠ æœ‰è¶£\rè®¿é—®pkg.go.devå¹¶æœç´¢â€œquoteâ€åŒ… åœ¨æœç´¢ç»“æœä¸­æ‰¾åˆ°å¹¶å•å‡»rsc.io/quoteåŒ…ï¼ˆå¦‚æœæ‚¨çœ‹åˆ°rsc.io/quote/v3ï¼Œè¯·æš‚æ—¶å¿½ç•¥å®ƒï¼‰ã€‚ åœ¨â€œæ–‡æ¡£â€éƒ¨åˆ†çš„â€œç´¢å¼•â€ä¸‹ï¼Œè®°ä¸‹å¯ä»¥ä»ä»£ç ä¸­è°ƒç”¨çš„å‡½æ•°åˆ—è¡¨ã€‚æ‚¨å°†ä½¿ç”¨GoåŠŸèƒ½ã€‚ è¯·æ³¨æ„ï¼Œåœ¨æœ¬é¡µé¡¶éƒ¨ï¼Œ\u0026ldquo;quote\u0026quot;åŒ…å«åœ¨rsc.io/quoteæ¨¡å—ä¸­ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨pkg.go.devç½‘ç«™æŸ¥æ‰¾å·²å‘å¸ƒçš„æ¨¡å—ï¼Œè¿™äº›æ¨¡å—çš„åŒ…ä¸­æœ‰æ‚¨å¯ä»¥åœ¨è‡ªå·±çš„ä»£ç ä¸­ä½¿ç”¨çš„åŠŸèƒ½ã€‚åŒ…å‘å¸ƒåœ¨æ¨¡å—ä¸­ï¼Œæ¯”å¦‚rsc.io/quoteï¼Œå…¶ä»–äººå¯ä»¥åœ¨å…¶ä¸­ä½¿ç”¨å®ƒä»¬ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæ–°ç‰ˆæœ¬ä¼šå¯¹æ¨¡å—è¿›è¡Œæ”¹è¿›ï¼Œæ‚¨å¯ä»¥å‡çº§ä»£ç ä»¥ä½¿ç”¨æ”¹è¿›çš„ç‰ˆæœ¬ã€‚\r2ã€åœ¨Goä»£ç ä¸­ï¼Œå¯¼å…¥rsc.io/quoteåŒ…å¹¶è°ƒç”¨å…¶å‡½æ•° quote.Go()ã€‚ä¹‹åï¼Œæ‚¨çš„ä»£ç åº”è¯¥åŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼š\rpackage main import \u0026#34;fmt\u0026#34; import \u0026#34;rsc.io/quote\u0026#34; func main() { fmt.Println(quote.Go()) } 3ã€æ·»åŠ æ¨¡å—ä¾èµ–å’Œæ ¡éªŒ Goç¨‹åºæŠŠâ€œquoteâ€åŒ…æ·»åŠ åˆ°ä¾èµ–ä¸­ï¼ˆgo.modï¼‰ï¼Œä»¥åŠç”¨äºéªŒè¯æ¨¡å—çš„go.sumæ–‡ä»¶ä¸­ã€‚\n$ go mod tidy go: finding module for package rsc.io/quote go: found rsc.io/quote in rsc.io/quote v1.5.2 4ã€è¿è¡Œæ‚¨çš„ä»£ç ä»¥æŸ¥çœ‹æ‚¨æ­£åœ¨è°ƒç”¨çš„å‡½æ•°ç”Ÿæˆçš„æ¶ˆæ¯ã€‚\n$ go run . # Don\u0026#39;t communicate by sharing memory, share memory by communicating. è¯·æ³¨æ„ï¼Œæ‚¨çš„ä»£ç è°ƒç”¨Goå‡½æ•°ï¼Œæ‰“å°å‡ºä¸€æ¡å…³äºé€šä¿¡çš„æ ¼è¨€ã€‚\nå½“æ‚¨è¿è¡Œgo mod tidyï¼Œå®ƒæ‰¾åˆ°å¹¶ä¸‹è½½äº†åŒ…å«æ‚¨å¯¼å…¥çš„åŒ…çš„rsc.io/quoteæ¨¡å—ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¸‹è½½äº†æœ€æ–°ç‰ˆæœ¬v1.5.2ã€‚\n"
},
{
	"uri": "http://blog.911015.com/tour/02.html",
	"title": "2ã€åŸºç¡€ç¯‡ï¼ˆäºŒï¼‰ï¼šGoè¯­è¨€æµç¨‹æ§åˆ¶",
	"tags": null,
	"description": "åŸºç¡€ç¯‡ï¼ˆäºŒï¼‰ï¼šGoè¯­è¨€æµç¨‹æ§åˆ¶",
	"content": "For Goåªæœ‰ä¸€ä¸ªå¾ªç¯ç»“æ„ï¼Œå³forå¾ªç¯ã€‚\npackage main import \u0026#34;fmt\u0026#34; func main() { sum := 0 for i := 0; i \u0026lt; 10; i++ { sum += i } fmt.Println(sum) } åŸºæœ¬çš„forå¾ªç¯æœ‰ä¸‰ä¸ªç”¨åˆ†å·åˆ†éš”çš„éƒ¨åˆ†ï¼š\nåˆå§‹åŒ–è¯­å¥ï¼šåœ¨ç¬¬ä¸€æ¬¡è¿­ä»£ä¹‹å‰æ‰§è¡Œ æ¡ä»¶è¡¨è¾¾å¼ï¼šåœ¨æ¯æ¬¡è¿­ä»£ä¹‹å‰æ±‚å€¼ åç½®è¯­å¥ï¼šåœ¨æ¯æ¬¡å¾ªç¯ç»“æŸæ—¶æ‰§è¡Œ åˆå§‹åŒ–è¯­å¥é€šå¸¸æ˜¯ä¸€ä¸ªç®€çŸ­çš„å˜é‡å£°æ˜ï¼Œåœ¨é‚£é‡Œå£°æ˜çš„å˜é‡åªåœ¨forè¯­å¥çš„èŒƒå›´å†…å¯è§ã€‚ ä¸€æ—¦æ¡ä»¶è¡¨è¾¾å¼çš„è®¡ç®—ç»“æœä¸ºfalseï¼Œå¾ªç¯å°†åœæ­¢è¿­ä»£ã€‚ æ³¨æ„ï¼šä¸Cã€Javaæˆ–JavaScriptç­‰å…¶ä»–è¯­è¨€ä¸åŒï¼Œforè¯­å¥çš„ä¸‰ä¸ªç»„ä»¶å‘¨å›´æ²¡æœ‰æ‹¬å·ï¼Œå¹¶ä¸”å¿…é¡»è¦æœ‰å¤§æ‹¬å·{}ã€‚ åˆå§‹åŒ–è¯­å¥å’Œåç½®è¯­å¥æ˜¯å¯é€‰çš„ã€‚å¦‚ä¸‹ï¼š\npackage main import \u0026#34;fmt\u0026#34; func main() { sum := 1 for ; sum \u0026lt; 1000; { sum += sum } fmt.Println(sum) } æ›´è¿›ä¸€æ­¥ï¼Œè¿˜å¯ä»¥å»æ‰åˆ†å·ï¼šç±»ä¼¼Cè¯­è¨€ä¸­çš„çš„whileé‚£æ ·ï¼Œåœ¨Goä¸­æ˜¯ç”¨forå®ç°çš„ã€‚å¦‚ä¸‹ï¼š\npackage main import \u0026#34;fmt\u0026#34; func main() { sum := 1 for sum \u0026lt; 1000 { sum += sum } fmt.Println(sum) } å¦‚æœçœç•¥å¾ªç¯æ¡ä»¶ï¼Œå®ƒå°†æ°¸è¿œå¾ªç¯ï¼Œå› æ­¤ä¸€ä¸ªæ­»å¾ªç¯å°±å¯ä»¥è¿™æ ·å†™ï¼š\npackage main func main() { for { // Do something forever } } If Goçš„ifè¯­å¥ç±»ä¼¼äºå®ƒçš„forå¾ªç¯ï¼›è¡¨è¾¾å¼ä¸éœ€è¦ç”¨æ‹¬å·ï¼ˆï¼‰æ‹¬èµ·æ¥ï¼Œä½†å¿…é¡»è¦æœ‰å¤§æ‹¬å·ï½›ï½ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math\u0026#34; ) func sqrt(x float64) string { if x \u0026lt; 0 { return sqrt(-x) + \u0026#34;i\u0026#34; } return fmt.Sprint(math.Sqrt(x)) } func main() { fmt.Println(sqrt(2), sqrt(-4)) } ä¸forä¸€æ ·ï¼Œifè¯­å¥å¯ä»¥åœ¨æ¡ä»¶ä¹‹å‰ä»¥æ‰§è¡Œä¸€ä¸ªçŸ­è¯­å¥ã€‚è¯­å¥å£°æ˜çš„å˜é‡åªèƒ½åœ¨ifç»“æŸä¹‹å‰ä½¿ç”¨ã€‚å¦‚ä¸‹ï¼š\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math\u0026#34; ) func pow(x, n, lim float64) float64 { if v := math.Pow(x, n); v \u0026lt; lim { return v } return lim } func main() { fmt.Println( pow(3, 2, 10), pow(3, 3, 20), ) } ï¼ˆè¯·å°è¯•åœ¨æœ€åä¸€ä¸ªreturn(line 12)è¯­å¥ä¸­ä½¿ç”¨vã€‚ï¼‰\nIf and else åœ¨ifçŸ­è¯­å¥ä¸­å£°æ˜çš„å˜é‡åœ¨ä»»ä½•elseå—ä¸­éƒ½å¯ç”¨ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math\u0026#34; ) func pow(x, n, lim float64) float64 { if v := math.Pow(x, n); v \u0026lt; lim { return v } else { fmt.Printf(\u0026#34;%g \u0026gt;= %g\\n\u0026#34;, v, lim) } // can\u0026#39;t use v here, though return lim } func main() { fmt.Println( pow(3, 2, 10), pow(3, 3, 20), ) } ï¼ˆåœ¨mainä¸­å¯¹fmt.Printlnçš„è°ƒç”¨ä¹‹å‰ï¼Œä¼šå…ˆå¯¹ä¸¤ä¸ªpowè°ƒç”¨æ±‚å€¼ã€‚ï¼‰\nç»ƒä¹ ï¼šå¾ªç¯å’Œå‡½æ•° ä¸ºäº†ç»ƒä¹ å‡½æ•°å’Œæ–¹æ³•ï¼Œè®©æˆ‘ä»¬å®ç°ä¸€ä¸ªå¹³æ–¹æ ¹å‡½æ•°ï¼š ç»™å®šä¸€ä¸ªæ•°å­—xï¼Œæ‰¾åˆ°zÂ²æœ€æ¥è¿‘xçš„æ•°å­—zã€‚ è®¡ç®—æœºé€šå¸¸ä½¿ç”¨å¾ªç¯è®¡ç®—xçš„å¹³æ–¹æ ¹ã€‚ä»ä¸€äº›å¯èƒ½çš„zå¼€å§‹ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®zÂ²ä¸xçš„æ¥è¿‘ç¨‹åº¦æ¥è°ƒæ•´zï¼Œä»è€Œäº§ç”Ÿæ›´å¥½çš„ç»“æœï¼š\nz -= (z*z - x) / (2*z) é‡å¤è¿™ç§è°ƒæ•´ä¼šä½¿ç»“æœå˜å¾—è¶Šæ¥è¶Šå¥½ï¼Œç›´åˆ°æˆ‘ä»¬å¾—å‡ºå°½å¯èƒ½æ¥è¿‘å®é™…å¹³æ–¹æ ¹çš„ç­”æ¡ˆ åœ¨å‡½æ•°Sqrtä¸­å®ç°è¿™ä¸€åŠŸèƒ½ã€‚zçš„ä¸€ä¸ªä¸é”™çš„èµ·å§‹å€¼æ˜¯1ï¼Œæ— è®ºè¾“å…¥æ˜¯ä»€ä¹ˆã€‚é¦–å…ˆï¼Œé‡å¤è®¡ç®—10æ¬¡ï¼Œå¹¶åœ¨è®¡ç®—è¿‡ç¨‹ä¸­æ‰“å°æ¯ä¸ªzã€‚çœ‹çœ‹ä½ ç¦»xï¼ˆ1ï¼Œ2ï¼Œ3ï¼Œâ€¦ï¼‰çš„å„ç§å€¼çš„ç­”æ¡ˆæœ‰å¤šè¿‘ï¼Œä»¥åŠçŒœæµ‹æ”¹è¿›çš„é€Ÿåº¦æœ‰å¤šå¿«ã€‚ æç¤ºï¼šè¦å£°æ˜å’Œåˆå§‹åŒ–æµ®ç‚¹å€¼ï¼Œè¯·å®šä¹‰ä¸ºæµ®ç‚¹ç±»å‹æˆ–ä½¿ç”¨ç±»å‹è½¬æ¢è½¬æ¢ï¼š\nz := 1.0 z := float64(1) æ¥ä¸‹æ¥ï¼Œä¸€æ—¦å€¼åœæ­¢æ›´æ”¹ï¼ˆæˆ–ä»…æ›´æ”¹å¾ˆå°çš„é‡ï¼‰ï¼Œå°±å°†å¾ªç¯æ¡ä»¶æ›´æ”¹ä¸ºåœæ­¢ã€‚çœ‹çœ‹è¿™æ˜¯å¤šäºè¿˜æ˜¯å°‘äº10æ¬¡è¿­ä»£ã€‚å°è¯•å¯¹zè¿›è¡Œå…¶ä»–åˆå§‹çŒœæµ‹ï¼Œå¦‚xæˆ–x/2ã€‚æ‚¨çš„å‡½æ•°çš„ç»“æœä¸æ ‡å‡†åº“ä¸­çš„math.Sqrtæœ‰å¤šæ¥è¿‘ï¼Ÿ ï¼ˆæ³¨æ„ï¼šå¦‚æœä½ å¯¹ç®—æ³•çš„ç»†èŠ‚æ„Ÿå…´è¶£ï¼Œä¸Šé¢çš„zÂ²âˆ’xæ˜¯zÂ²ç¦»å®ƒéœ€è¦çš„ä½ç½®ï¼ˆxï¼‰æœ‰å¤šè¿œï¼Œé™¤ä»¥2zæ˜¯zÂ²çš„å¯¼æ•°ï¼Œé€šè¿‡zÂ²çš„å˜åŒ–é€Ÿåº¦æ¥è¡¡é‡æˆ‘ä»¬è°ƒæ•´zçš„ç¨‹åº¦ã€‚è¿™ç§é€šç”¨æ–¹æ³•è¢«ç§°ä¸ºç‰›é¡¿æ–¹æ³•ã€‚å®ƒé€‚ç”¨äºè®¸å¤šå‡½æ•°ï¼Œä½†ç‰¹åˆ«é€‚ç”¨äºå¹³æ–¹æ ¹ã€‚ï¼‰ ä»¥ä¸‹ä»£ç ä»…ä¾›å‚è€ƒ\nimport ( \u0026#34;fmt\u0026#34; \u0026#34;math\u0026#34; ) func Sqrt(x float64) float64 { var z = 1.0 var old float64 for math.Abs(old-z) \u0026gt;= 0.000001 { old = z z -= (z*z - x) / (2 * z) } return z } func main() { fmt.Println(Sqrt(2), math.Sqrt(2)) fmt.Println(Sqrt(10), math.Sqrt(10)) } Switch switchè¯­å¥æ˜¯ç¼–å†™if-elseçš„ä¸€ç§æ›´ç®€çŸ­çš„æ–¹æ³•ã€‚å®ƒæ‰§è¡Œç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„åˆ†æ”¯ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;runtime\u0026#34; ) func main() { fmt.Print(\u0026#34;Go runs on \u0026#34;) switch os := runtime.GOOS; os { case \u0026#34;darwin\u0026#34;: fmt.Println(\u0026#34;OS X.\u0026#34;) case \u0026#34;linux\u0026#34;: fmt.Println(\u0026#34;Linux.\u0026#34;) default: // freebsd, openbsd, // plan9, windows... fmt.Printf(\u0026#34;%s.\\n\u0026#34;, os) } } Goçš„switchç»“æ„ä¸Cã€C++ã€Javaã€JavaScriptå’ŒPHPä¸­çš„å¼€å…³ç±»ä¼¼ï¼Œåªæ˜¯Goåªè¿è¡Œç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„åˆ†æ”¯ï¼Œè€Œä¸æ˜¯éšåçš„æ‰€æœ‰æ¡ˆä¾‹ã€‚å®é™…ä¸Šï¼Œåœ¨Goä¸­åœ¨æ¯ä¸ªåˆ†æ”¯æœ€åéƒ½åŠ äº†breakè¯­å¥ã€‚å¦ä¸€ä¸ªé‡è¦çš„åŒºåˆ«æ˜¯Goçš„switchçš„åˆ†æ”¯æ¡ä»¶ä¸ä¸€å®šæ˜¯å¸¸æ•°ï¼Œæ‰€æ¶‰åŠçš„å€¼ä¹Ÿä¸éœ€è¦æ˜¯æ•´æ•°ã€‚\næ‰§è¡Œé¡ºåº switch åˆ†æ”¯æ˜¯ä»ä¸Šåˆ°ä¸‹è¿›è¡Œåˆ¤æ–­çš„ï¼Œå½“æŸä¸€ä¸ªåˆ†æ”¯æˆåŠŸæ—¶åœæ­¢å‘ä¸‹æ‰§è¡Œã€‚ä¾‹å¦‚ï¼š\nswitch i { case 0: case f(): } // å¦‚æœi = 0 få‡½æ•°æ˜¯ä¸æ‰§è¡Œçš„ package main import ( \u0026#34;fmt\u0026#34; \u0026#34;time\u0026#34; ) func main() { fmt.Println(\u0026#34;When\u0026#39;s Saturday?\u0026#34;) today := time.Now().Weekday() switch time.Saturday { case today + 0: fmt.Println(\u0026#34;Today.\u0026#34;) case today + 1: fmt.Println(\u0026#34;Tomorrow.\u0026#34;) case today + 2: fmt.Println(\u0026#34;In two days.\u0026#34;) default: fmt.Println(\u0026#34;Too far away.\u0026#34;) } } æ— æ¡ä»¶Switch æ— æ¡ä»¶Switchç­‰åŒäº Switch trueã€‚è¿™ç§æ„é€ å¯ä»¥ç”¨æ¥ç¼–å†™é•¿if-then-elseé“¾ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;time\u0026#34; ) func main() { t := time.Now() switch { case t.Hour() \u0026lt; 12: fmt.Println(\u0026#34;Good morning!\u0026#34;) case t.Hour() \u0026lt; 17: fmt.Println(\u0026#34;Good afternoon.\u0026#34;) default: fmt.Println(\u0026#34;Good evening.\u0026#34;) } } Defer deferè¯­å¥å°†ä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œå»¶è¿Ÿåˆ°é”ä½å‡½æ•°è¿”å›æ—¶ã€‚å»¶è¿Ÿè°ƒç”¨çš„å‚æ•°ä¼šç«‹å³æ±‚å€¼ï¼Œä½†åœ¨å‘¨å›´çš„å‡½æ•°è¿”å›ä¹‹å‰ä¸ä¼šæ‰§è¡Œå‡½æ•°è°ƒç”¨ã€‚\npackage main import \u0026#34;fmt\u0026#34; func main() { defer fmt.Println(\u0026#34;world\u0026#34;) fmt.Println(\u0026#34;hello\u0026#34;) } deferçš„å‡½æ•°è°ƒç”¨è¢«æ¨é€åˆ°å †æ ˆä¸­ã€‚å½“å‡½æ•°è¿”å›æ—¶ï¼Œå…¶deferè°ƒç”¨å°†æŒ‰åè¿›å…ˆå‡ºçš„é¡ºåºæ‰§è¡Œã€‚\npackage main import \u0026#34;fmt\u0026#34; func main() { fmt.Println(\u0026#34;counting\u0026#34;) for i := 0; i \u0026lt; 10; i++ { defer fmt.Println(i) } fmt.Println(\u0026#34;done\u0026#34;) } "
},
{
	"uri": "http://blog.911015.com/go-zero/02.html",
	"title": "go-zero å•ä½“åº”ç”¨å®è·µï¼ˆäºŒï¼‰",
	"tags": null,
	"description": "å•ä½“åº”ç”¨å®è·µ",
	"content": "ä¸­é—´ä»¶ä½¿ç”¨ åœ¨go-zeroä¸­ï¼Œä¸­é—´ä»¶å¯ä»¥åˆ†ä¸ºè·¯ç”±ä¸­é—´ä»¶å’Œå…¨å±€ä¸­é—´ä»¶ï¼Œè·¯ç”±ä¸­é—´ä»¶æ˜¯æŒ‡æŸä¸€äº›ç‰¹å®šè·¯ç”±éœ€è¦å®ç°ä¸­é—´ä»¶é€»è¾‘ï¼Œå…¶å’Œjwtç±»ä¼¼ï¼Œæ²¡æœ‰æ”¾åœ¨jwt:xxxä¸‹çš„è·¯ç”±ä¸ä¼šä½¿ç”¨ä¸­é—´ä»¶åŠŸèƒ½ï¼Œ è€Œå…¨å±€ä¸­é—´ä»¶çš„æœåŠ¡èŒƒå›´åˆ™æ˜¯æ•´ä¸ªæœåŠ¡ã€‚\nè·¯ç”±ä¸­é—´ä»¶ 1ã€ç¼–è¾‘ api æ–‡ä»¶ userlogin/userlogin.api ç”Ÿå‘½æ¥å£éœ€è¦æ·»åŠ çš„ä¸­é—´ä»¶ï¼Œå¤šä¸ªä¸­é—´ä»¶ç”¨é€—å·åˆ†éš”\n@server( middleware : Tagging,Version ) service userlogin-api { @handler Tags get /api/tags returns (TagResponse) } 2ã€goctl api å‘½ä»¤é‡æ–°æ‰§è¡Œ ç”Ÿæˆmiddleware æ–‡ä»¶\nuserlogin/internal/middleware/taggingmiddleware.go userlogin/internal/middleware/versionmiddleware.go å¯ä»¥çœ‹åˆ°è·¯ç”±æ–‡ä»¶ä¸­userlogin/internal/handler/routes.go æ–°å¢äº†ä¸€ä¸‹ä»£ç \nserver.AddRoutes( rest.WithMiddlewares( []rest.Middleware{serverCtx.Tagging, serverCtx.Version}, []rest.Route{ { Method: http.MethodGet, Path: \u0026#34;/api/tags\u0026#34;, Handler: TagsHandler(serverCtx), }, }..., ), ) 3ã€ æ–‡ä»¶ä¸­æ·»åŠ ä¸­é—´ä»¶ä¾èµ– userlogin/internal/svc/servicecontext.go\ntype ServiceContext struct { Config config.Config Tagging rest.Middleware Version rest.Middleware UserModel user.UserModel } func NewServiceContext(c config.Config) *ServiceContext { conn := sqlx.NewMysql(c.Mysql.DataSource) return \u0026amp;ServiceContext{ Config: c, UserModel: user.NewUserModel(conn, c.CacheRedis), Tagging: middleware.NewTaggingMiddleware().Handle, Version: middleware.NewVersionMiddleware().Handle, } } 4ã€å¯åŠ¨æµ‹è¯•\nhttp://127.0.0.1:8000/api/tags { \u0026ldquo;tag\u0026rdquo;: \u0026ldquo;tagV111\u0026ndash;v1.1.0\u0026rdquo; }\nå…¨å±€ä¸­é—´ä»¶ userlogin/userlogin.go\nflag.Parse() var c config.Config conf.MustLoad(*configFile, \u0026amp;c) logx.MustSetup(c.LogConf) server := rest.MustNewServer(c.RestConf) defer server.Stop() // å…¨å±€ä¸­é—´ä»¶ server.Use(func(next http.HandlerFunc) http.HandlerFunc { return func(writer http.ResponseWriter, request *http.Request) { logx.Info(\u0026#34;global middleware\u0026#34;) next(writer, request) } }) ctx := svc.NewServiceContext(c) handler.RegisterHandlers(server, ctx) fmt.Printf(\u0026#34;Starting server at %s:%d...\\n\u0026#34;, c.Host, c.Port) server.Start() é“¾è·¯è¿½è¸ª go-zero æ¡†æ¶å·²å®ç°äº†é“¾è·¯è¿½è¸ªï¼Œå¹¶ä¸”Jaegerï¼Œ Zipkin è¿™ä¸¤ç§é“¾è·¯è¿½è¸ªä¸ŠæŠ¥å·¥å…·ï¼Œåªè¦ç®€å•é…ç½®å°±å®ç°é“¾è·¯è¿½è¸ªã€‚\n1ã€ç¼–è¾‘é…ç½®æ–‡ä»¶ å¢åŠ jaegeré…ç½®\nTelemetry: Name: user.api Endpoint: http://jaeger:14268/api/traces Sampler: 1.0 Batcher: jaeger 2ã€userlogin/internal/config/config.go å¢åŠ ç›¸åº”çš„æ˜ å°„\ntype Config struct { Telemetry trace.Config } 3ã€å¯åŠ¨æµ‹è¯• è®¿é—® jaeger UIç•Œé¢ http://127.0.0.1:5000/search é”™è¯¯å¤„ç† åœ¨ä¸šåŠ¡ä¸­è¿˜ä¼šå®šä¹‰ä¸€äº›ä¸šåŠ¡æ€§é”™è¯¯ï¼Œå¸¸ç”¨åšæ³•éƒ½æ˜¯é€šè¿‡ codeã€msg ä¸¤ä¸ªå­—æ®µæ¥è¿›è¡Œä¸šåŠ¡å¤„ç†ç»“æœæè¿°\nè‡ªå®šä¹‰é”™è¯¯ userlogin/common/errorx/baseerror.go package errorx const defaultCode = 1001 const DBErrorCode = 5001 type CodeError struct { Code int `json:\u0026#34;code\u0026#34;` Msg string `json:\u0026#34;msg\u0026#34;` } type CodeErrorResponse struct { Code int `json:\u0026#34;code\u0026#34;` Msg string `json:\u0026#34;msg\u0026#34;` } func NewCodeError(code int, msg string) error { return \u0026amp;CodeError{Code: code, Msg: msg} } func NewDefaultError(msg string) error { return NewCodeError(defaultCode, msg) } func (e *CodeError) Error() string { return e.Msg } func (e *CodeError) Data() *CodeErrorResponse { return \u0026amp;CodeErrorResponse{ Code: e.Code, Msg: e.Msg, } } 2ã€ä¸šåŠ¡é€»è¾‘ä»£ç ä¸­æ›¿æ¢ä¸ºè‡ªå®šä¹‰é”™è¯¯ userlogin/internal/logic/loginlogic.go\nif err != nil { if err == user.ErrNotFound { return nil, errorx.NewDefaultError(\u0026#34;ç”¨æˆ·ä¸å­˜åœ¨\u0026#34;) } return nil, errorx.NewCodeError(errorx.DBErrorCode, err.Error()) } 3ã€å¼€å¯è‡ªå®šä¹‰é”™è¯¯ userlogin/userlogin.go\nhttpx.SetErrorHandler(func(err error) (int, interface{}) { switch e := err.(type) { case *errorx.CodeError: return http.StatusOK, e.Data() default: return http.StatusInternalServerError, nil } }) 4ã€å¯åŠ¨æµ‹è¯•\n# curl -i -X POST http://127.0.0.1:8000/api/login -H \u0026#39;Content-Type: application/json\u0026#39; -d \u0026#39;{\u0026#34;email\u0026#34;:\u0026#34;notfound@gmail.com\u0026#34;,\u0026#34;password\u0026#34;:\u0026#34;****\u0026#34;}\u0026#39; HTTP/1.1 200 OK Content-Type: application/json; charset=utf-8 Traceparent: 00-d004fc85afc1bcb7f4cf6218de12e518-5eed79e06803e434-01 Date: Mon, 25 Jul 2022 14:07:02 GMT Content-Length: 37 {\u0026#34;code\u0026#34;:1001,\u0026#34;msg\u0026#34;:\u0026#34;ç”¨æˆ·ä¸å­˜åœ¨\u0026#34;} è‡ªå®šä¹‰è®¤è¯é”™è¯¯\ncurl -i -X GET \u0026lsquo;http://127.0.0.1:8000/api/userinfo\u0026rsquo;\nHTTP/1.1 401 Unauthorized Traceparent: 00-f1a3a6dee278d0aa8604c5eab2c276a3-f4a8de7774b93cf4-01 Date: Mon, 25 Jul 2022 14:11:32 GMT Content-Length: 0 ä¿®æ”¹ä»£ç  userlogin/userlogin.go\nunauthorized := rest.WithUnauthorizedCallback(func(w http.ResponseWriter, r *http.Request, err error) { httpx.WriteJson(w, http.StatusOK, errorx.NewCodeError(http.StatusUnauthorized, err.Error())) }) server := rest.MustNewServer(c.RestConf, unauthorized) æµ‹è¯•\nHTTP/1.1 200 OK Content-Type: application/json; charset=utf-8 Traceparent: 00-f136c8b772b717f394871d447c2ad0af-400e2c6cd45ab383-01 Date: Mon, 25 Jul 2022 14:09:46 GMT Content-Length: 48 {\u0026#34;code\u0026#34;:401,\u0026#34;msg\u0026#34;:\u0026#34;no token present in request\u0026#34;} "
},
{
	"uri": "http://blog.911015.com/grpc/",
	"title": "gRPC å¿«é€Ÿä½“éªŒ",
	"tags": null,
	"description": "gRPC æ˜¯ Google å¼€å‘çš„ä¸€æ¬¾é«˜æ€§èƒ½ã€å¼€æºçš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰æ¡†æ¶ã€‚å®ƒä½¿ç”¨ Protocol Buffers ä½œä¸ºæ¥å£å®šä¹‰è¯­è¨€ï¼ˆIDLï¼‰ï¼Œå¯ä»¥åœ¨å¤šç§ç¼–ç¨‹è¯­è¨€å’Œå¹³å°ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚",
	"content": "\rgRPCç®€ä»‹\rgRPC æ˜¯ Google å¼€å‘çš„ä¸€æ¬¾é«˜æ€§èƒ½ã€å¼€æºçš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰æ¡†æ¶ã€‚å®ƒä½¿ç”¨ Protocol Buffers ä½œä¸ºæ¥å£å®šä¹‰è¯­è¨€ï¼ˆIDLï¼‰ï¼Œå¯ä»¥åœ¨å¤šç§ç¼–ç¨‹è¯­è¨€å’Œå¹³å°ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚\ngRPC æä¾›äº†å¼ºç±»å‹ã€é«˜æ•ˆã€è·¨è¯­è¨€çš„æœåŠ¡å®šä¹‰å’Œé€šä¿¡åè®®ï¼Œå¹¶æ”¯æŒå¤šç§è´Ÿè½½ç±»å‹ï¼ŒåŒ…æ‹¬ protobufã€JSON å’Œ XMLã€‚gRPC å¯ä»¥ä½¿ç”¨ HTTP/2 åè®®è¿›è¡ŒåŒå‘æµå¼ä¼ è¾“ï¼Œå…·æœ‰è¾ƒä½çš„ç½‘ç»œå»¶è¿Ÿå’Œå¸¦å®½æ¶ˆè€—ï¼Œéå¸¸é€‚åˆäºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¾®æœåŠ¡æ¶æ„ã€‚\ngRPC æ”¯æŒå››ç§æœåŠ¡æ¨¡å¼ï¼šå•é¡¹è¯·æ±‚å’Œå“åº”ã€æœåŠ¡å™¨æµã€å®¢æˆ·ç«¯æµå’ŒåŒå‘æµï¼Œå¯ä»¥æ»¡è¶³ä¸åŒçš„ä¸šåŠ¡éœ€æ±‚ã€‚åŒæ—¶ï¼ŒgRPC è¿˜æä¾›äº†å¤šç§å®‰å…¨æœºåˆ¶ï¼ŒåŒ…æ‹¬åŸºäº TLS çš„èº«ä»½éªŒè¯å’Œæˆæƒï¼Œä»¥åŠåŸºäº SSL/TLS çš„è¿æ¥åŠ å¯†å’Œæ•°æ®ä¿æŠ¤ã€‚\ngRPC çš„ä¼˜ç‚¹åŒ…æ‹¬ï¼š\né«˜æ•ˆæ€§ï¼šgRPC ä½¿ç”¨äºŒè¿›åˆ¶ç¼–ç å’Œå‹ç¼©æŠ€æœ¯ï¼Œæ¯”æ–‡æœ¬æ ¼å¼æ›´é«˜æ•ˆã€‚ å¯æ‰©å±•æ€§ï¼šgRPC çš„ IDL å’Œå¤šç§ API ç‰ˆæœ¬æ§åˆ¶æ–¹å¼ï¼Œä½¿å…¶æ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚ è·¨è¯­è¨€æ€§ï¼šgRPC æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€å’Œå¹³å°ä¹‹é—´çš„é€šä¿¡ï¼ŒåŒ…æ‹¬ Javaã€Goã€Python ç­‰è¯­è¨€ã€‚ æ˜“ç”¨æ€§ï¼šgRPC å¯ä»¥ä¸ç°æœ‰çš„å·¥å…·å’Œç”Ÿæ€ç³»ç»Ÿé›†æˆï¼Œå¦‚ Kubernetesã€Prometheusã€Jaeger ç­‰ã€‚ ä¸€ã€Hello World äºŒã€Streaming RPC ä¸‰ã€æ‹¦æˆªå™¨ä¸Metadata å››ã€æœåŠ¡æ³¨å†Œä¸å‘ç° äº”ã€gRPC-Gateway å…­ã€è¯ä¹¦éªŒè¯ "
},
{
	"uri": "http://blog.911015.com/grpc/02.html",
	"title": "äºŒã€Streaming RPC",
	"tags": null,
	"description": "gRPC æ˜¯ Google å¼€å‘çš„ä¸€æ¬¾é«˜æ€§èƒ½ã€å¼€æºçš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰æ¡†æ¶ã€‚å®ƒä½¿ç”¨ Protocol Buffers ä½œä¸ºæ¥å£å®šä¹‰è¯­è¨€ï¼ˆIDLï¼‰ï¼Œå¯ä»¥åœ¨å¤šç§ç¼–ç¨‹è¯­è¨€å’Œå¹³å°ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚",
	"content": "gRPCè°ƒç”¨æ–¹å¼ åœ¨gRPCä¸­ï¼Œä¸€å…±åŒ…å«å››ç§è°ƒç”¨æ–¹å¼ã€‚\nUnary RPC:ä¸€å…ƒRPC Server-side streaming RPC: æœåŠ¡ç«¯æµå¼RPC Client-side streaming RPC: å®¢æˆ·ç«¯æµå¼RPC Bidirectional streaming RPC: åŒå‘æµå¼RPC Streaming RPC streaming RPC é€‚ç”¨äºå¤§æ•°æ®åŒ…åœºæ™¯ï¼Œå¯ä»¥è¿›è¡Œå®æ—¶äº¤äº’ï¼›\n**æœåŠ¡ç«¯æµå¼RPC **ï¼šå®¢æˆ·ç«¯å‘èµ·ä¸€æ¬¡æ™®é€šçš„RPCè¯·æ±‚ï¼ŒæœåŠ¡ç«¯é€šè¿‡æµå¼å“åº”å¤šæ¬¡å‘é€æ•°æ®é›†ï¼Œå®¢æˆ·ç«¯Recvæ¥æ”¶æ•°æ®é›† å®¢æˆ·ç«¯æµå¼RPCï¼šå®¢æˆ·ç«¯å‘èµ·å¤šæ¬¡è¯·æ±‚ç»™æœåŠ¡ç«¯ï¼Œè€ŒæœåŠ¡ç«¯ä»…å“åº”å®¢æˆ·ç«¯ä¸€æ¬¡ åŒå‘æµå¼RPC: ç”±å®¢æˆ·ç«¯ä»¥æµå¼è¯·æ±‚æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯åŒæ ·ä»¥æµå¼å“åº”å®¢æˆ·ç«¯ã€‚\nä»£ç å®ç° 1ã€protoæ–‡ä»¶ï¼šåˆ›å»ºprotoæ–‡ä»¶å®šä¹‰ä¸‰ç§æµæ¨¡å¼æœåŠ¡ï¼Œæ‰§è¡Œprotocå‘½ä»¤ç¼–è¯‘ä»£ç ï¼›\nsyntax = \u0026#34;proto3\u0026#34;; package pb; option go_package = \u0026#34;pb/;pb\u0026#34;; message Reply { string type = 1; string value = 2; } message Request { string type = 1; string value = 2; } service Streaming { rpc ServerStream (Request) returns (stream Reply); rpc ClientStream (stream Request) returns (Reply); rpc Bidirectional (stream Request) returns (stream Reply); } 2ã€serverï¼š å®¢æˆ·ç«¯æµæ¨¡å¼ä¸‹ æœåŠ¡ç«¯æ‰‹åˆ° io._EOFæ—¶æœåŠ¡ç«¯éœ€è¦é€šè¿‡ _stream.SendAndClose å‘å®¢æˆ·ç«¯è¿”å›ï¼›å®¢æˆ·ç«¯ stream.CloseAndRecv ä¸ä¹‹å¯¹åº”\nvar port string func init() { flag.StringVar(\u0026amp;port, \u0026#34;p\u0026#34;, \u0026#34;8000\u0026#34;, \u0026#34;å¯åŠ¨ç«¯å£å·\u0026#34;) flag.Parse() } type StreamServer struct { pb.UnimplementedStreamingServer } func (ss StreamServer) ServerStream(in *pb.Request, stream pb.Streaming_ServerStreamServer) error { for i := 0; i \u0026lt; 20; i++ { err := stream.Send(\u0026amp;pb.Reply{Type: \u0026#34;Server-Side stream\u0026#34;, Value: fmt.Sprintf(\u0026#34;val:%d\u0026#34;, i)}) if err != nil { return err } } return nil } func (ss StreamServer) ClientStream(stream pb.Streaming_ClientStreamServer) error { for { recv, err := stream.Recv() if err == io.EOF { return stream.SendAndClose(\u0026amp;pb.Reply{ Type: \u0026#34;Client-Side stream\u0026#34;, Value: \u0026#34;close\u0026#34;, }) } if err != nil { return err } log.Printf(\u0026#34;%v\u0026#34;, recv) } } func (ss StreamServer) Bidirectional(stream pb.Streaming_BidirectionalServer) error { i := 0 for { _ = stream.Send(\u0026amp;pb.Reply{Type: \u0026#34;Bidirectional stream\u0026#34;, Value: fmt.Sprintf(\u0026#34;val:%d\u0026#34;, i)}) recv, err := stream.Recv() if err == io.EOF { return nil } if err != nil { return err } log.Printf(\u0026#34;%v\u0026#34;, recv) i++ } } func main() { server := grpc.NewServer() pb.RegisterStreamingServer(server, \u0026amp;StreamServer{}) reflection.Register(server) lis, _ := net.Listen(\u0026#34;tcp\u0026#34;, \u0026#34;:\u0026#34;+port) _ = server.Serve(lis) } 3ã€client ï¼šæœªæ–¹ä¾¿åé¢æµ‹è¯•ï¼Œé€šè¿‡å‚æ•° -m å¯åŠ¨ä¸åŒæµæ¨¡å¼å®¢æˆ·ç«¯ï¼›\nvar port string var method int func init() { flag.StringVar(\u0026amp;port, \u0026#34;p\u0026#34;, \u0026#34;8000\u0026#34;, \u0026#34;å¯åŠ¨ç«¯å£å·\u0026#34;) flag.IntVar(\u0026amp;method, \u0026#34;m\u0026#34;, 1, \u0026#34;æµæ¨¡å¼\u0026#34;) flag.Parse() } func ServerStreamClient(client pb.StreamingClient, r *pb.Request) error { stream, err := client.ServerStream(context.Background(), r) if err != nil { return err } for { recv, err := stream.Recv() if err == io.EOF { break } if err != nil { return err } log.Printf(\u0026#34;response:%v\u0026#34;, recv) } return nil } func ClientStreamClient(client pb.StreamingClient) error { stream, err := client.ClientStream(context.Background()) if err != nil { return err } for i := 0; i \u0026lt; 10; i++ { _ = stream.Send(\u0026amp;pb.Request{Type: \u0026#34;ClientStreamClient\u0026#34;, Value: fmt.Sprintf(\u0026#34;val:%d\u0026#34;, i)}) } recv, err := stream.CloseAndRecv() log.Printf(\u0026#34;resp :%v\u0026#34;, recv) return err } func Bidirectional(client pb.StreamingClient) error { stream, err := client.Bidirectional(context.Background()) if err != nil { return err } for i := 0; i \u0026lt; 10; i++ { _ = stream.Send(\u0026amp;pb.Request{Type: \u0026#34;BidirectionalClient\u0026#34;, Value: fmt.Sprintf(\u0026#34;val:%d\u0026#34;, i)}) recv, err := stream.Recv() if err == io.EOF { break } if err != nil { log.Printf(\u0026#34;resp :%v\u0026#34;, err) return err } log.Printf(\u0026#34;resp :%v\u0026#34;, recv) } return stream.CloseSend() } func main() { conn, _ := grpc.Dial(\u0026#34;:\u0026#34;+port, grpc.WithTransportCredentials(insecure.NewCredentials())) defer conn.Close() log.Printf(\u0026#34;mothod %d\u0026#34;, method) client := pb.NewStreamingClient(conn) switch method { case 1: _ = ServerStreamClient(client, \u0026amp;pb.Request{Type: \u0026#34;ss client\u0026#34;, Value: \u0026#34;ok\u0026#34;}) case 2: _ = ClientStreamClient(client) case 3: _ = Bidirectional(client) default: log.Fatal(\u0026#34;error method\u0026#34;) } } 4ã€å¯åŠ¨æµ‹è¯•ï¼›\ngo run server.go go run client.go -m 1/2/3\n"
},
{
	"uri": "http://blog.911015.com/wx/2023052201.html",
	"title": "ç¼–ç¨‹è¯­è¨€è¿™ä¹ˆå¤šæ€ä¹ˆé€‰ï¼Ÿ",
	"tags": null,
	"description": "ç¼–ç¨‹è¯­è¨€è¿™ä¹ˆå¤šæ€ä¹ˆé€‰ï¼ŸGoã€Javaã€PHPï¼ŒPythonè¿˜æ˜¯C++ï¼Ÿ",
	"content": "Go Goæ˜¯ä¸€ç§ç”±Googleå¼€å‘çš„ç¼–ç¨‹è¯­è¨€ã€‚å…¶ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š\né™æ€ç±»å‹ï¼šåœ¨ç¼–è¯‘æ—¶æ£€æŸ¥ç±»å‹ï¼Œå¯ä»¥æä¾›æ›´å¥½çš„ä»£ç å¥å£®æ€§ã€‚ å¹¶å‘ç¼–ç¨‹ï¼šæ”¯æŒGoroutinesï¼ˆè½»é‡çº§çº¿ç¨‹ï¼‰å’ŒChannelsï¼ˆé€šä¿¡æœºåˆ¶ï¼‰ï¼Œä½¿å¹¶å‘ç¼–ç¨‹å˜å¾—ç®€å•ã€‚ å†…å­˜ç®¡ç†ï¼šGoå…·æœ‰è‡ªåŠ¨åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œå¯ä»¥å‡å°‘å†…å­˜æ³„æ¼é—®é¢˜ã€‚ Goçš„ç”Ÿæ€ç³»ç»Ÿæ­£åœ¨å¿«é€Ÿå¢é•¿ï¼Œæœ‰è®¸å¤šä¼˜ç§€çš„å¼€æºåº“å’Œæ¡†æ¶å¯ä¾›ä½¿ç”¨ã€‚å®ƒéå¸¸é€‚åˆäº‘åŸç”Ÿåº”ç”¨çš„å¼€å‘ï¼Œå¦‚Dockerç­‰ã€‚è¾ƒæ–°çš„Webæ¡†æ¶ï¼Œä¾‹å¦‚Ginå’ŒEchoï¼Œä¹Ÿä½¿Goåœ¨Webå¼€å‘ä¸­è¶Šæ¥è¶Šå—æ¬¢è¿ã€‚ åœ¨æ€§èƒ½æ–¹é¢ï¼ŒGoæ¯”åŠ¨æ€è¯­è¨€æ›´å¿«ï¼Œä½†æ¯”C++ç­‰ç³»ç»Ÿçº§è¯­è¨€ç¨æ…¢ã€‚ Goçš„å­¦ä¹ æ›²çº¿è¾ƒä¸ºå¹³ç¨³ï¼Œå¯¹äºå…·æœ‰å…¶ä»–ç¼–ç¨‹ç»éªŒçš„å¼€å‘äººå‘˜æ¥è¯´ç›¸å¯¹å®¹æ˜“ä¸Šæ‰‹ã€‚\nPHP PHPæ˜¯ä¸€ç§å¹¿æ³›ç”¨äºWebå¼€å‘çš„åŠ¨æ€ç±»å‹è¯­è¨€ã€‚å…¶ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š\nåŠ¨æ€ç±»å‹ï¼šæ— éœ€åœ¨ç¼–å†™ä»£ç æ—¶æŒ‡å®šå˜é‡ç±»å‹ï¼Œä½¿ä»£ç æ›´åŠ çµæ´»ã€‚ ä¾¿äºWebå¼€å‘ï¼šPHPå…·æœ‰è®¸å¤šä¸Webç›¸å…³çš„å‡½æ•°å’Œåº“ï¼Œå¦‚æ–‡ä»¶ä¸Šä¼ ã€ä¼šè¯ç®¡ç†ç­‰ã€‚ é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼šæ”¯æŒé¢å‘å¯¹è±¡ç¼–ç¨‹é£æ ¼ï¼Œä½¿ä»£ç æ›´åŠ æ˜“äºç»´æŠ¤ã€‚ PHPç”Ÿæ€ç³»ç»Ÿéå¸¸ä¸°å¯Œï¼ŒåŒ…æ‹¬è®¸å¤šæµè¡Œçš„Webæ¡†æ¶å’ŒCMSå¹³å°ï¼Œä¾‹å¦‚Laravelå’ŒWordPressã€‚è¿™äº›å·¥å…·å¯ä½¿Webå¼€å‘æ›´åŠ é«˜æ•ˆã€‚ åœ¨æ€§èƒ½æ–¹é¢ï¼ŒPHPæ¯”é™æ€è¯­è¨€æ…¢ï¼Œä½†å¯ä»¥é€šè¿‡å„ç§ç¼“å­˜æŠ€æœ¯ï¼ˆå¦‚APCå’ŒOPcacheï¼‰æé«˜æ€§èƒ½ã€‚ PHPå­¦ä¹ æ›²çº¿ç›¸å¯¹è¾ƒä½ï¼Œå› æ­¤éå¸¸é€‚åˆåˆå­¦è€…æˆ–é‚£äº›æƒ³å¿«é€Ÿå…¥é—¨Webå¼€å‘çš„äººé€‰æ‹©ã€‚\nJava Javaæ˜¯ä¸€ç§å¼ºç±»å‹çš„è·¨å¹³å°è¯­è¨€ï¼Œå¹¶ä¸”å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\né™æ€ç±»å‹ï¼šåœ¨ç¼–è¯‘æ—¶æ£€æŸ¥ç±»å‹ï¼Œä½¿ä»£ç æ›´åŠ å¥å£®ã€‚ è·¨å¹³å°ï¼šJavaå­—èŠ‚ç å¯ä»¥åœ¨ä»»ä½•æ”¯æŒJavaçš„æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œã€‚ é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼šæ”¯æŒç±»å’Œå¯¹è±¡ï¼Œä½¿å¾—ä»£ç æ›´æ˜“äºç»´æŠ¤ã€‚ Javaçš„ç”Ÿæ€ç³»ç»Ÿéå¸¸ä¸°å¯Œï¼Œæ¶µç›–äº†ä¼—å¤šä¼ä¸šåº”ç”¨ç¨‹åºæ¡†æ¶ï¼Œä¾‹å¦‚Springå’ŒHibernateã€‚è¿™äº›æ¡†æ¶å¯å¸®åŠ©å¼€å‘äººå‘˜å¿«é€Ÿæ„å»ºç¨³å¥çš„ä¼ä¸šçº§åº”ç”¨ç¨‹åºã€‚ åœ¨æ€§èƒ½æ–¹é¢ï¼ŒJavaæ¯”åŠ¨æ€è¯­è¨€å¿«ï¼Œä½†å¯åŠ¨æ—¶é—´è¾ƒé•¿ã€‚ ç›¸å¯¹äºå…¶ä»–è¯­è¨€ï¼ŒJavaçš„å­¦ä¹ æ›²çº¿ä¸­ç­‰ã€‚å› ä¸ºå®ƒæœ‰ä¸€ä¸ªå¼ºå¤§çš„åº“å’Œæ¡†æ¶ç”Ÿæ€ç³»ç»Ÿï¼Œéœ€è¦ä¸€äº›æ—¶é—´æ¥ç†è§£å’ŒæŒæ¡è¿™äº›æŠ€æœ¯ã€‚\nPython Pythonæ˜¯ä¸€ç§åŠ¨æ€ç±»å‹è¯­è¨€ï¼Œç”¨äºå„ç§ç”¨é€”ï¼ŒåŒ…æ‹¬æ•°æ®åˆ†æã€æœºå™¨å­¦ä¹ ã€Webå¼€å‘ç­‰ã€‚å…¶ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š\nåŠ¨æ€ç±»å‹ï¼šæ— éœ€åœ¨ç¼–å†™ä»£ç æ—¶æŒ‡å®šå˜é‡ç±»å‹ï¼Œä½¿ä»£ç æ›´çµæ´»ã€‚ ç®€æ´æ˜“è¯»ï¼šPythonå…·æœ‰æ¸…æ™°ç®€å•çš„è¯­æ³•ï¼Œä½¿å¾—ä»£ç æ˜“äºé˜…è¯»å’Œç¼–å†™ã€‚ è‡ªç„¶è¯­è¨€å¤„ç†å’Œæ•°æ®ç§‘å­¦ï¼šPythonå…·æœ‰ä¸°å¯Œçš„åº“å’Œå·¥å…·ï¼Œå¦‚NumPyã€pandaså’Œscikit-learnç­‰ï¼Œä½¿å¾—æ•°æ®ç§‘å­¦å·¥ä½œå˜å¾—æ›´åŠ å®¹æ˜“ã€‚ Pythonç”Ÿæ€ç³»ç»Ÿéå¸¸ä¸°å¯Œï¼ŒåŒ…æ‹¬è®¸å¤šç§‘å­¦è®¡ç®—åº“å’ŒWebæ¡†æ¶ï¼Œä¾‹å¦‚Djangoå’ŒFlaskã€‚Pythonä¹Ÿæ˜¯è‡ªç„¶è¯­è¨€å¤„ç†é¢†åŸŸçš„é¦–é€‰è¯­è¨€ã€‚ åœ¨æ€§èƒ½æ–¹é¢ï¼ŒPythonæ¯”é™æ€è¯­è¨€æ…¢ï¼Œä½†å¯¹äºæ™®é€šè®¡ç®—ä»»åŠ¡è€Œè¨€ï¼Œå…¶ä»£ç å®ç°æ›´ä¸ºå®¹æ˜“ã€‚å¦å¤–ï¼ŒPythonå¯ä»¥é€šè¿‡JITç¼–è¯‘å™¨ï¼ˆå¦‚PyPyï¼‰æé«˜æ€§èƒ½ã€‚ ç›¸å¯¹äºå…¶ä»–è¯­è¨€ï¼ŒPythonçš„å­¦ä¹ æ›²çº¿è¾ƒæµ…ï¼Œé€‚åˆåˆå­¦è€…æˆ–é‚£äº›å¸Œæœ›å¿«é€Ÿå…¥é—¨æ•°æ®ç§‘å­¦æˆ–Webå¼€å‘çš„äººé€‰æ‹©ã€‚\nC++ C++æ˜¯ä¸€ç§é™æ€ç±»å‹è¯­è¨€ï¼Œå¸¸ç”¨äºåº•å±‚ç¼–ç¨‹å’Œé«˜æ€§èƒ½è®¡ç®—ä»»åŠ¡ã€‚å…¶ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š\né™æ€ç±»å‹ï¼šåœ¨ç¼–è¯‘æ—¶æ£€æŸ¥ç±»å‹ï¼Œå¯ä»¥æä¾›æ›´å¥½çš„ä»£ç å¥å£®æ€§ã€‚ é«˜æ€§èƒ½ï¼šC++å¯ä»¥ç›´æ¥æ“ä½œç¡¬ä»¶ï¼Œå› æ­¤å¯ä»¥å®ç°éå¸¸é«˜æ•ˆçš„ä»£ç ã€‚ åº•å±‚ç¼–ç¨‹ï¼šC++æ²¡æœ‰è‡ªåŠ¨åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œä½¿å¾—ç¨‹åºå‘˜éœ€è¦æ‰‹åŠ¨ç®¡ç†å†…å­˜ï¼Œå¹¶ä¸”å¯ä»¥è¿›è¡ŒæŒ‡é’ˆæ“ä½œç­‰åº•å±‚ç¼–ç¨‹æŠ€æœ¯ã€‚ C++çš„ç”Ÿæ€ç³»ç»Ÿè™½ç„¶ä¸å¦‚å…¶ä»–è¯­è¨€é‚£ä¹ˆä¸°å¯Œï¼Œä½†å®ƒæœ‰è®¸å¤šä¼˜ç§€çš„åŸºç¡€è®¾æ–½åº“å’Œè·¨å¹³å°å·¥å…·ï¼Œå¦‚Boostå’ŒQtç­‰ã€‚ åœ¨æ€§èƒ½æ–¹é¢ï¼ŒC++æ˜¯æœ€å¿«çš„è¯­è¨€ä¹‹ä¸€ï¼Œå› ä¸ºå®ƒå¯ä»¥ç›´æ¥æ“ä½œç¡¬ä»¶å’Œå†…å­˜ã€‚ ç›¸å¯¹äºå…¶ä»–è¯­è¨€ï¼ŒC++çš„å­¦ä¹ æ›²çº¿è¾ƒé™¡å³­ã€‚å®ƒéœ€è¦æ›´å¤šçš„æ—¶é—´å’Œç²¾åŠ›æ¥æŒæ¡ï¼Œå› ä¸ºå®ƒå…·æœ‰åº•å±‚ç¼–ç¨‹æŠ€æœ¯å’Œå¤æ‚çš„å†…å­˜ç®¡ç†è¦æ±‚ã€‚\nè¯­è¨€ è¯­è¨€ç‰¹æ€§ ç”Ÿæ€ç³»ç»Ÿ æ€§èƒ½ å­¦ä¹ éš¾åº¦ Go é™æ€ç±»å‹ã€å¹¶å‘ç¼–ç¨‹ã€å†…å­˜ç®¡ç† å¿«é€Ÿå¢é•¿çš„å¼€æºåº“å’Œæ¡†æ¶ï¼Œé€‚åˆäº‘åŸç”Ÿåº”ç”¨ æ¯”åŠ¨æ€è¯­è¨€å¿«ï¼Œä½†æ¯”C++ç­‰ç³»ç»Ÿçº§è¯­è¨€ç¨æ…¢ ä¸­ç­‰ PHP åŠ¨æ€ç±»å‹ã€ä¾¿äºWebå¼€å‘ã€é¢å‘å¯¹è±¡ç¼–ç¨‹ ä¸°å¯Œçš„Webç”Ÿæ€ç³»ç»Ÿï¼Œå¦‚WordPress æ¯”é™æ€è¯­è¨€æ…¢ï¼Œä½†å¯ä»¥é€šè¿‡å„ç§ç¼“å­˜æŠ€æœ¯æé«˜æ€§èƒ½ ç®€å• Java é™æ€ç±»å‹ã€è·¨å¹³å°ã€é¢å‘å¯¹è±¡ç¼–ç¨‹ ä¸°å¯Œçš„ä¼ä¸šåº”ç”¨ç”Ÿæ€ç³»ç»Ÿï¼Œå¦‚Springã€Hibernateç­‰ æ¯”åŠ¨æ€è¯­è¨€å¿«ï¼Œä½†å¯åŠ¨æ—¶é—´è¾ƒé•¿ ä¸­ç­‰ Python åŠ¨æ€ç±»å‹ã€ç®€æ´æ˜“è¯»ã€è‡ªç„¶è¯­è¨€å¤„ç†ã€æ•°æ®ç§‘å­¦ ä¸°å¯Œçš„ç§‘å­¦è®¡ç®—ç”Ÿæ€ç³»ç»Ÿï¼Œå¦‚NumPyã€pandasã€scikit-learnç­‰ æ¯”é™æ€è¯­è¨€æ…¢ï¼Œä½†æ™®é€šè®¡ç®—ä»»åŠ¡æ˜“äºå®ç° ç®€å• C++ é™æ€ç±»å‹ã€é«˜æ€§èƒ½ã€åº•å±‚ç¼–ç¨‹ ä¸°å¯Œçš„åŸºç¡€è®¾æ–½ç”Ÿæ€ç³»ç»Ÿï¼Œå¦‚Boost æœ€æ¥è¿‘ç¡¬ä»¶çš„è¯­è¨€ä¹‹ä¸€ï¼Œæ€§èƒ½æœ€é«˜ å›°éš¾ æ€»ä½“è€Œè¨€ï¼ŒGoã€Javaå’ŒPythonæ˜¯æ¯”è¾ƒæµè¡Œçš„è¯­è¨€ï¼Œå®ƒä»¬éƒ½æœ‰ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿï¼Œå¹¶ä¸”ç›¸å¯¹äºC++æ¥è¯´å­¦ä¹ éš¾åº¦è¾ƒä½ã€‚å…¶ä¸­ï¼ŒGoå…·æœ‰å‡ºè‰²çš„å¹¶å‘ç¼–ç¨‹èƒ½åŠ›ï¼Œé€‚åˆäº‘åŸç”Ÿåº”ç”¨å¼€å‘ï¼›Javaæ˜¯ä¼ä¸šçº§å¼€å‘çš„é¦–é€‰è¯­è¨€ï¼›Pythonåˆ™åœ¨æ•°æ®ç§‘å­¦å’Œè‡ªç„¶è¯­è¨€å¤„ç†æ–¹é¢å¾—åˆ°å¹¿æ³›åº”ç”¨ã€‚PHPåˆ™æ˜¯ä¸€ç§ç®€å•æ˜“å­¦çš„Webå¼€å‘è¯­è¨€ï¼Œè€ŒC++åˆ™é€‚åˆåº•å±‚ç¼–ç¨‹å’Œé«˜æ€§èƒ½è®¡ç®—ä»»åŠ¡ã€‚å½“ç„¶ï¼Œé€‰æ‹©å“ªç§è¯­è¨€å–å†³äºå…·ä½“çš„éœ€æ±‚å’Œé¡¹ç›®è¦æ±‚ã€‚\n"
},
{
	"uri": "http://blog.911015.com/beginner/03.html",
	"title": "03-åˆ›å»ºGoé¡¹ç›®",
	"tags": null,
	"description": "",
	"content": "è¿™æ˜¯æ•™ç¨‹çš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œä»‹ç»äº†Goè¯­è¨€çš„ä¸€äº›åŸºæœ¬åŠŸèƒ½ã€‚å¦‚æœä½ åˆšå¼€å§‹ä½¿ç”¨Goè¯­è¨€ï¼Œä¸€å®šè¦çœ‹ä¸€ä¸‹æ•™ç¨‹ï¼šGoå…¥é—¨ï¼Œå®ƒä»‹ç»äº†Goå‘½ä»¤ã€Goæ¨¡å—å’Œéå¸¸ç®€å•çš„Goä»£ç ã€‚ åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å°†åˆ›å»ºä¸¤ä¸ªæ¨¡å—ã€‚ç¬¬ä¸€ç§æ˜¯ç”¨æ¥è¢«å…¶ä»–åº“æˆ–åº”ç”¨å¯¼å…¥ã€‚ç¬¬äºŒä¸ªæ¨¡å—åœ¨ç¨‹åºä¸­è°ƒç”¨ç¬¬ä¸€ä¸ªæ¨¡å—çš„æ–¹æ³•ã€‚ æœ¬æ•™ç¨‹åŒ…æ‹¬ä¸ƒä¸ªå°çš„éƒ¨åˆ†ï¼š\nåˆ›å»ºä¸€ä¸ªæ¨¡å—ï¼šç¼–å†™ä¸€ä¸ªå°æ¨¡å—ï¼Œå…¶ä¸­åŒ…å«å¯ä»¥ä»å¦ä¸€ä¸ªæ¨¡å—è°ƒç”¨çš„å‡½æ•°ã€‚ ä»å¦ä¸€ä¸ªæ¨¡å—è°ƒç”¨æ‚¨çš„ä»£ç ï¼šå¯¼å…¥å¹¶ä½¿ç”¨æ‚¨çš„æ–°æ¨¡å—ã€‚ è¿”å›å¹¶å¤„ç†é”™è¯¯ï¼šæ·»åŠ ç®€å•çš„é”™è¯¯å¤„ç†ã€‚ è¿”å›ä¸€ä¸ªéšæœºçš„é—®å€™è¯­ï¼šå¤„ç†åˆ‡ç‰‡ï¼ˆslicesï¼‰ä¸­çš„æ•°æ®ï¼ˆslicesï¼šGoçš„åŠ¨æ€å¤§å°æ•°ç»„ï¼‰ã€‚ ä¸ºå¤šä¸ªäººè¿”å›é—®å€™è¯­ï¼šå°†é”®/å€¼å¯¹å­˜å‚¨åœ¨æ˜ å°„ï¼ˆmapï¼‰ä¸­ã€‚ æ·»åŠ æµ‹è¯•ï¼šä½¿ç”¨Goå†…ç½®çš„å•å…ƒæµ‹è¯•åŠŸèƒ½æ¥æµ‹è¯•ä»£ç ã€‚ ç¼–è¯‘å¹¶å®‰è£…åº”ç”¨ç¨‹åºï¼šåœ¨æœ¬åœ°ç¼–è¯‘å¹¶å®‰è£…ã€‚ å‰æœŸå‡†å¤‡ ä¸€äº›ç¼–ç¨‹ç»éªŒã€‚è¿™é‡Œçš„ä»£ç éå¸¸ç®€å•ï¼Œä½†äº†è§£å‡½æ•°ã€å¾ªç¯å’Œæ•°ç»„ä¼šæœ‰æ‰€å¸®åŠ©ã€‚ ç”¨äºç¼–è¾‘ä»£ç çš„å·¥å…·ã€‚ ä¸€ç§å‘½ä»¤ç»ˆç«¯ã€‚Goåœ¨Linuxå’ŒMacä¸Šä»¥åŠWindowsä¸­çš„PowerShellæˆ–cmdä¸Šä½¿ç”¨ä»»ä½•ç»ˆç«¯éƒ½èƒ½å¾ˆå¥½åœ°å·¥ä½œã€‚ å¼€å§‹åˆ›å»ºæ¨¡å— é¦–å…ˆåˆ›å»ºGoæ¨¡å—ã€‚æˆ‘ä»¬é€šå¸¸ä¼šæŠŠä¸€äº›åŒ…å«åŒä¸€ç±»åŠŸèƒ½å‡½æ•°çš„åŒ…æ”¾åœ¨åŒä¸€æ¨¡å—ä¸­ï¼Œä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥åˆ›å»ºæ¨¡å—ï¼Œæ¨¡å—çš„åŒ…å…·æœ‰è¿›è¡Œè´¢åŠ¡åˆ†æçš„åŠŸèƒ½ï¼Œä»¥ä¾¿å…¶ä»–ç¼–å†™è´¢åŠ¡åº”ç”¨ç¨‹åºçš„äººå¯ä»¥ä½¿ç”¨æ‚¨çš„ä»£ç ã€‚æœ‰å…³å¼€å‘æ¨¡å—çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…å¼€å‘å’Œå‘å¸ƒæ¨¡å—.ã€‚ Goè¯­è¨€ä¸­ ä»£ç ï¼ŒåŒ…(package)ï¼Œæ¨¡å—ï¼ˆmoduleï¼‰ä¹‹é—´çš„å…³ç³»æ˜¯:ä»£ç ç»„æˆåŒ…ï¼ŒåŒ…ç»„æˆæ¨¡å—ã€‚æ‚¨å¼€å‘çš„æ¨¡å—éœ€è¦æŒ‡å®šè¿è¡Œä»£ç æ‰€éœ€çš„ä¾èµ–é¡¹ï¼ŒåŒ…æ‹¬Goç‰ˆæœ¬åŠå…¶æ‰€éœ€çš„å…¶ä»–æ¨¡å—ã€‚ å½“æ‚¨åœ¨æ¨¡å—ä¸­æ·»åŠ æˆ–æ”¹è¿›åŠŸèƒ½æ—¶ï¼Œæ‚¨å°†å‘å¸ƒæ¨¡å—çš„æ–°ç‰ˆæœ¬ã€‚ç¼–å†™è°ƒç”¨è¿™ä¸ªæ¨¡å—çš„å¼€å‘äººå‘˜å¯ä»¥å¯¼å…¥æ–°ç‰ˆæœ¬æ¨¡å—ï¼Œå¹¶åœ¨å°†å…¶ä¸Šçº¿ä¹‹å‰ä½¿ç”¨æ–°ç‰ˆæœ¬è¿›è¡Œæµ‹è¯•ã€‚\næ‰“å¼€å‘½ä»¤è¡Œï¼Œcdåˆ°homeç›®å½•ï¼ˆæˆ–å…¶ä»–å­˜æ”¾ä»£ç çš„ç›®å½•ï¼‰ æ–°å»ºç›®å½• greetings ç”¨æ¥å­˜æ”¾Goä»£ç  ä½¿ç”¨ go mod init å‘½ä»¤åˆå§‹åŒ–ä¸€ä¸ªmodule æ‰§è¡Œ go mod init å‘½ä»¤ï¼›æœ¬ä¾‹ä¸­æˆ‘ä»¬ç”¨ example.com/greetingsï¼›å¦‚æœæ‚¨å‘å¸ƒæ¨¡å—ï¼Œè¿™å¿…é¡»æ˜¯Goå·¥å…·å¯ä»¥ä¸‹è½½æ¨¡å—çš„è·¯å¾„ï¼Œé‚£å°±æ˜¯æœ¬æ¨¡å—ä»£ç ä»“åº“çš„è·¯å¾„ï¼ˆä¾‹å¦‚ï¼šgithub.com/exampleï¼‰ï¼›\ngo mod init example.com/greetings # go: creating new go.mod: module example.com/greetings go mod init å‘½ä»¤åˆ›å»ºä¸€ä¸ªgo.modæ–‡ä»¶æ¥è·Ÿè¸ªä»£ç çš„ä¾èµ–å…³ç³»ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¯¥æ–‡ä»¶åªåŒ…æ‹¬æ¨¡å—çš„åç§°å’Œä»£ç æ”¯æŒçš„Goç‰ˆæœ¬ã€‚ä½†å½“ä½ æ·»åŠ ä¾èµ–é¡¹æ—¶ï¼Œgo.modæ–‡ä»¶ä¼šåˆ—å‡ºä½ çš„ä»£ç æ‰€ä¾èµ–çš„ç‰ˆæœ¬ã€‚è¿™å¯ä»¥ä¿æŒæ„å»ºçš„å¯å¤åˆ¶æ€§ï¼Œå¹¶è®©ä½ ç›´æ¥æ§åˆ¶è¦ä½¿ç”¨çš„æ¨¡å—ç‰ˆæœ¬ã€‚\nåœ¨ç¼–è¾‘å™¨ä¸­æ–°å»º greetings.go æ–‡ä»¶ åœ¨greetings.goæ–‡ä»¶ä¸­å†™å…¥ä¸€ä¸‹ä»£ç å¹¶ä¿å­˜ package greetings import \u0026#34;fmt\u0026#34; // Hello returns a greeting for the named person. func Hello(name string) string { // Return a greeting that embeds the name in a message. message := fmt.Sprintf(\u0026#34;Hi, %v. Welcome!\u0026#34;, name) return message } è¿™æ˜¯æ‚¨çš„æ¨¡å—çš„ç¬¬ä¸€ä¸ªä»£ç ã€‚å®ƒä¼šå‘ä»»ä½•è¦æ±‚è°ƒç”¨è€…è¿”å›é—®å€™è¯­ã€‚ä¸‹ä¸€æ­¥æˆ‘ä»¬å°†è°ƒç”¨æ­¤å‡½æ•°ã€‚ ä»£ç è§£è¯»ï¼š\nå£°æ˜greetingsåŒ…å­˜æ”¾ç›¸å…³çš„åŠŸèƒ½æ–¹æ³• å®ç°HelloåŠŸèƒ½æ¥è¿”å›é—®å€™è¯­ æ­¤å‡½æ•°æ¥å—å­—ç¬¦ä¸²ç±»å‹çš„nameå‚æ•°ã€‚è¯¥å‡½æ•°è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚åœ¨Goä¸­ï¼Œåç§°ä»¥å¤§å†™å­—æ¯å¼€å¤´çš„å‡½æ•°å¯ä»¥ç”±ä¸åœ¨åŒä¸€ä¸ªåŒ…ä¸­çš„å‡½æ•°è°ƒç”¨ã€‚è¿™åœ¨Goä¸­è¢«ç§°ä¸ºå¯¼å‡ºåç§°ã€‚ å£°æ˜ä¸€ä¸ªç”¨äºä¿å­˜é—®å€™è¯­çš„messageå˜é‡ åœ¨Goä¸­ï¼Œ:= è¿ç®—ç¬¦æ˜¯åœ¨ä¸€è¡Œä¸­å£°æ˜å’Œåˆå§‹åŒ–å˜é‡çš„å¿«æ·æ–¹å¼ï¼ˆGoä½¿ç”¨å³ä¾§çš„å€¼æ¥ç¡®å®šå˜é‡çš„ç±»å‹ï¼‰ã€‚å®Œæ•´æ ¼å¼å¯ä»¥è¿™æ ·å†™ï¼š\nvar message string message = fmt.Sprintf(\u0026#34;Hi, %v. Welcome!\u0026#34;, name) ä½¿ç”¨fmtåŒ…çš„Sprintfå‡½æ•°å¯ä»¥åˆ›å»ºä¸€æ¡é—®å€™æ¶ˆæ¯ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ ¼å¼å­—ç¬¦ä¸²ï¼ŒSprintfå°†nameå‚æ•°çš„å€¼æ›¿æ¢%vã€‚æ’å…¥nameå‚æ•°çš„å€¼å°†å®Œæˆé—®å€™è¯­ å°†æ ¼å¼åŒ–çš„é—®å€™è¯­æ–‡æœ¬è¿”å›ç»™è°ƒç”¨è€… åœ¨ä¸‹ä¸€æ­¥ä¸­ï¼Œæ‚¨å°†ä»å¦ä¸€ä¸ªæ¨¡å—è°ƒç”¨æ­¤å‡½æ•°ã€‚\nè°ƒç”¨æ¨¡å— åœ¨ä¸Šä¸€èŠ‚ä¸­ï¼Œæ‚¨åˆ›å»ºäº†ä¸€ä¸ªgreetingsæ¨¡å—ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæ‚¨å°†ç¼–å†™ä»£ç æ¥è°ƒç”¨åˆšåˆšç¼–å†™çš„æ¨¡å—ä¸­çš„Helloå‡½æ•°ã€‚æ‚¨å°†ç¼–å†™å¯æ‰§è¡Œçš„ä»£ç ï¼Œå¹¶è°ƒç”¨é—®å€™è¯­æ¨¡å—ä¸­çš„ä»£ç ã€‚\nåˆ›å»ºä¸€ä¸ªhelloç›®å½•ç¼–å†™è°ƒç”¨ä»£ç  åˆ›å»ºæ­¤ç›®å½•åï¼Œæ‚¨åº”è¯¥åœ¨å±‚æ¬¡ç»“æ„çš„åŒä¸€çº§åˆ«åŒæ—¶æ‹¥æœ‰helloå’Œgreetingsç›®å½•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\u0026lt;home\u0026gt;/ |-- greetings/ |-- hello/ ä¸ºå³å°†ç¼–å†™çš„ä»£ç å¯ç”¨ä¾èµ–é¡¹è·Ÿè¸ªã€‚ go mod init example.com/hello åœ¨æ–‡æœ¬ç¼–è¾‘å™¨çš„helloç›®å½•ä¸­ï¼Œåˆ›å»ºhello.goæ–‡ä»¶ã€‚ ç¼–å†™ä»£ç è°ƒç”¨Helloå‡½æ•°ï¼Œæ‰“å°è¿”å›å€¼ã€‚ package main import ( \u0026#34;fmt\u0026#34; \u0026#34;example.com/greetings\u0026#34; ) func main() { // Get a greeting message and print it. message := greetings.Hello(\u0026#34;Gladys\u0026#34;) fmt.Println(message) } ä»£ç è§£è¯»ï¼š\nå£°æ˜ä¸€ä¸ªä¸»ç¨‹åºåŒ…(main)ã€‚åœ¨Goä¸­ï¼Œä½œä¸ºåº”ç”¨ç¨‹åºæ‰§è¡Œçš„ä»£ç å¿…é¡»åœ¨ä¸»åŒ…ä¸­ã€‚ å¯¼å…¥ä¸¤ä¸ªåŒ…ï¼šexample.com/greetingså’ŒfmtåŒ…ã€‚è¿™ä½¿æ‚¨çš„ä»£ç å¯ä»¥è®¿é—®è¿™äº›åŒ…ä¸­çš„å‡½æ•°ã€‚å¯¼å…¥example.com/greetingsï¼ˆåŒ…å«åœ¨æ‚¨ä¹‹å‰åˆ›å»ºçš„æ¨¡å—ä¸­çš„åŒ…ï¼‰å¯ä»¥è®¿é—®Helloå‡½æ•°ã€‚æ‚¨è¿˜å¯ä»¥å¯¼å…¥fmtï¼Œå®ƒå…·æœ‰å¤„ç†è¾“å…¥å’Œè¾“å‡ºæ–‡æœ¬çš„åŠŸèƒ½ï¼ˆä¾‹å¦‚å°†æ–‡æœ¬æ‰“å°åˆ°æ§åˆ¶å°ï¼‰ã€‚ é€šè¿‡è°ƒç”¨greetingsåŒ…çš„Hello æ–¹æ³•æ¥è·å¾—è¿”å›å€¼ã€‚ ç¼–è¾‘example.com/helloæ¨¡å—ä»¥ä½¿ç”¨æœ¬åœ°example.com/hellos åœ¨ç”Ÿäº§ç¯å¢ƒï¼ŒGoå·¥å…·å¯ä»¥ä»è¿œç¨‹ä»£ç ä»“åº“ä¸­ä¸‹è½½å¾—åˆ°example.com/hellesæ¨¡å—ã€‚ç›®å‰ï¼Œç”±äºæ‚¨å°šæœªå‘å¸ƒè¯¥æ¨¡å—ï¼Œæ‚¨éœ€è¦è°ƒæ•´example.com/helloæ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œä»¥ä¾¿å®ƒå¯ä»¥åœ¨æœ¬åœ°æ‰¾åˆ°example.com/hellosä»£ç ã€‚ ç”¨go mod editå‘½ä»¤ç¼–è¾‘example.com/helloæ¨¡å—ï¼Œå°†goå·¥å…·ä»å…¶æ¨¡å—è·¯å¾„ï¼ˆæ¨¡å—ä¸åœ¨çš„åœ°æ–¹ï¼‰é‡å®šå‘åˆ°æœ¬åœ°ç›®å½•ï¼ˆæ¨¡å—æ‰€åœ¨çš„åœ°æ–¹ï¼‰ã€‚ aã€åœ¨helloç›®å½•ä¸­çš„å‘½ä»¤æç¤ºç¬¦ä¸‹ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤\ngo mod edit -replace example.com/greetings=../greetings è¯¥å‘½ä»¤æŒ‡å®šå°†ä¾èµ–example.com/greetingsåº”æ›¿æ¢ä¸º/greetingsã€‚è¿è¡Œè¯¥å‘½ä»¤åï¼Œhelloç›®å½•ä¸­çš„go.modæ–‡ä»¶åº”åŒ…å«ä¸€ä¸ªreplaceæŒ‡ä»¤ï¼š\nmodule example.com/hello go 1.16 replace example.com/greetings =\u0026gt; ../greetings bã€åœ¨helloç›®å½•ä¸­çš„å‘½ä»¤æç¤ºç¬¦ä¸‹ï¼Œè¿è¡Œgo mod tidy å‘½ä»¤æ¥åŒæ­¥example.com/helloæ¨¡å—çš„ä¾èµ–é¡¹ï¼Œæ·»åŠ ä»£ç æ‰€éœ€ä½†å°šæœªåœ¨æ¨¡å—ä¸­åŠ è½½çš„ä¾èµ–é¡¹ã€‚\n$ go mod tidy go: found example.com/greetings in example.com/greetings v0.0.0-00010101000000-000000000000 å‘½ä»¤å®Œæˆåï¼Œexample.com/helloæ¨¡å—çš„go.modæ–‡ä»¶åº”è¯¥å¦‚ä¸‹æ‰€ç¤ºï¼š\nmodule example.com/hello go 1.16 replace example.com/greetings =\u0026gt; ../greetings require example.com/greetings v0.0.0-00010101000000-000000000000 è¯¥å‘½ä»¤åœ¨greetingsç›®å½•ä¸­æ‰¾åˆ°äº†æœ¬åœ°ä»£ç ï¼Œç„¶åæ·»åŠ äº†ä¸€ä¸ªrequireæŒ‡ä»¤ï¼ŒæŒ‡å®šexample.com/helloéœ€è¦example.com/greetingsã€‚hello.goä¸­å¯¼å…¥greetingsåŒ…æ—¶åˆ›å»ºäº†æ­¤ä¾èµ–é¡¹ã€‚ æ¨¡å—è·¯å¾„åé¢çš„æ•°å­—æ˜¯ä¸€ä¸ªä¼ªç‰ˆæœ¬å·,æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ä»£æ›¿ç‰ˆæœ¬å·çš„æ•°å­—ï¼ˆæ¨¡å—å®é™…è¿˜æ²¡æœ‰ï¼‰ã€‚ è¦å¼•ç”¨å·²å‘å¸ƒçš„æ¨¡å—ï¼Œgo.modæ–‡ä»¶é€šå¸¸ä¼šçœç•¥replaceæŒ‡ä»¤ï¼Œå¹¶ä½¿ç”¨æœ«å°¾å¸¦æœ‰æ ‡è®°ç‰ˆæœ¬å·çš„requireæŒ‡ä»¤ã€‚\nrequire example.com/greetings v1.1.0 åœ¨helloç›®å½•ä¸­çš„å‘½ä»¤æç¤ºç¬¦ä¸‹ï¼Œè¿è¡Œä»£ç ä»¥ç¡®è®¤å®ƒæ˜¯å¦å·¥ä½œ $ go run . Hi, Gladys. Welcome! æ­å–œï¼æ‚¨å·²ç»ç¼–å†™äº†ä¸¤ä¸ªåŠŸèƒ½æ¨¡å—ã€‚åœ¨ä¸‹èŠ‚å†…å®¹æ˜¯é”™è¯¯å¤„ç†ã€‚\nè¿”å›å¹¶å¤„ç†é”™è¯¯ å¤„ç†é”™è¯¯æ˜¯å¥å£®ä»£ç çš„ä¸€ä¸ªåŸºæœ¬ç‰¹å¾ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæ‚¨å°†æ·»åŠ ä¸€äº›ä»£ç ï¼Œä»greetings æ¨¡å—è¿”å›ä¸€ä¸ªé”™è¯¯ï¼Œç„¶ååœ¨è°ƒç”¨è€…ä¸­è¿›è¡Œå¤„ç†ã€‚\nåœ¨ greetings/greetings.go ä¸­æ·»åŠ ä»£ç : å¦‚æœä½ ä¸çŸ¥é“è¯¥å‘è°æ‰“æ‹›å‘¼ï¼Œé‚£ä¹ˆå›ç”µæ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚å¦‚æœnameå‚æ•°ä¸ºç©ºï¼Œåˆ™å‘è°ƒç”¨æ–¹è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚\npackage greetings import ( \u0026#34;errors\u0026#34; \u0026#34;fmt\u0026#34; ) // Hello returns a greeting for the named person. func Hello(name string) (string, error) { // If no name was given, return an error with a message. if name == \u0026#34;\u0026#34; { return \u0026#34;\u0026#34;, errors.New(\u0026#34;empty name\u0026#34;) } // If a name was received, return a value that embeds the name // in a greeting message. message := fmt.Sprintf(\u0026#34;Hi, %v. Welcome!\u0026#34;, name) return message, nil } ä»£ç è§£æï¼š\næ›´æ”¹å‡½æ•°ï¼Œä½¿å…¶è¿”å›ä¸¤ä¸ªå€¼ï¼šä¸€ä¸ªstringå’Œä¸€ä¸ªerrorã€‚è°ƒç”¨è€…é€šè¿‡ç¬¬äºŒä¸ªè¿”å›å€¼åˆ¤æ–­æ˜¯å¦å‘ç”Ÿé”™è¯¯ (ä»»ä½•Goå‡½æ•°éƒ½å¯ä»¥è¿”å›å¤šä¸ªå€¼ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… Effective Go.) å¯¼å…¥Goæ ‡å‡†åº“erroråŒ…ï¼Œä½¿ç”¨ errors.New å‡½æ•°ã€‚ æ·»åŠ ifè¯­å¥åˆ¤æ–­æ— æ•ˆè¯·æ±‚ï¼ˆnameä¸ºç©ºï¼‰ï¼Œå¦‚æœè¯·æ±‚æ— æ•ˆåˆ™è¿”å›errorã€‚errors.New å‡½æ•°è¿”å›ä¸€ä¸ªé”™è¯¯ï¼Œå…¶ä¸­åŒ…å«é”™è¯¯æ¶ˆæ¯ã€‚ åœ¨æˆåŠŸè¿”å›ä¸­æ·»åŠ nilï¼ˆè¡¨ç¤ºæ²¡æœ‰é”™è¯¯ï¼‰ä½œä¸ºç¬¬äºŒä¸ªè¿”å›å€¼ã€‚è¿™æ ·ï¼Œè°ƒç”¨è€…å°±å¯ä»¥åˆ¤æ–­å‡½æ•°æ‰§è¡ŒæˆåŠŸäº†ã€‚ åœ¨hello/hello.goæ–‡ä»¶ä¸­ï¼Œå¤„ç†helloå‡½æ•°è¿”å›çš„errorä»¥åŠéerrorå€¼ å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°hello.goã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;log\u0026#34; \u0026#34;example.com/greetings\u0026#34; ) func main() { // Set properties of the predefined Logger, including // the log entry prefix and a flag to disable printing // the time, source file, and line number. log.SetPrefix(\u0026#34;greetings: \u0026#34;) log.SetFlags(0) // Request a greeting message. message, err := greetings.Hello(\u0026#34;\u0026#34;) // If an error was returned, print it to the console and // exit the program. if err != nil { log.Fatal(err) } // If no error was returned, print the returned message // to the console. fmt.Println(message) } ä»£ç è§£æï¼š\nå°†æ—¥å¿—åŒ…é…ç½®ä¸ºåœ¨å…¶æ—¥å¿—æ¶ˆæ¯çš„å¼€å¤´æ‰“å°å‘½ä»¤åï¼ˆâ€œgreetingsï¼šâ€ï¼‰ï¼Œä¸å¸¦æ—¶é—´æˆ³æˆ–æºæ–‡ä»¶ä¿¡æ¯ã€‚ å°†ä¸¤ä¸ªHelloè¿”å›å€¼ï¼ˆåŒ…æ‹¬é”™è¯¯ï¼‰åˆ†é…ç»™å˜é‡ã€‚ å°†Helloå‚æ•°ä»Gladysçš„åç§°æ›´æ”¹ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥æµ‹è¯•é”™è¯¯å¤„ç†ä»£ç ã€‚åˆ¤æ–­ error ä¸ç­‰äº - nilï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ç»§ç»­ä¸‹å»æ˜¯æ²¡æœ‰æ„ä¹‰ã€‚ ä½¿ç”¨æ ‡å‡†åº“çš„logåŒ…ä¸­çš„å‡½æ•°æ¥è¾“å‡ºé”™è¯¯ä¿¡æ¯ã€‚å¦‚æœå‡ºç°é”™è¯¯ï¼Œåˆ™ä½¿ç”¨æ—¥å¿—åŒ…çš„Fatalå‡½æ•°æ‰“å°é”™è¯¯å¹¶åœæ­¢ç¨‹åºã€‚ åœ¨helloç›®å½•çš„å‘½ä»¤è¡Œä¸­ï¼Œè¿è¡Œhello.goä»¥ç¡®è®¤ä»£ç æ˜¯å¦æœ‰æ•ˆ $ go run . # greetings: empty name # exit status 1 è¿™æ˜¯Goä¸­å¸¸è§çš„é”™è¯¯å¤„ç†ï¼šå°†é”™è¯¯ä½œä¸ºå€¼è¿”å›ï¼Œä»¥ä¾¿è°ƒç”¨æ–¹å¯ä»¥æ£€æŸ¥å®ƒã€‚\néšæœºè¿”å›é—®å€™è¯­ åœ¨æœ¬èŠ‚ä¸­ï¼Œæ‚¨å°†æ›´æ”¹ä»£ç ï¼Œä½¿å…¶ä¸å†æ¯æ¬¡è¿”å›ä¸€ä¸ªé—®å€™è¯­ï¼Œè€Œæ˜¯è¿”å›å‡ ä¸ªé¢„å®šä¹‰çš„é—®å€™è¯­æ¶ˆæ¯ä¸­çš„ä¸€ä¸ªã€‚ ä¸ºæ­¤ï¼Œæ‚¨å°†ä½¿ç”¨Goåˆ‡ç‰‡(slice)ã€‚åˆ‡ç‰‡å°±åƒä¸€ä¸ªæ•°ç»„ï¼Œåªæ˜¯å®ƒçš„å¤§å°éšç€æ·»åŠ å’Œåˆ é™¤é¡¹ç›®è€ŒåŠ¨æ€å˜åŒ–ã€‚åˆ‡ç‰‡æ˜¯Goè¯­è¨€æœ€æœ‰ç”¨çš„ç±»å‹ä¹‹ä¸€ã€‚ æ·»åŠ ä¸€ä¸ªslice å­˜æ”¾ä¸‰æ¡é—®å€™æ¶ˆæ¯ï¼Œç„¶åè®©ä»£ç éšæœºè¿”å›å…¶ä¸­ä¸€æ¡æ¶ˆæ¯ã€‚\nåœ¨é—®å€™è¯­/é—®å€™è¯­.goä¸­ï¼Œæ›´æ”¹ä»£ç ï¼Œå¦‚ä¸‹ package greetings import ( \u0026#34;errors\u0026#34; \u0026#34;fmt\u0026#34; \u0026#34;math/rand\u0026#34; \u0026#34;time\u0026#34; ) // Hello returns a greeting for the named person. func Hello(name string) (string, error) { // If no name was given, return an error with a message. if name == \u0026#34;\u0026#34; { return name, errors.New(\u0026#34;empty name\u0026#34;) } // Create a message using a random format. message := fmt.Sprintf(randomFormat(), name) return message, nil } // init sets initial values for variables used in the function. func init() { rand.Seed(time.Now().UnixNano()) } // randomFormat returns one of a set of greeting messages. The returned // message is selected at random. func randomFormat() string { // A slice of message formats. formats := []string{ \u0026#34;Hi, %v. Welcome!\u0026#34;, \u0026#34;Great to see you, %v!\u0026#34;, \u0026#34;Hail, %v! Well met!\u0026#34;, } // Return a randomly selected message format by specifying // a random index for the slice of formats. return formats[rand.Intn(len(formats))] } ä»£ç è§£æï¼š\næ·»åŠ ä¸€ä¸ªrandomFormatå‡½æ•°ï¼Œè¯¥å‡½æ•°å¯ä¸ºé—®å€™è¯­è¿”å›éšæœºé€‰æ‹©çš„æ ¼å¼ã€‚è¯·æ³¨æ„ï¼ŒrandomFormatä»¥å°å†™å­—æ¯å¼€å¤´ï¼Œä½¿å…¶åªèƒ½ç”±è‡ªå·±åŒ…ä¸­çš„ä»£ç è®¿é—®ï¼ˆæ¢å¥è¯è¯´ï¼Œå®ƒä¸å¯¼å‡ºï¼‰ã€‚ åœ¨randomFormatä¸­ï¼Œç”¨ä¸‰ç§æ¶ˆæ¯æ ¼å¼å£°æ˜ä¸€ä¸ªformatsåˆ‡ç‰‡ã€‚åœ¨å£°æ˜åˆ‡ç‰‡æ—¶ï¼Œå¯ä»¥çœç•¥æ‹¬å·ä¸­çš„å¤§å°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š[]stringã€‚è¿™å‘Šè¯‰Goï¼Œç‰‡ä¸‹é¢çš„æ•°ç»„å¤§å°å¯ä»¥åŠ¨æ€æ›´æ”¹ã€‚ ä½¿ç”¨math/randåŒ…ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ï¼Œç”¨äºä»åˆ‡ç‰‡(slice)ä¸­é€‰æ‹©é¡¹ç›®ã€‚ æ·»åŠ ä¸€ä¸ªinitå‡½æ•°ï¼Œç”¨å½“å‰æ—¶é—´ä¸ºrandåŒ…è®¾å®šç§å­ã€‚Goåœ¨åˆå§‹åŒ–å…¨å±€å˜é‡åï¼Œåœ¨ç¨‹åºå¯åŠ¨æ—¶è‡ªåŠ¨æ‰§è¡Œinitå‡½æ•°ã€‚ åœ¨Helloä¸­ï¼Œè°ƒç”¨randomFormatå‡½æ•°æ¥è·å–è¦è¿”å›çš„æ¶ˆæ¯çš„æ ¼å¼ï¼Œç„¶åå°†æ ¼å¼å’Œåç§°å€¼ä¸€èµ·ä½¿ç”¨æ¥åˆ›å»ºæ¶ˆæ¯ã€‚ åƒä»¥å‰ä¸€æ ·è¿”å›æ¶ˆæ¯ï¼ˆæˆ–é”™è¯¯ï¼‰ã€‚ åœ¨hello/hello.goä¸­ï¼Œæ›´æ”¹ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ åªå°†Gladysçš„åå­—ï¼ˆæˆ–è€…å…¶ä»–åå­—ï¼Œå¦‚æœæ‚¨æ„¿æ„çš„è¯ï¼‰ä½œä¸ºå‚æ•°æ·»åŠ åˆ°Hello.goä¸­çš„Helloå‡½æ•°è°ƒç”¨ä¸­ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;log\u0026#34; \u0026#34;example.com/greetings\u0026#34; ) func main() { // Set properties of the predefined Logger, including // the log entry prefix and a flag to disable printing // the time, source file, and line number. log.SetPrefix(\u0026#34;greetings: \u0026#34;) log.SetFlags(0) // Request a greeting message. message, err := greetings.Hello(\u0026#34;Gladys\u0026#34;) // If an error was returned, print it to the console and // exit the program. if err != nil { log.Fatal(err) } // If no error was returned, print the returned message // to the console. fmt.Println(message) } åœ¨helloç›®å½•çš„å‘½ä»¤è¡Œä¸­ï¼Œè¿è¡Œhello.goä»¥ç¡®è®¤ä»£ç æ˜¯å¦æœ‰æ•ˆã€‚å¤šæ¬¡è¿è¡Œå®ƒï¼Œæ³¨æ„é—®å€™è¯­å˜åŒ–ã€‚ $ go run . Great to see you, Gladys! $ go run . Hi, Gladys. Welcome! $ go run . Hail, Gladys! Well met! ä¸ºå¤šäººå›å¤é—®å€™ åœ¨æ‚¨å°†å¯¹æ¨¡å—ä»£ç è¿›è¡Œçš„æœ€åä¸€æ¬¡æ›´æ”¹ä¸­ï¼Œæ‚¨å°†æ·»åŠ å¯¹åœ¨ä¸€ä¸ªè¯·æ±‚ä¸­è·å¾—å¤šäººé—®å€™çš„æ”¯æŒã€‚æ¢å¥è¯è¯´ï¼Œæ‚¨å°†å¤„ç†å¤šå€¼è¾“å…¥ï¼Œç„¶åå°†è¯¥è¾“å…¥ä¸­çš„å€¼ä¸å¤šå€¼è¾“å‡ºé…å¯¹ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæ‚¨éœ€è¦å°†ä¸€ç»„åç§°ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å¯ä»¥ä¸ºæ¯ä¸ªåç§°è¿”å›ä¸€ä¸ªé—®å€™è¯­ã€‚ ä½†æœ‰ä¸€ä¸ªé—®é¢˜ã€‚å°†Helloå‡½æ•°çš„å‚æ•°ä»å•ä¸ªåç§°æ›´æ”¹ä¸ºä¸€ç»„åç§°å°†æ›´æ”¹å‡½æ•°çš„ç­¾åã€‚å¦‚æœæ‚¨å·²ç»å‘å¸ƒäº†example.com/greetingsæ¨¡å—ï¼Œå¹¶ä¸”ç”¨æˆ·å·²ç»ç¼–å†™äº†è°ƒç”¨Helloçš„ä»£ç ï¼Œé‚£ä¹ˆè¿™ç§æ›´æ”¹å°†ç ´åä»–ä»¬çš„ç¨‹åºã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ›´å¥½çš„é€‰æ‹©æ˜¯ç”¨ä¸åŒçš„åç§°ç¼–å†™ä¸€ä¸ªæ–°å‡½æ•°ã€‚æ–°åŠŸèƒ½å°†é‡‡ç”¨å¤šä¸ªå‚æ•°ã€‚è¿™ä¿ç•™äº†æ—§åŠŸèƒ½ä»¥å®ç°å‘åå…¼å®¹æ€§ã€‚\nåœ¨greetings/greetings.goä¸­ï¼Œæ›´æ”¹ä»£å¦‚ä¸‹æ‰€ç¤ºã€‚ package greetings import ( \u0026#34;errors\u0026#34; \u0026#34;fmt\u0026#34; \u0026#34;math/rand\u0026#34; \u0026#34;time\u0026#34; ) // Hello returns a greeting for the named person. func Hello(name string) (string, error) { // If no name was given, return an error with a message. if name == \u0026#34;\u0026#34; { return name, errors.New(\u0026#34;empty name\u0026#34;) } // Create a message using a random format. message := fmt.Sprintf(randomFormat(), name) return message, nil } // Hellos returns a map that associates each of the named people // with a greeting message. func Hellos(names []string) (map[string]string, error) { // A map to associate names with messages. messages := make(map[string]string) // Loop through the received slice of names, calling // the Hello function to get a message for each name. for _, name := range names { message, err := Hello(name) if err != nil { return nil, err } // In the map, associate the retrieved message with // the name. messages[name] = message } return messages, nil } // Init sets initial values for variables used in the function. func init() { rand.Seed(time.Now().UnixNano()) } // randomFormat returns one of a set of greeting messages. The returned // message is selected at random. func randomFormat() string { // A slice of message formats. formats := []string{ \u0026#34;Hi, %v. Welcome!\u0026#34;, \u0026#34;Great to see you, %v!\u0026#34;, \u0026#34;Hail, %v! Well met!\u0026#34;, } // Return one of the message formats selected at random. return formats[rand.Intn(len(formats))] } ä»£ç è§£æ:\næ·»åŠ ä¸€ä¸ªHelloså‡½æ•°ï¼Œè¯¥å‡½æ•°çš„å‚æ•°æ˜¯åç§°sliceï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„åç§°ã€‚æ­¤å¤–ï¼Œæ‚¨è¿˜å¯ä»¥å°†å…¶è¿”å›ç±»å‹ä»å­—ç¬¦ä¸²æ›´æ”¹ä¸ºmapï¼Œä»¥ä¾¿è¿”å›åç§°ä¸é—®å€™è¯­çš„æ˜ å°„ã€‚ è®©æ–°çš„Helloså‡½æ•°è°ƒç”¨ç°æœ‰çš„Helloå‡½æ•°ã€‚è¿™æœ‰åŠ©äºå‡å°‘é‡å¤ï¼ŒåŒæ—¶ä¿ç•™ä¸¤ä¸ªåŠŸèƒ½ã€‚ åˆ›å»ºä¸€ä¸ªmap å˜é‡messagesï¼Œå°†æ¯ä¸ªæ¥æ”¶åˆ°çš„åç§°ï¼ˆä½œä¸ºkeyï¼‰ä¸ç”Ÿæˆçš„æ¶ˆæ¯ï¼ˆä½œä¸ºValueï¼‰å…³è”èµ·æ¥ã€‚Goä¸­å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­æ³•åˆå§‹åŒ–æ˜ å°„ï¼šmakeï¼ˆmap[key-type]value-typeï¼‰ã€‚æ‚¨å¯ä»¥ä½¿ç”¨Helloså‡½æ•°å°†æ­¤æ˜ å°„è¿”å›ç»™è°ƒç”¨è€…ã€‚ å¾ªç¯æŸ¥çœ‹å‡½æ•°æ¥æ”¶åˆ°çš„namesï¼Œæ£€æŸ¥æ¯ä¸ªnameæ˜¯å¦éƒ½æœ‰éç©ºå€¼ï¼Œç„¶åå°†æ¶ˆæ¯ä¸æ¯ä¸ªåç§°å…³è”èµ·æ¥ã€‚åœ¨è¿™ä¸ªforå¾ªç¯ä¸­ï¼Œrangeè¿”å›ä¸¤ä¸ªå€¼ï¼šå¾ªç¯ä¸­å½“å‰é¡¹çš„ç´¢å¼•å’Œé¡¹å€¼çš„å‰¯æœ¬ã€‚ç´¢å¼•å€¼ç”¨ä¸åˆ°ï¼Œç”¨Go blankæ ‡è¯†ç¬¦ï¼ˆä¸‹åˆ’çº¿ï¼‰æ¥å¿½ç•¥å®ƒã€‚ åœ¨hello/hello.goè°ƒç”¨ä»£ç ä¸­ï¼Œä¼ å…¥names åˆ‡ç‰‡ï¼Œç„¶åæ‰“å°è¿”å›çš„name/messageæ˜ å°„çš„å†…å®¹ã€‚ åœ¨hello.goä¸­ï¼Œæ›´æ”¹ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;log\u0026#34; \u0026#34;example.com/greetings\u0026#34; ) func main() { // Set properties of the predefined Logger, including // the log entry prefix and a flag to disable printing // the time, source file, and line number. log.SetPrefix(\u0026#34;greetings: \u0026#34;) log.SetFlags(0) // A slice of names. names := []string{\u0026#34;Gladys\u0026#34;, \u0026#34;Samantha\u0026#34;, \u0026#34;Darrin\u0026#34;} // Request greeting messages for the names. messages, err := greetings.Hellos(names) if err != nil { log.Fatal(err) } // If no error was returned, print the returned map of // messages to the console. fmt.Println(messages) } ä»£ç è§£æ:\nåˆ›å»ºä¸€ä¸ªnames åˆ‡ç‰‡ï¼ŒåŒ…å«ä¸‰ä¸ªnameã€‚ å°†nameså˜é‡ä½œä¸ºå‚æ•°ä¼ é€’ç»™Helloså‡½æ•°ã€‚ åœ¨å‘½ä»¤è¡Œä¸­ï¼Œåˆ‡æ¢åˆ°åŒ…å«hello/hello.goçš„ç›®å½•ï¼Œç„¶åä½¿ç”¨go runç¡®è®¤ä»£ç æ˜¯å¦æœ‰æ•ˆã€‚ è¾“å‡ºåº”è¯¥æ˜¯å°†nameä¸messageå…³è”èµ·æ¥çš„mapï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n$ go run . map[Darrin:Hail, Darrin! Well met! Gladys:Hi, Gladys. Welcome! Samantha:Hail, Samantha! Well met!] æœ¬ä¸»é¢˜ä»‹ç»äº†ç”¨äºè¡¨ç¤ºåç§°/å€¼å¯¹çš„æ˜ å°„ã€‚å®ƒè¿˜å¼•å…¥äº†é€šè¿‡ä¸ºæ¨¡å—ä¸­çš„æ–°åŠŸèƒ½æˆ–æ›´æ”¹çš„åŠŸèƒ½å®ç°æ–°åŠŸèƒ½æ¥ä¿æŒå‘åå…¼å®¹æ€§çš„æƒ³æ³•ã€‚\næ·»åŠ æµ‹è¯• ç°åœ¨æ‚¨å·²ç»å°†ä»£ç æ”¾åˆ°äº†ä¸€ä¸ªå›ºå®šçš„ä½ç½®ï¼Œæ·»åŠ ä¸€ä¸ªæµ‹è¯•ã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­æµ‹è¯•ä»£ç å¯èƒ½ä¼šæš´éœ²å‡ºåœ¨æ‚¨è¿›è¡Œæ›´æ”¹æ—¶å‡ºç°çš„é”™è¯¯ã€‚åœ¨æœ¬ç« èŠ‚ä¸­ï¼Œæ‚¨å°†ä¸º Hello å‡½æ•°æ·»åŠ ä¸€ä¸ªæµ‹è¯•ã€‚ Go å†…ç½®çš„å¯¹å•å…ƒæµ‹è¯•çš„æ”¯æŒä½¿å¾—åœ¨è¿›è¡Œæµ‹è¯•æ—¶æ›´å®¹æ˜“ã€‚å…·ä½“æ¥è¯´ï¼Œä½¿ç”¨å‘½åçº¦å®šã€Go çš„ testing åŒ…å’Œ Go test å‘½ä»¤ï¼Œæ‚¨å¯ä»¥å¿«é€Ÿç¼–å†™å’Œæ‰§è¡Œæµ‹è¯•ã€‚\nåœ¨ greetings ç›®å½•ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º greetings_test.go çš„æ–‡ä»¶ã€‚ ä»¥_test.go ç»“å°¾çš„æ–‡ä»¶åå‘Šè¯‰ go test å‘½ä»¤æ­¤æ–‡ä»¶åŒ…å«æµ‹è¯•å‡½æ•°ã€‚\nåœ¨ greeting_test.go ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç å¹¶ä¿å­˜æ–‡ä»¶ã€‚ package greetings import ( \u0026#34;testing\u0026#34; \u0026#34;regexp\u0026#34; ) // TestHelloName calls greetings.Hello with a name, checking // for a valid return value. func TestHelloName(t *testing.T) { name := \u0026#34;Gladys\u0026#34; want := regexp.MustCompile(`\\b`+name+`\\b`) msg, err := Hello(\u0026#34;Gladys\u0026#34;) if !want.MatchString(msg) || err != nil { t.Fatalf(`Hello(\u0026#34;Gladys\u0026#34;) = %q, %v, want match for %#q, nil`, msg, err, want) } } // TestHelloEmpty calls greetings.Hello with an empty string, // checking for an error. func TestHelloEmpty(t *testing.T) { msg, err := Hello(\u0026#34;\u0026#34;) if msg != \u0026#34;\u0026#34; || err == nil { t.Fatalf(`Hello(\u0026#34;\u0026#34;) = %q, %v, want \u0026#34;\u0026#34;, error`, msg, err) } } ä»£ç è§£æ:\nåœ¨ä¸æ‚¨æ­£åœ¨æµ‹è¯•çš„ä»£ç ç›¸åŒçš„åŒ…ä¸­å®ç°æµ‹è¯•å‡½æ•°ã€‚ åˆ›å»ºä¸¤ä¸ªæµ‹è¯•å‡½æ•°æ¥æµ‹è¯• greetings.Hello å‡½æ•°ã€‚æµ‹è¯•å‡½æ•°åç§°çš„å½¢å¼ä¸º TestNameï¼Œå…¶ä¸­ Name è¡¨ç¤ºç‰¹å®šæµ‹è¯•çš„å†…å®¹ã€‚æ­¤å¤–ï¼Œæµ‹è¯•å‡½æ•°å°†æŒ‡å‘æµ‹è¯•åŒ…çš„ testing.T ç±»å‹çš„æŒ‡é’ˆä½œä¸ºå‚æ•°ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ­¤å‚æ•°çš„æ–¹æ³•ä»æµ‹è¯•ä¸­è¿›è¡ŒæŠ¥å‘Šå’Œæ—¥å¿—è®°å½•ã€‚ æ‰§è¡Œä¸¤æ¬¡æµ‹è¯• TestHelloName è°ƒç”¨ Hello å‡½æ•°ï¼Œä¼ é€’ä¸€ä¸ªåç§°å€¼ï¼Œè¯¥å‡½æ•°åº”è¯¥èƒ½å¤Ÿä½¿ç”¨è¯¥åç§°å€¼è¿”å›æœ‰æ•ˆçš„å“åº”æ¶ˆæ¯ã€‚å¦‚æœè°ƒç”¨è¿”å›é”™è¯¯æˆ–æ„å¤–å“åº”æ¶ˆæ¯ï¼ˆå…¶ä¸­ä¸åŒ…æ‹¬æ‚¨ä¼ å…¥çš„åç§°ï¼‰ï¼Œåˆ™ä½¿ç”¨ t å‚æ•°çš„ Fatalf æ–¹æ³•å°†æ¶ˆæ¯æ‰“å°åˆ°æ§åˆ¶å°å¹¶ç»“æŸæ‰§è¡Œã€‚ TestHelloEmpty ä½¿ç”¨ä¸€ä¸ªç©ºå­—ç¬¦ä¸²è°ƒç”¨ Hello å‡½æ•°ã€‚æ­¤æµ‹è¯•æ—¨åœ¨ç¡®è®¤æ‚¨çš„é”™è¯¯å¤„ç†æ˜¯å¦æœ‰æ•ˆã€‚å¦‚æœè°ƒç”¨è¿”å›éç©ºå­—ç¬¦ä¸²æˆ–æ²¡æœ‰é”™è¯¯ï¼Œåˆ™ä½¿ç”¨ t å‚æ•°çš„ Fatalf æ–¹æ³•å°†æ¶ˆæ¯æ‰“å°åˆ°æ§åˆ¶å°å¹¶ç»“æŸæ‰§è¡Œã€‚ åœ¨é—®å€™ç›®å½•çš„å‘½ä»¤è¡Œä¸­ï¼Œè¿è¡Œ go test å‘½ä»¤æ¥æ‰§è¡Œæµ‹è¯•ã€‚ go test å‘½ä»¤åœ¨æµ‹è¯•æ–‡ä»¶ï¼ˆåç§°ä»¥\\test.go ç»“å°¾ï¼‰ä¸­æ‰§è¡Œæµ‹è¯•å‡½æ•°ï¼ˆåç§°ä»¥ test å¼€å¤´ï¼‰ã€‚æ‚¨å¯ä»¥æ·»åŠ -v æ ‡å¿—æ¥è·å¾—è¯¦ç»†çš„è¾“å‡ºï¼Œå…¶ä¸­åˆ—å‡ºäº†æ‰€æœ‰æµ‹è¯•åŠå…¶ç»“æœã€‚ $ go test PASS ok example.com/greetings 0.364s $ go test -v === RUN TestHelloName --- PASS: TestHelloName (0.00s) === RUN TestHelloEmpty --- PASS: TestHelloEmpty (0.00s) PASS ok example.com/greetings 0.372s æ‰“æ–­ greetings.Hello å‡½æ•°ç”¨äºæŸ¥çœ‹æœªé€šè¿‡çš„æµ‹è¯•ã€‚ TestHelloName æµ‹è¯•å‡½æ•°æ£€æŸ¥æ‚¨æŒ‡å®šä¸º Hello å‡½æ•°å‚æ•°çš„åç§°çš„è¿”å›å€¼ã€‚è¦æŸ¥çœ‹å¤±è´¥çš„æµ‹è¯•ç»“æœï¼Œè¯·æ›´æ”¹ greetings.Hello å‡½æ•°ï¼Œä½¿å…¶ä¸å†åŒ…å«åç§°ã€‚ åœ¨ greetings/greetings.go ä¸­ï¼Œç²˜è´´ä»¥ä¸‹ä»£ç æ¥ä»£æ›¿ Hello å‡½æ•°ã€‚è¯·æ³¨æ„ï¼Œé«˜äº®æ˜¾ç¤ºçš„è¡Œä¼šæ›´æ”¹å‡½æ•°è¿”å›çš„å€¼ï¼Œå°±å¥½åƒåç§°å‚æ•°è¢«æ„å¤–åˆ é™¤äº†ä¸€æ ·ã€‚ // Hello returns a greeting for the named person. func Hello(name string) (string, error) { // If no name was given, return an error with a message. if name == \u0026#34;\u0026#34; { return name, errors.New(\u0026#34;empty name\u0026#34;) } // Create a message using a random format. // message := fmt.Sprintf(randomFormat(), name) message := fmt.Sprint(randomFormat()) return message, nil } åœ¨ greetings ç›®å½•çš„å‘½ä»¤è¡Œä¸­ï¼Œè¿è¡Œ go test æ¥æ‰§è¡Œæµ‹è¯•ã€‚ è¿™ä¸€æ¬¡ï¼Œåœ¨æ²¡æœ‰-v æ ‡å¿—çš„æƒ…å†µä¸‹è¿è¡Œ go testã€‚è¾“å‡ºå°†åªåŒ…æ‹¬å¤±è´¥æµ‹è¯•çš„ç»“æœï¼Œå½“æ‚¨æœ‰å¾ˆå¤šæµ‹è¯•æ—¶ï¼Œè¿™å¯èƒ½å¾ˆæœ‰ç”¨ã€‚TestHelloName æµ‹è¯•åº”è¯¥å¤±è´¥â€”â€” TestHelloEmpty ä»ç„¶é€šè¿‡ã€‚ $ go test --- FAIL: TestHelloName (0.00s) greetings_test.go:15: Hello(\u0026#34;Gladys\u0026#34;) = \u0026#34;Hail, %v! Well met!\u0026#34;, \u0026lt;nil\u0026gt;, want match for `\\bGladys\\b`, nil FAIL exit status 1 FAIL example.com/greetings 0.182s ç¼–è¯‘å¹¶å®‰è£…åº”ç”¨ åœ¨æœ€åä¸€ä¸ªä¸»é¢˜ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å‡ ä¸ªæ–°çš„ go å‘½ä»¤ã€‚è™½ç„¶ go run å‘½ä»¤æ˜¯åœ¨é¢‘ç¹æ›´æ”¹æ—¶ç¼–è¯‘å’Œè¿è¡Œç¨‹åºçš„æœ‰ç”¨å¿«æ·æ–¹å¼ï¼Œä½†å®ƒä¸ä¼šç”ŸæˆäºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ã€‚\næœ¬ä¸»é¢˜ä»‹ç»äº†ç”¨äºæ„å»ºä»£ç çš„ä¸¤ä¸ªé™„åŠ å‘½ä»¤:\ngo-build å‘½ä»¤ç¼–è¯‘åŒ…åŠå…¶ä¾èµ–é¡¹ï¼Œä½†ä¸å®‰è£…ç»“æœã€‚ go install å‘½ä»¤ç¼–è¯‘å¹¶å®‰è£…ç¨‹åºåŒ…ã€‚ åœ¨ hello ç›®å½•çš„å‘½ä»¤è¡Œä¸­ï¼Œè¿è¡Œ go build å‘½ä»¤å°†ä»£ç ç¼–è¯‘ä¸ºå¯æ‰§è¡Œæ–‡ä»¶ã€‚ $ go build åœ¨ hello ç›®å½•ä¸­çš„å‘½ä»¤è¡Œä¸­ï¼Œè¿è¡Œæ–°çš„ hello å¯æ‰§è¡Œæ–‡ä»¶ä»¥ç¡®è®¤ä»£ç æ˜¯å¦æœ‰æ•ˆã€‚ è¯·æ³¨æ„ï¼Œæ‚¨çš„ç»“æœå¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼Œè¿™å–å†³äºæ‚¨åœ¨æµ‹è¯•åæ˜¯å¦æ›´æ”¹äº† greetings.go ä»£ç ã€‚ Linux or Mac: $ ./hello map[Darrin:Great to see you, Darrin! Gladys:Hail, Gladys! Well met! Samantha:Hail, Samantha! Well met!] On Windows: $ hello.exe map[Darrin:Great to see you, Darrin! Gladys:Hail, Gladys! Well met! Samantha:Hail, Samantha! Well met!] æ‚¨å·²å°†åº”ç”¨ç¨‹åºç¼–è¯‘ä¸ºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œä»¥ä¾¿è¿è¡Œå®ƒã€‚ä½†è¦å½“å‰è¿è¡Œå®ƒï¼Œæ‚¨çš„æç¤ºéœ€è¦ä½äºå¯æ‰§è¡Œæ–‡ä»¶çš„ç›®å½•ä¸­ï¼Œæˆ–è€…æŒ‡å®šå¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ã€‚ æ¥ä¸‹æ¥ï¼Œæ‚¨å°†å®‰è£…å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥åœ¨ä¸æŒ‡å®šå…¶è·¯å¾„çš„æƒ…å†µä¸‹è¿è¡Œå®ƒã€‚\næŸ¥æ‰¾ Go å®‰è£…è·¯å¾„ï¼ŒGo å‘½ä»¤å°†åœ¨å…¶ä¸­å®‰è£…å½“å‰è½¯ä»¶åŒ…ã€‚ æ‚¨å¯ä»¥é€šè¿‡è¿è¡Œ go list å‘½ä»¤æ¥å‘ç°å®‰è£…è·¯å¾„ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š $ go list -f \u0026#39;{{.Target}}\u0026#39; ä¾‹å¦‚ï¼Œå‘½ä»¤çš„è¾“å‡ºå¯èƒ½ä¼šè¯´/home/gopher/bin/helloï¼Œè¿™æ„å‘³ç€äºŒè¿›åˆ¶æ–‡ä»¶è¢«å®‰è£…åˆ°/home/gopaher/binã€‚åœ¨ä¸‹ä¸€æ­¥ä¸­ï¼Œæ‚¨å°†éœ€è¦æ­¤å®‰è£…ç›®å½•ã€‚\nå°† Go å®‰è£…ç›®å½•æ·»åŠ åˆ°ç³»ç»Ÿçš„ shell è·¯å¾„ è¿™æ ·ï¼Œæ‚¨å°±å¯ä»¥è¿è¡Œç¨‹åºçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè€Œæ— éœ€æŒ‡å®šå¯æ‰§è¡Œæ–‡ä»¶çš„ä½ç½®ã€‚ åœ¨ Linux æˆ– Mac ä¸Šï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤:\n$ export PATH=$PATH:/path/to/your/install/directory åœ¨ Windows, è¿è¡Œä»¥ä¸‹å‘½ä»¤:\n$ set PATH=%PATH%;C:\\path\\to\\your\\install\\directory å¦ä¸€ç§é€‰æ‹©æ˜¯ï¼Œå¦‚æœæ‚¨çš„ shell è·¯å¾„ä¸­å·²ç»æœ‰ä¸€ä¸ªç±»ä¼¼$HOME/bin çš„ç›®å½•ï¼Œå¹¶ä¸”æ‚¨æƒ³åœ¨é‚£é‡Œå®‰è£… Go ç¨‹åºï¼Œåˆ™å¯ä»¥ä½¿ç”¨ Go-env å‘½ä»¤è®¾ç½® GOBIN å˜é‡æ¥æ›´æ”¹å®‰è£…ç›®æ ‡ï¼š\n$ go env -w GOBIN=/path/to/your/bin # or $ go env -w GOBIN=C:\\path\\to\\your\\bin æ›´æ–°å®Œ shell è·¯å¾„åï¼Œè¿è¡Œ go install å‘½ä»¤æ¥ç¼–è¯‘å’Œå®‰è£…åŒ…ã€‚ $ go install åªéœ€è¾“å…¥åº”ç”¨ç¨‹åºçš„åç§°å³å¯è¿è¡Œåº”ç”¨ç¨‹åºã€‚ä¸ºäº†è®©è¿™å˜å¾—æœ‰è¶£ï¼Œæ‰“å¼€ä¸€ä¸ªæ–°çš„å‘½ä»¤æç¤ºç¬¦ï¼Œå¹¶åœ¨å…¶ä»–ç›®å½•ä¸­è¿è¡Œ hello å¯æ‰§è¡Œæ–‡ä»¶åã€‚ $ hello map[Darrin:Hail, Darrin! Well met! Gladys:Great to see you, Gladys! Samantha:Hail, Samantha! Well met!] "
},
{
	"uri": "http://blog.911015.com/tour/03.html",
	"title": "3ã€åŸºç¡€ç¯‡ï¼ˆä¸‰ï¼‰ï¼šæ›´å¤šç±»å‹: struct, slices, å’Œ map",
	"tags": null,
	"description": "åŸºç¡€ç¯‡ï¼ˆä¸‰ï¼‰ï¼šæ›´å¤šç±»å‹: struct, slices, å’Œ map",
	"content": "æŒ‡é’ˆ Goæä¾›äº†æŒ‡é’ˆç±»å‹ã€‚æŒ‡é’ˆä¿å­˜çš„æ˜¯ä¸€ä¸ªå€¼çš„å†…å­˜åœ°å€ã€‚ ç±»å‹*Tæ˜¯æŒ‡å‘Tå€¼çš„æŒ‡é’ˆã€‚å®ƒçš„é›¶å€¼ä¸ºnilã€‚\nvar p *int \u0026amp;è¿ç®—ç¬¦ç”ŸæˆæŒ‡å‘å…¶æ“ä½œæ•°çš„æŒ‡é’ˆã€‚\ni := 42 p = \u0026amp;i *è¿ç®—ç¬¦è¡¨ç¤ºæŒ‡é’ˆçš„åŸºæœ¬å€¼ã€‚\nfmt.Println(*p) // read i through the pointer p *p = 21 // set i through the pointer p ä¸Cä¸åŒï¼ŒGoæ²¡æœ‰æŒ‡é’ˆè¿ç®—ã€‚\npackage main import \u0026#34;fmt\u0026#34; func main() { i, j := 42, 2701 p := \u0026amp;i // point to i fmt.Println(*p) // read i through the pointer *p = 21 // set i through the pointer fmt.Println(i) // see the new value of i p = \u0026amp;j // point to j *p = *p / 37 // divide j through the pointer fmt.Println(j) // see the new value of j } ç»“æ„ä½“ï¼ˆStructsï¼‰ ç»“æ„ä½“æ˜¯å­—æ®µçš„é›†åˆã€‚ä½¿ç”¨ç‚¹è®¿é—®ç»“æ„å­—æ®µã€‚\npackage main import \u0026#34;fmt\u0026#34; type Vertex struct { X int Y int } func main() { fmt.Println(Vertex{1, 2}) v := Vertex{1, 2} v.X = 4 fmt.Println(v.X) } ç»“æ„ä½“æŒ‡é’ˆ å¯ä»¥é€šè¿‡ç»“æ„æŒ‡é’ˆè®¿é—®ç»“æ„å­—æ®µã€‚\npackage main import \u0026#34;fmt\u0026#34; type Vertex struct { X int Y int } func main() { v := Vertex{1, 2} p := \u0026amp;v p.X = 1e9 fmt.Println(v) } å½“æˆ‘ä»¬é€šè¿‡ç»“æ„æŒ‡é’ˆpè®¿é—®ç»“æ„çš„å­—æ®µXï¼Œå¯ä»¥è¿™æ ·å†™ï¼ˆ*pï¼‰.Xã€‚ç„¶è€Œï¼Œè¿™ç§è¡¨ç¤ºæ³•å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥Goè¯­è¨€å…è®¸æˆ‘ä»¬åªå†™p.Xï¼Œè€Œä¸æ˜¾å¼è§£å¼•ç”¨ã€‚\npackage main import \u0026#34;fmt\u0026#34; type Vertex struct { X, Y int } var ( v1 = Vertex{1, 2} // has type Vertex v2 = Vertex{X: 1} // Y:0 is implicit v3 = Vertex{} // X:0 and Y:0 p = \u0026amp;Vertex{1, 2} // has type *Vertex ) func main() { fmt.Println(v1, p, v2, v3) } ç»“æ„å­—é¢é‡é€šè¿‡è®¾ç½®å…¶å­—æ®µçš„å€¼æ¥è¡¨ç¤ºæ–°åˆ†é…çš„ç»“æ„å€¼ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ Name: è¯­æ³•è®¾ç½®éƒ¨åˆ†å­—æ®µçš„å€¼ã€‚ï¼ˆå‘½åå­—æ®µçš„é¡ºåºæ— å…³ç´§è¦ã€‚ï¼‰ ç‰¹æ®Šå‰ç¼€\u0026amp;è¿”å›ä¸€ä¸ªæŒ‡å‘ç»“æ„å€¼çš„æŒ‡é’ˆã€‚\nArrays ç±»å‹[n]Tæ˜¯nä¸ªç±»å‹ä¸ºTçš„å€¼çš„æ•°ç»„ã€‚ è¡¨è¾¾å¼ ï¼š\nvar a [10]int å°†å˜é‡aå£°æ˜ä¸ºä¸€ä¸ªç”±åä¸ªæ•´æ•°ç»„æˆçš„æ•°ç»„ã€‚ æ•°ç»„çš„é•¿åº¦æ˜¯å…¶ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤æ— æ³•è°ƒæ•´æ•°ç»„çš„å¤§å°ã€‚è¿™ä¼¼ä¹æœ‰å±€é™æ€§ï¼Œä½†ä¸è¦æ‹…å¿ƒï¼›Goæä¾›äº†ä¸€ç§ä½¿ç”¨æ•°ç»„çš„æ–¹ä¾¿æ–¹æ³•ã€‚\npackage main import \u0026#34;fmt\u0026#34; func main() { var a [2]string a[0] = \u0026#34;Hello\u0026#34; a[1] = \u0026#34;World\u0026#34; fmt.Println(a[0], a[1]) fmt.Println(a) primes := [6]int{2, 3, 5, 7, 11, 13} fmt.Println(primes) } Slices æ•°ç»„å…·æœ‰å›ºå®šçš„å¤§å°ã€‚åˆ‡ç‰‡æ˜¯åŠ¨æ€æ•°ç»„ã€‚åœ¨å®è·µä¸­ï¼Œåˆ‡ç‰‡æ¯”æ•°ç»„æ›´å¸¸è§ã€‚ç±»å‹[]Tæ˜¯å…·æœ‰ç±»å‹Tçš„å…ƒç´ çš„slice ã€‚åˆ‡ç‰‡æ˜¯é€šè¿‡æŒ‡å®šä¸¤ä¸ªç´¢å¼•æ¥å½¢æˆçš„ï¼Œä¸€ä¸ªæ˜¯ç”±å†’å·åˆ†éš”çš„ä¸‹ç•Œå’Œä¸Šç•Œï¼ša[low : high] è¿™ä¼šæˆªå–ä¸€ä¸ªåŒ…æ‹¬ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆlow ï¼‰ä½†ä¸åŒ…æ‹¬æœ€åä¸€ä¸ªå…ƒç´ ï¼ˆhighï¼‰çš„sliceã€‚ ä»¥ä¸‹è¡¨è¾¾å¼åˆ›å»ºä¸€ä¸ªåˆ‡ç‰‡ï¼Œè¯¥åˆ‡ç‰‡åŒ…æ‹¬çš„å…ƒç´ 1åˆ°3ï¼ša[1:4]\npackage main import \u0026#34;fmt\u0026#34; func main() { primes := [6]int{2, 3, 5, 7, 11, 13} var s []int = primes[1:4] fmt.Println(s) } åˆ‡ç‰‡ç±»ä¼¼äºå¯¹æ•°ç»„çš„å¼•ç”¨ åˆ‡ç‰‡ä¸å­˜å‚¨ä»»ä½•æ•°æ®ï¼Œå®ƒåªæè¿°åº•å±‚æ•°ç»„çš„ä¸€éƒ¨åˆ†ã€‚æ›´æ”¹åˆ‡ç‰‡çš„å…ƒç´ ä¼šä¿®æ”¹å…¶åº•å±‚æ•°ç»„çš„ç›¸åº”å…ƒç´ ã€‚å…±äº«ç›¸åŒåº•å±‚é˜µåˆ—çš„å…¶ä»–åˆ‡ç‰‡å°†çœ‹åˆ°è¿™äº›å˜åŒ–ã€‚\npackage main import \u0026#34;fmt\u0026#34; func main() { names := [4]string{ \u0026#34;John\u0026#34;, \u0026#34;Paul\u0026#34;, \u0026#34;George\u0026#34;, \u0026#34;Ringo\u0026#34;, } fmt.Println(names) a := names[0:2] b := names[1:3] fmt.Println(a, b) b[0] = \u0026#34;XXX\u0026#34; fmt.Println(a, b) fmt.Println(names) } Sliceå­—é¢é‡ åˆ‡ç‰‡å°±åƒä¸€ä¸ªæ²¡æœ‰é•¿åº¦çš„æ•°ç»„ã€‚ è¿™æ˜¯ä¸€ä¸ªæ•°ç»„ï¼š\n[]bool{true, true, false} è¿™ä¼šåˆ›å»ºä¸ä¸Šé¢ç›¸åŒçš„æ•°ç»„ï¼Œç„¶åæ„å»ºä¸€ä¸ªå¼•ç”¨å®ƒçš„åˆ‡ç‰‡ï¼š\n[]bool{true, true, false} package main import \u0026#34;fmt\u0026#34; func main() { q := []int{2, 3, 5, 7, 11, 13} fmt.Println(q) r := []bool{true, false, true, true, false, true} fmt.Println(r) s := []struct { i int b bool }{ {2, true}, {3, false}, {5, true}, {7, true}, {11, false}, {13, true}, } fmt.Println(s) } Slice é»˜è®¤å€¼ ä½¿ç”¨åˆ‡ç‰‡æ—¶ï¼Œå¯ä»¥çœç•¥ä¸Šé™æˆ–ä¸‹é™ï¼Œè€Œä½¿ç”¨å®ƒä»¬çš„é»˜è®¤å€¼ã€‚å¯¹äºä¸‹é™ï¼Œé»˜è®¤ä¸ºé›¶ï¼Œå¯¹äºä¸Šé™ï¼Œé»˜è®¤ä¸ºåˆ‡ç‰‡é•¿åº¦ã€‚ å¯¹æ•°ç»„ var a [10]intï¼Œè¿™äº›åˆ‡ç‰‡è¡¨è¾¾å¼æ˜¯ç­‰æ•ˆçš„ï¼š\na[0:10] a[:10] a[0:] a[:] package main import \u0026#34;fmt\u0026#34; func main() { s := []int{2, 3, 5, 7, 11, 13} s = s[1:4] fmt.Println(s) s = s[:2] fmt.Println(s) s = s[1:] fmt.Println(s) } sliceé•¿åº¦å’Œå®¹é‡ åˆ‡ç‰‡æ—¢æœ‰é•¿åº¦ä¹Ÿæœ‰å®¹é‡ã€‚åˆ‡ç‰‡çš„é•¿åº¦æ˜¯å®ƒåŒ…å«çš„å…ƒç´ ä¸ªæ•°ã€‚ç‰‡çš„å®¹é‡æ˜¯åº•å±‚æ•°ç»„ä¸­çš„å…ƒç´ æ•°ï¼Œä»åˆ‡ç‰‡ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹è®¡æ•°ã€‚åˆ‡ç‰‡çš„é•¿åº¦å’Œå®¹é‡så¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼lenï¼ˆsï¼‰å’Œcapï¼ˆsï¼‰æ¥è·å¾—ã€‚\npackage main import \u0026#34;fmt\u0026#34; func main() { s := []int{2, 3, 5, 7, 11, 13} printSlice(s) // Slice the slice to give it zero length. s = s[:0] printSlice(s) // Extend its length. s = s[:4] printSlice(s) // Drop its first two values. s = s[2:] printSlice(s) } func printSlice(s []int) { fmt.Printf(\u0026#34;len=%d cap=%d %v\\n\u0026#34;, len(s), cap(s), s) } æ‚¨å¯ä»¥é€šè¿‡é‡æ–°åˆ‡ç‰‡æ¥å»¶é•¿åˆ‡ç‰‡çš„é•¿åº¦ï¼Œå‰ææ˜¯å®ƒæœ‰è¶³å¤Ÿçš„å®¹é‡ã€‚å°è¯•æ›´æ”¹ç¤ºä¾‹ç¨‹åºä¸­çš„ä¸€ä¸ªåˆ‡ç‰‡æ“ä½œï¼Œä»¥å°†å…¶æ‰©å±•åˆ°å…¶å®¹é‡ä¹‹å¤–ï¼Œç„¶åçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚\nSliceé›¶å€¼ åˆ‡ç‰‡çš„é›¶å€¼ä¸ºnilã€‚å€¼ä½nilçš„åˆ‡ç‰‡é•¿åº¦å’Œå®¹é‡ä¸º0ï¼Œå¹¶ä¸”æ²¡æœ‰åº•å±‚æ•°ç»„ã€‚\npackage main import \u0026#34;fmt\u0026#34; func main() { var s []int fmt.Println(s, len(s), cap(s)) if s == nil { fmt.Println(\u0026#34;nil!\u0026#34;) } } ä½¿ç”¨makeåˆ›å»ºåˆ‡ç‰‡ åˆ‡ç‰‡å¯ä»¥ä½¿ç”¨å†…ç½®çš„makeå‡½æ•°åˆ›å»ºï¼›è¿™å°±æ˜¯åˆ›å»ºåŠ¨æ€å¤§å°æ•°ç»„çš„æ–¹æ³•ã€‚makeå‡½æ•°åˆ†é…ä¸€ä¸ªç©ºæ•°ç»„ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¼•ç”¨è¯¥æ•°ç»„çš„åˆ‡ç‰‡ï¼š\na := make([]int, 5) // len(a)=5 è¦æŒ‡å®šå®¹é‡ï¼Œè¯·ä¼ é€’makeå‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•°ä»¥ï¼š\nb := make([]int, 0, 5) // len(b)=0, cap(b)=5 b = b[:cap(b)] // len(b)=5, cap(b)=5 b = b[1:] // len(b)=4, cap(b)=4 package main import \u0026#34;fmt\u0026#34; func main() { a := make([]int, 5) printSlice(\u0026#34;a\u0026#34;, a) b := make([]int, 0, 5) printSlice(\u0026#34;b\u0026#34;, b) c := b[:2] printSlice(\u0026#34;c\u0026#34;, c) d := c[2:5] printSlice(\u0026#34;d\u0026#34;, d) } func printSlice(s string, x []int) { fmt.Printf(\u0026#34;%s len=%d cap=%d %v\\n\u0026#34;, s, len(x), cap(x), x) } äºŒç»´slice åˆ‡ç‰‡å¯ä»¥åŒ…å«ä»»ä½•ç±»å‹ï¼ŒåŒ…æ‹¬å…¶ä»–åˆ‡ç‰‡ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;strings\u0026#34; ) func main() { // Create a tic-tac-toe board. board := [][]string{ []string{\u0026#34;_\u0026#34;, \u0026#34;_\u0026#34;, \u0026#34;_\u0026#34;}, []string{\u0026#34;_\u0026#34;, \u0026#34;_\u0026#34;, \u0026#34;_\u0026#34;}, []string{\u0026#34;_\u0026#34;, \u0026#34;_\u0026#34;, \u0026#34;_\u0026#34;}, } // The players take turns. board[0][0] = \u0026#34;X\u0026#34; board[2][2] = \u0026#34;O\u0026#34; board[1][2] = \u0026#34;X\u0026#34; board[1][0] = \u0026#34;O\u0026#34; board[0][2] = \u0026#34;X\u0026#34; for i := 0; i \u0026lt; len(board); i++ { fmt.Printf(\u0026#34;%s\\n\u0026#34;, strings.Join(board[i], \u0026#34; \u0026#34;)) } } Append å°†æ–°å…ƒç´ é™„åŠ åˆ°åˆ‡ç‰‡ä¸­æ˜¯å¾ˆå¸¸è§çš„ï¼Œå› æ­¤Goæä¾›äº†ä¸€ä¸ªå†…ç½®å‡½æ•°append ã€‚\nfunc append(s []T, vs ...T) []T //appendçš„ç¬¬ä¸€ä¸ªå‚æ•°sæ˜¯Tç±»å‹çš„åˆ‡ç‰‡ï¼Œå…¶ä½™çš„æ˜¯è¦é™„åŠ åˆ°åˆ‡ç‰‡çš„Tå€¼ã€‚ appendçš„ç»“æœå€¼æ˜¯ä¸€ä¸ªåˆ‡ç‰‡ï¼ŒåŒ…å«åŸå§‹åˆ‡ç‰‡çš„æ‰€æœ‰å…ƒç´ åŠ ä¸Šæä¾›çš„å€¼ã€‚ å¦‚æœsçš„åº•å±‚æ•°ç»„å¤ªå°ï¼Œæ— æ³•å®¹çº³æ‰€æœ‰ç»™å®šçš„å€¼ï¼Œåˆ™ä¼šåˆ†é…ä¸€ä¸ªæ›´å¤§çš„æ•°ç»„ã€‚è¿”å›çš„åˆ‡ç‰‡å°†æŒ‡å‘æ–°åˆ†é…çš„æ•°ç»„ã€‚\npackage main import \u0026#34;fmt\u0026#34; func main() { var s []int printSlice(s) // append works on nil slices. s = append(s, 0) printSlice(s) // The slice grows as needed. s = append(s, 1) printSlice(s) // We can add more than one element at a time. s = append(s, 2, 3, 4) printSlice(s) } func printSlice(s []int) { fmt.Printf(\u0026#34;len=%d cap=%d %v\\n\u0026#34;, len(s), cap(s), s) } Range forå¾ªç¯çš„rangeå½¢å¼åœ¨åˆ‡ç‰‡æˆ–æ˜ å°„ä¸Šè¿›è¡Œè¿­ä»£ã€‚åœ¨åˆ‡ç‰‡ä¸Šè¿›è¡Œéå†æ—¶ï¼Œæ¯æ¬¡è¿­ä»£éƒ½ä¼šè¿”å›ä¸¤ä¸ªå€¼ã€‚ç¬¬ä¸€ä¸ªæ˜¯ç´¢å¼•ï¼Œç¬¬äºŒä¸ªæ˜¯è¯¥ç´¢å¼•å¤„å…ƒç´ çš„å‰¯æœ¬ã€‚\npackage main import \u0026#34;fmt\u0026#34; var pow = []int{1, 2, 4, 8, 16, 32, 64, 128} func main() { for i, v := range pow { fmt.Printf(\u0026#34;2**%d = %d\\n\u0026#34;, i, v) } } æ‚¨å¯ä»¥ç”¨ _ æ¥è·³è¿‡ç´¢å¼•æˆ–å€¼ã€‚å¦‚æœåªéœ€è¦ç´¢å¼•ï¼Œå¯ä»¥çœç•¥ç¬¬äºŒä¸ªå˜é‡ã€‚\nfor i, _ := range pow for _, value := range pow for i := range pow package main import \u0026#34;fmt\u0026#34; func main() { pow := make([]int, 10) for i := range pow { pow[i] = 1 \u0026lt;\u0026lt; uint(i) // == 2**i } for _, value := range pow { fmt.Printf(\u0026#34;%d\\n\u0026#34;, value) } } ç»ƒä¹ ï¼šåˆ‡ç‰‡ å®ç° Picå‡½æ•°.å®ƒåº”è¯¥è¿”å›ä¸€ä¸ªé•¿åº¦ä¸ºdyçš„åˆ‡ç‰‡ï¼Œå…¶ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯dx 8ä½æ— ç¬¦å·æ•´æ•°çš„åˆ‡ç‰‡. å½“ä½ è¿è¡Œè¯¥ç¨‹åºæ—¶, å®ƒå°†æ˜¾ç¤ºæ‚¨çš„å›¾ç‰‡ï¼Œå°†æ•´æ•°è§£é‡Šä¸ºç°åº¦å€¼. å›¾åƒçš„é€‰æ‹©å–å†³äºæ‚¨ã€‚æœ‰è¶£çš„å‡½æ•°åŒ…æ‹¬ï¼ˆx+yï¼‰/2ã€x*yå’Œx^y æ‚¨éœ€è¦ä½¿ç”¨ä¸€ä¸ªå¾ªç¯æ¥åˆ†é…[][]uint8ä¸­çš„æ¯ä¸ª[]uint8ã€‚ (ä½¿ç”¨uint8ï¼ˆintValueï¼‰åœ¨ç±»å‹ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚)\nä¸€ä¸‹ä»£ç ä»…ä¾›å‚è€ƒ\npackage main import \u0026#34;golang.org/x/tour/pic\u0026#34; func Pic(dx, dy int) [][]uint8 { total := make([]uint8, dx*dy) res := make([][]uint8, dx) for x := 0; x \u0026lt; dx; x++ { res[x], total = total[0:dy], total[dy:] for y := 0; y \u0026lt; dy; y++ { res[x][y] = uint8(x * y) } } return res } func main() { pic.Show(Pic) } Maps Map æ˜¯é”®å€¼å¯¹çš„æ˜ å°„ mapçš„é›¶å€¼ä¸ºnilã€‚nil map æ²¡æœ‰keyï¼Œä¹Ÿä¸èƒ½å‘å…¶æ·»åŠ keyã€‚ makeå‡½æ•°è¿”å›ç»™å®šç±»å‹çš„mapï¼Œè¯¥mapå·²åˆå§‹åŒ–å¹¶å¯ä»¥ä½¿ç”¨ã€‚\npackage main import \u0026#34;fmt\u0026#34; type Vertex struct { Lat, Long float64 } var m map[string]Vertex func main() { m = make(map[string]Vertex) m[\u0026#34;Bell Labs\u0026#34;] = Vertex{ 40.68433, -74.39967, } fmt.Println(m[\u0026#34;Bell Labs\u0026#34;]) } map èµ‹å€¼ä¸ç»“æ„èµ‹å€¼ç±»ä¼¼ï¼Œä½†keyæ˜¯å¿…éœ€çš„ã€‚\npackage main import \u0026#34;fmt\u0026#34; type Vertex struct { Lat, Long float64 } var m = map[string]Vertex{ \u0026#34;Bell Labs\u0026#34;: Vertex{ 40.68433, -74.39967, }, \u0026#34;Google\u0026#34;: Vertex{ 37.42202, -122.08408, }, } func main() { fmt.Println(m) } å¦‚æœé¡¶çº§ç±»å‹åªæ˜¯ä¸€ä¸ªç±»å‹åç§°ï¼Œåˆ™å¯ä»¥ä»èµ‹å€¼çš„å…ƒç´ ä¸­çœç•¥å®ƒã€‚\npackage main import \u0026#34;fmt\u0026#34; type Vertex struct { Lat, Long float64 } var m = map[string]Vertex{ \u0026#34;Bell Labs\u0026#34;: {40.68433, -74.39967}, \u0026#34;Google\u0026#34;: {37.42202, -122.08408}, } func main() { fmt.Println(m) } ä¿®æ”¹map package main import \u0026#34;fmt\u0026#34; func main() { m := make(map[string]int) m[\u0026#34;Answer\u0026#34;] = 42 fmt.Println(\u0026#34;The value:\u0026#34;, m[\u0026#34;Answer\u0026#34;]) m[\u0026#34;Answer\u0026#34;] = 48 fmt.Println(\u0026#34;The value:\u0026#34;, m[\u0026#34;Answer\u0026#34;]) delete(m, \u0026#34;Answer\u0026#34;) fmt.Println(\u0026#34;The value:\u0026#34;, m[\u0026#34;Answer\u0026#34;]) v, ok := m[\u0026#34;Answer\u0026#34;] fmt.Println(\u0026#34;The value:\u0026#34;, v, \u0026#34;Present?\u0026#34;, ok) } åœ¨map mä¸­æ’å…¥æˆ–æ›´æ–°å…ƒç´ ï¼š\nm[key] = elem æŸ¥æ‰¾å…ƒç´ ï¼š\nelem = m[key] åˆ é™¤å…ƒç´ ï¼š\ndelete(m, key) é€šè¿‡æ¥æ”¶ç¬¬äºŒä¸ªå‚æ•°æµ‹è¯•æ˜¯å¦å­˜åœ¨å¯¹åº”çš„keyï¼š\nelem, ok = m[key] è‹¥keyåœ¨mä¸­ï¼Œåˆ™okä¸ºtrueã€‚å¦åˆ™okä¸ºfalseã€‚ è‹¥keyä¸åœ¨mapä¸­ï¼Œåˆ™elemæ˜¯mapå…ƒç´ ç±»å‹çš„é›¶å€¼ã€‚ æ³¨æ„ï¼šå¦‚æœå°šæœªå£°æ˜elemæˆ–okï¼Œåˆ™å¯ä»¥ä½¿ç”¨ç®€çŸ­çš„å£°æ˜å½¢å¼ï¼š\nelem, ok := m[key] ç»ƒä¹ ï¼šmap å®ç°WordCountã€‚å®ƒåº”è¯¥è¿”å›å­—ç¬¦ä¸²sä¸­æ¯ä¸ªâ€œå•è¯â€è®¡æ•°çš„mapã€‚wc.Testå‡½æ•°é’ˆå¯¹æ‰€æä¾›çš„å‡½æ•°è¿è¡Œä¸€ä¸ªæµ‹è¯•å¥—ä»¶ï¼Œå¹¶æ‰“å°æˆåŠŸæˆ–å¤±è´¥ã€‚ä½ å¯èƒ½ä¼šç”¨åˆ° strings.Fieldsã€‚ ä¸€ä¸‹ä»£ç ä»…ä¾›å‚è€ƒ\npackage main import ( \u0026#34;strings\u0026#34; \u0026#34;golang.org/x/tour/wc\u0026#34; ) func WordCount(s string) map[string]int { res := make(map[string]int) words := strings.Fields(s) for _, word := range words { res[word]++ } return res } func main() { wc.Test(WordCount) } å‡½æ•°ç±»å‹ å‡½æ•°ä¹Ÿæ˜¯å€¼ã€‚å®ƒä»¬å¯ä»¥åƒå…¶ä»–å€¼ä¸€æ ·ä¼ é€’ã€‚å‡½æ•°å€¼å¯ä»¥ç”¨ä½œå‡½æ•°å‚æ•°å’Œè¿”å›å€¼ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math\u0026#34; ) func compute(fn func(float64, float64) float64) float64 { return fn(3, 4) } func main() { hypot := func(x, y float64) float64 { return math.Sqrt(x*x + y*y) } fmt.Println(hypot(5, 12)) fmt.Println(compute(hypot)) fmt.Println(compute(math.Pow)) } å‡½æ•°é—­åŒ… Goå‡½æ•°å¯èƒ½æ˜¯é—­åŒ…ã€‚é—­åŒ…æ˜¯ä¸€ä¸ªå‡½æ•°å€¼ï¼Œå®ƒå¼•ç”¨æ¥è‡ªå…¶ä¸»ä½“å¤–éƒ¨çš„å˜é‡ã€‚å‡½æ•°å¯ä»¥è®¿é—®å¹¶åˆ†é…ç»™å¼•ç”¨çš„å˜é‡ï¼›ä»è¿™ä¸ªæ„ä¹‰ä¸Šè¯´ï¼Œå‡½æ•°æ˜¯â€œç»‘å®šâ€åˆ°å˜é‡çš„ã€‚ä¾‹å¦‚ï¼Œaddrå‡½æ•°è¿”å›ä¸€ä¸ªé—­åŒ…ã€‚æ¯ä¸ªé—­åŒ…éƒ½ç»‘å®šåˆ°å®ƒè‡ªå·±çš„sumå˜é‡ã€‚\npackage main import \u0026#34;fmt\u0026#34; func adder() func(int) int { sum := 0 return func(x int) int { sum += x return sum } } func main() { pos, neg := adder(), adder() for i := 0; i \u0026lt; 10; i++ { fmt.Println( pos(i), neg(-2*i), ) } } ç»ƒä¹ ï¼šæ–æ³¢é‚£å¥‘é—­åŒ… è®©æˆ‘ä»¬ç©ä¸€ä¸‹functionã€‚ å®ç°ä¸€ä¸ªfibonacciå‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ªå‡½æ•°ï¼ˆé—­åŒ…ï¼‰ï¼Œè¯¥å‡½æ•°è¿”å›è¿ç»­çš„fibonacciæ•°ï¼ˆ0ï¼Œ1ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ5ï¼Œâ€¦ï¼‰ã€‚ ä¸€ä¸‹ä»£ç ä»…ä¾›å‚è€ƒ\npackage main import \u0026#34;fmt\u0026#34; // fibonacci is a function that returns // a function that returns an int. func fibonacci() func() int { var pre,cur = 0,0 return func()int{ temp := cur cur = pre+cur pre = temp if cur == 0 { cur = 1 return 0 } return temp } } func fibonacci1() func() int { var pre, cur, idx = 0, 1, -1 return func() int { idx++ if idx \u0026lt;= 1 { return idx } temp := cur cur = pre + cur pre = temp return cur } } func main() { f := fibonacci() for i := 0; i \u0026lt; 10; i++ { fmt.Println(f()) } } "
},
{
	"uri": "http://blog.911015.com/go-zero/03.html",
	"title": "go-zero å•ä½“åº”ç”¨å®è·µï¼ˆä¸‰ï¼‰",
	"tags": null,
	"description": "å•ä½“åº”ç”¨å®è·µ",
	"content": "åˆ—è¡¨æ•°æ®åˆ†é¡µ 1ã€api å®šä¹‰ Pager api å¯ä»¥å•ç‹¬ä¸€ä¸ªæ–‡ä»¶ï¼›æ­¤æ—¶ userlogin.api éœ€è¦ import \u0026ldquo;api/pager.api\u0026rdquo;\nPager { Page int `form:\u0026#34;page,default=1\u0026#34;` PageSize int `form:\u0026#34;page_size,default=10\u0026#34;` TotalSize int `form:\u0026#34;total_size,default=0\u0026#34;` } TagListRequest { Name string `form:\u0026#34;name,optional\u0026#34;` Pager } TagListResponse { List []TagResponse `json:\u0026#34;list\u0026#34;` Matedata Pager `json:\u0026#34;matedata\u0026#34;` } service userlogin-api { @handler Tags get /api/tag/list(TagListRequest) returns (TagListResponse) } 2ã€model æ–‡ä»¶ï¼šBlogTagModelå¢åŠ TageListæ–¹æ³•ï¼›åŒæ—¶ customBlogTagModel.TagList å®ç°å…·ä½“é€»è¾‘\nBlogTagModel interface { blogTagModel TagList(context.Context, *types.TagListRequest) (*types.TagListResponse, error) } func (c *customBlogTagModel) TagList(ctx context.Context, request *types.TagListRequest) (*types.TagListResponse, error) { result := \u0026amp;types.TagListResponse{} pager := request.Pager countSql := fmt.Sprintf(\u0026#34;select %s from %s where 1 \u0026#34;, \u0026#34;count(id) as total_size\u0026#34;, c.table) _ = c.QueryRowNoCacheCtx(ctx, \u0026amp;pager.TotalSize, countSql) result.Matedata = pager where := \u0026#34;1 \u0026#34; var err error if len(request.Name) \u0026gt; 0 { where += \u0026#34;AND name=? \u0026#34; sql := fmt.Sprintf(\u0026#34;select %s from %s where %s limit %d,%d\u0026#34;, blogTagRows, c.table, where, (pager.Page-1)*pager.PageSize, request.PageSize) err = c.QueryRowsNoCacheCtx(ctx, \u0026amp;result.List, sql, request.Name) } else { sql := fmt.Sprintf(\u0026#34;select %s from %s where %s limit %d,%d\u0026#34;, blogTagRows, c.table, where, (pager.Page-1)*pager.PageSize, request.PageSize) err = c.QueryRowsNoCacheCtx(ctx, \u0026amp;result.List, sql) } switch err { case nil: return result, nil case sqlc.ErrNotFound: return nil, ErrNotFound default: return nil, err } } 3ã€logic æ–‡ä»¶ç¼–è¾‘\nfunc (l *TagsLogic) Tags(req *types.TagListRequest) (resp *types.TagListResponse, err error) { return l.svcCtx.TagsModel.TagList(l.ctx, req) } 4ã€æµ‹è¯• http://127.0.0.1:8000/api/tag/list?page=2\u0026amp;page_size=5\n{ \u0026#34;list\u0026#34;: [ { \u0026#34;id\u0026#34;: 6, \u0026#34;name\u0026#34;: \u0026#34;python\u0026#34;, \u0026#34;state\u0026#34;: 1 }, { \u0026#34;id\u0026#34;: 7, \u0026#34;name\u0026#34;: \u0026#34;rust\u0026#34;, \u0026#34;state\u0026#34;: 1 }, { \u0026#34;id\u0026#34;: 8, \u0026#34;name\u0026#34;: \u0026#34;typescript\u0026#34;, \u0026#34;state\u0026#34;: 1 } ], \u0026#34;matedata\u0026#34;: { \u0026#34;Page\u0026#34;: 2, \u0026#34;PageSize\u0026#34;: 5, \u0026#34;TotalSize\u0026#34;: 8 } } "
},
{
	"uri": "http://blog.911015.com/go-zero/",
	"title": "go-zeroåº”ç”¨å®è·µ",
	"tags": null,
	"description": "go-zero æ˜¯ä¸€ä¸ªé›†æˆäº†å„ç§å·¥ç¨‹å®è·µçš„ web å’Œ rpc æ¡†æ¶",
	"content": "\ræ–‡æ¡£ç®€ä»‹\rgo-zero æ˜¯ä¸€ä¸ªé›†æˆäº†å„ç§å·¥ç¨‹å®è·µçš„ web å’Œ rpc æ¡†æ¶ã€‚é€šè¿‡å¼¹æ€§è®¾è®¡ä¿éšœäº†å¤§å¹¶å‘æœåŠ¡ç«¯çš„ç¨³å®šæ€§ï¼Œç»å—äº†å……åˆ†çš„å®æˆ˜æ£€éªŒã€‚\ngo-zero åŒ…å«æç®€çš„ API å®šä¹‰å’Œç”Ÿæˆå·¥å…· goctlï¼Œå¯ä»¥æ ¹æ®å®šä¹‰çš„ api æ–‡ä»¶ä¸€é”®ç”Ÿæˆ Go, iOS, Android, Kotlin, Dart, TypeScript, JavaScript ä»£ç ï¼Œå¹¶å¯ç›´æ¥è¿è¡Œã€‚\nä½¿ç”¨ go-zero çš„å¥½å¤„ï¼š\nè½»æ¾è·å¾—æ”¯æ’‘åƒä¸‡æ—¥æ´»æœåŠ¡çš„ç¨³å®šæ€§ å†…å»ºçº§è”è¶…æ—¶æ§åˆ¶ã€é™æµã€è‡ªé€‚åº”ç†”æ–­ã€è‡ªé€‚åº”é™è½½ç­‰å¾®æœåŠ¡æ²»ç†èƒ½åŠ›ï¼Œæ— éœ€é…ç½®å’Œé¢å¤–ä»£ç  å¾®æœåŠ¡æ²»ç†ä¸­é—´ä»¶å¯æ— ç¼é›†æˆåˆ°å…¶å®ƒç°æœ‰æ¡†æ¶ä½¿ç”¨ æç®€çš„ API æè¿°ï¼Œä¸€é”®ç”Ÿæˆå„ç«¯ä»£ç  è‡ªåŠ¨æ ¡éªŒå®¢æˆ·ç«¯è¯·æ±‚å‚æ•°åˆæ³•æ€§ å¤§é‡å¾®æœåŠ¡æ²»ç†å’Œå¹¶å‘å·¥å…·åŒ… å¦‚æœå†…å®¹æœ‰è¯¯è¯· ä¸æˆ‘è”ç³»\ngo-zero å•ä½“åº”ç”¨å®è·µï¼ˆä¸€ï¼‰ go-zero å•ä½“åº”ç”¨å®è·µï¼ˆäºŒï¼‰ go-zero å•ä½“åº”ç”¨å®è·µï¼ˆä¸‰ï¼‰ go-zero å¾®æœåŠ¡åº”ç”¨å®è·µï¼ˆä¸€ï¼‰ go-zero å¾®æœåŠ¡åº”ç”¨å®è·µï¼ˆäºŒï¼‰ "
},
{
	"uri": "http://blog.911015.com/wx/20230523.html",
	"title": "Goè¯­è¨€æ•°æ®ç»“æ„ï¼š Array å’ŒSlice",
	"tags": null,
	"description": "Go è¯­è¨€ä¸­çš„æ•°ç»„å’Œåˆ‡ç‰‡ï¼ˆsliceï¼‰éƒ½æ˜¯ç”¨äºå­˜å‚¨ä¸€ç³»åˆ—æ•°æ®çš„é›†åˆï¼Œä½†å®ƒä»¬ä¹‹é—´æœ‰å‡ ä¸ªé‡è¦çš„åŒºåˆ«",
	"content": "Goè¯­è¨€æ•°æ®ç»“æ„ï¼š Array å’ŒSlice Go è¯­è¨€ä¸­çš„æ•°ç»„å’Œåˆ‡ç‰‡ï¼ˆsliceï¼‰éƒ½æ˜¯ç”¨äºå­˜å‚¨ä¸€ç³»åˆ—æ•°æ®çš„é›†åˆï¼Œä½†å®ƒä»¬ä¹‹é—´æœ‰å‡ ä¸ªé‡è¦çš„åŒºåˆ«ã€‚ä¸‹é¢æ˜¯å®ƒä»¬çš„ä½¿ç”¨æ–¹æ³•å’ŒåŒºåˆ«ï¼š\næ•°ç»„ æ•°ç»„æ˜¯ä¸€ä¸ªæœ‰å›ºå®šå¤§å°çš„æ•°æ®é›†åˆï¼Œå®šä¹‰æ—¶éœ€è¦æŒ‡å®šå…¶é•¿åº¦ã€‚æ•°ç»„çš„é•¿åº¦æ˜¯æ•°ç»„ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤ä¸èƒ½æ”¹å˜æ•°ç»„çš„å¤§å°ã€‚æ•°ç»„å¯ä»¥åŒ…å«ç›¸åŒç±»å‹çš„æ•°æ®ï¼Œè¿™äº›æ•°æ®åœ¨å†…å­˜ä¸­æ˜¯è¿ç»­çš„ã€‚\nåˆ›å»ºæ•°ç»„ var a [5]int // å®šä¹‰ä¸€ä¸ªé•¿åº¦ä¸º5ï¼Œå…ƒç´ ç±»å‹ä¸ºintçš„æ•°ç»„ b := [3]string{\u0026#34;a\u0026#34;, \u0026#34;b\u0026#34;, \u0026#34;c\u0026#34;} // å®šä¹‰ä¸€ä¸ªé•¿åº¦ä¸º3ï¼Œå…ƒç´ ç±»å‹ä¸ºstringçš„æ•°ç»„ï¼Œå¹¶åˆå§‹åŒ–æ•°ç»„å€¼ è®¿é—®æ•°ç»„å…ƒç´  a[0] = 1 // ç»™ç¬¬1ä¸ªå…ƒç´ èµ‹å€¼ä¸º1 x := a[2] // è·å–ç¬¬3ä¸ªå…ƒç´ çš„å€¼ éå†æ•°ç»„å…ƒç´  for i, v := range a { fmt.Printf(\u0026#34;a[%d] = %d\\n\u0026#34;, i, v) } åˆ‡ç‰‡ åˆ‡ç‰‡æ˜¯ä¸€ä¸ªåŠ¨æ€çš„æ•°ç»„ï¼Œé•¿åº¦ä¸å›ºå®šï¼Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œæ‰©å±•ã€‚åˆ‡ç‰‡æœ¬èº«å¹¶ä¸å­˜å‚¨ä»»ä½•æ•°æ®ï¼Œå®ƒåªæ˜¯åº•å±‚æ•°ç»„çš„å¼•ç”¨ï¼Œå› æ­¤å¯¹åˆ‡ç‰‡çš„ä¿®æ”¹ä¼šå½±å“åˆ°åº•å±‚æ•°ç»„çš„å†…å®¹ã€‚\nåˆ›å»ºåˆ‡ç‰‡ var s []int // å®šä¹‰ä¸€ä¸ªç©ºçš„æ•´å‹åˆ‡ç‰‡ s := []int{1, 2, 3} // å®šä¹‰ä¸€ä¸ªæœ‰3ä¸ªå…ƒç´ çš„æ•´å‹åˆ‡ç‰‡ï¼Œå¹¶åˆå§‹åŒ–æ•°ç»„å€¼ è®¿é—®åˆ‡ç‰‡å…ƒç´  x := s[2] // è·å–ç¬¬3ä¸ªå…ƒç´ çš„å€¼ éå†åˆ‡ç‰‡å…ƒç´  for i, v := range s { fmt.Printf(\u0026#34;s[%d] = %d\\n\u0026#34;, i, v) } åˆ‡ç‰‡æ“ä½œ å¯ä»¥ä½¿ç”¨ slice å‡½æ•°å’Œæ“ä½œç¬¦å¯¹åˆ‡ç‰‡è¿›è¡Œæ“ä½œã€‚\nslice å‡½æ•°ï¼šç”¨äºè·å–æŸä¸ªæ•°ç»„çš„ä¸€éƒ¨åˆ†ä½œä¸ºåˆ‡ç‰‡ã€‚ a := [5]int{1, 2, 3, 4, 5} s := a[1:3] // è·å–aæ•°ç»„ä¸­ç´¢å¼•ä»1åˆ°3çš„åˆ‡ç‰‡ï¼ˆä¸åŒ…å«3ï¼‰ åˆ‡ç‰‡æ“ä½œç¬¦ï¼šç”¨äºå¯¹åˆ‡ç‰‡è¿›è¡Œæ‰©å±•æˆ–ç¼©å°ã€‚ s := []int{1, 2, 3, 4, 5} s = append(s, 6) // åœ¨såˆ‡ç‰‡æœ«å°¾æ·»åŠ ä¸€ä¸ªæ–°å…ƒç´ 6 s = s[:len(s)-1] // åˆ é™¤såˆ‡ç‰‡æœ«å°¾çš„ä¸€ä¸ªå…ƒç´  æ€»ä¹‹ï¼Œæ•°ç»„å’Œåˆ‡ç‰‡éƒ½æ˜¯å­˜å‚¨æ•°æ®é›†åˆçš„æ–¹å¼ï¼Œä½†å®ƒä»¬åœ¨ä½¿ç”¨æ–¹æ³•ä¸Šå­˜åœ¨ä¸€å®šçš„å·®åˆ«ã€‚æ•°ç»„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œè€Œåˆ‡ç‰‡é•¿åº¦å¯ä»¥æ ¹æ®å®é™…æƒ…å†µåŠ¨æ€è°ƒæ•´ï¼›æ•°ç»„ä¸èƒ½ç›´æ¥è¿›è¡Œæ‰©å±•æˆ–ç¼©å°ï¼Œè€Œåˆ‡ç‰‡åˆ™å¯ä»¥é€šè¿‡ slice å‡½æ•°å’Œæ“ä½œç¬¦è¿›è¡Œæ‰©å±•æˆ–ç¼©å°ã€‚\nåœ¨ä½¿ç”¨ Go è¯­è¨€ä¸­çš„åˆ‡ç‰‡ï¼ˆsliceï¼‰æ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š åˆ›å»ºåˆ‡ç‰‡æ—¶ä¸è¦å¿˜è®° make å‡½æ•° åœ¨åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸ä¸º0çš„åˆ‡ç‰‡æ—¶ï¼Œéœ€è¦ä½¿ç”¨ make å‡½æ•°æ¥è¿›è¡Œåˆå§‹åŒ–ã€‚ä¾‹å¦‚ï¼š\ns := make([]int, 5) åˆ‡ç‰‡æ˜¯å¼•ç”¨ç±»å‹ åˆ‡ç‰‡æ˜¯å¯¹åº•å±‚æ•°ç»„çš„å¼•ç”¨ï¼Œå› æ­¤ä¿®æ”¹åˆ‡ç‰‡ä¼šå½±å“åˆ°åŸå§‹æ•°ç»„ã€‚ä¾‹å¦‚ï¼š\na := [3]int{1, 2, 3} s := a[:] s[0] = 100 fmt.Println(a) // [100 2 3] åˆ‡ç‰‡å®¹é‡å¯ä»¥è‡ªåŠ¨æ‰©å±• åˆ‡ç‰‡çš„å®¹é‡å¯ä»¥åœ¨åº•å±‚æ•°ç»„æ²¡æœ‰ç©ºé—´å­˜å‚¨æ›´å¤šå…ƒç´ æ—¶è‡ªåŠ¨æ‰©å±•ã€‚ä¾‹å¦‚ï¼š\ns := []int{1, 2, 3} s = append(s, 4, 5, 6) åˆ‡ç‰‡å¯ä»¥å…±äº«åº•å±‚æ•°ç»„ å¦‚æœå°†ä¸€ä¸ªåˆ‡ç‰‡èµ‹å€¼ç»™å¦ä¸€ä¸ªåˆ‡ç‰‡ï¼Œä¸¤ä¸ªåˆ‡ç‰‡å°†å…±äº«åŒä¸€ä¸ªåº•å±‚æ•°ç»„ã€‚å› æ­¤ï¼Œä¿®æ”¹å…¶ä¸­ä¸€ä¸ªåˆ‡ç‰‡çš„å€¼å°†ä¼šå½±å“åˆ°å¦ä¸€ä¸ªåˆ‡ç‰‡ã€‚ä¾‹å¦‚ï¼š\na := []int{1, 2, 3, 4, 5} s1 := a[1:3] s2 := a[2:4] s1[0] = 100 fmt.Println(s2) // [100 4] åˆ‡ç‰‡å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ åœ¨å‡½æ•°è°ƒç”¨æ—¶ï¼Œåˆ‡ç‰‡å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ã€‚ç”±äºåˆ‡ç‰‡æ˜¯å¼•ç”¨ç±»å‹ï¼Œå› æ­¤ä¿®æ”¹åˆ‡ç‰‡çš„å€¼ä¼šå½±å“åˆ°åŸå§‹æ•°ç»„ã€‚ä¾‹å¦‚ï¼š\nfunc updateSlice(slice []int) { slice[0] = 100 } a := []int{1, 2, 3} updateSlice(a) fmt.Println(a) // [100 2 3] æ€»ä¹‹ï¼Œåœ¨ä½¿ç”¨ Go è¯­è¨€ä¸­çš„åˆ‡ç‰‡æ—¶ï¼Œéœ€è¦æ³¨æ„å®ƒæ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œæœ‰è‡ªåŠ¨æ‰©å±•å®¹é‡çš„ç‰¹æ€§ï¼Œå¹¶ä¸”å¯ä»¥å…±äº«åº•å±‚æ•°ç»„ã€‚æ­£ç¡®åœ°ä½¿ç”¨åˆ‡ç‰‡å¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§å’Œæ•ˆç‡ã€‚\n"
},
{
	"uri": "http://blog.911015.com/grpc/03.html",
	"title": "ä¸‰ã€æ‹¦æˆªå™¨ä¸Metadata",
	"tags": null,
	"description": "gRPC æ˜¯ Google å¼€å‘çš„ä¸€æ¬¾é«˜æ€§èƒ½ã€å¼€æºçš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰æ¡†æ¶ã€‚å®ƒä½¿ç”¨ Protocol Buffers ä½œä¸ºæ¥å£å®šä¹‰è¯­è¨€ï¼ˆIDLï¼‰ï¼Œå¯ä»¥åœ¨å¤šç§ç¼–ç¨‹è¯­è¨€å’Œå¹³å°ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚",
	"content": "æ‹¦æˆªå™¨ æ ¹æ®RPCè°ƒç”¨ç±»å‹å¯ä»¥å°†gRPCæ‹¦æˆªå™¨åˆ†ä¸ºä¸¤ç§ï¼š\nä¸€å…ƒæ‹¦ æˆªå™¨(Unary Interceptor) :æ‹¦æˆªå’Œå¤„ç†ä¸€å…ƒRPCè°ƒç”¨ã€‚ æµæ‹¦æˆªå™¨(Stream Interceptor) :æ‹¦æˆªå’Œå¤„ç†æµå¼RPCè°ƒç”¨ã€‚ 1ã€æœåŠ¡ç«¯æ‹¦æˆªå™¨ æœåŠ¡ç«¯ä¸€å…ƒæ‹¦æˆªå™¨ç±»å‹ä¸º grpc.UnaryServerInterceptorï¼›æµæ‹¦æˆªå™¨ç±»å‹ä¸º StreamServerInterceptor; ä¸‹é¢å®ç°ä¸€ä¸ªæœåŠ¡ç«¯ä¸€å…ƒæ‹¦æˆªå™¨ï¼šåœ¨è°ƒç”¨æœåŠ¡å‰åå„æ‰“å°ä¸€æ¡æ—¥å¿—\nfunc HelloInterceptor() grpc.UnaryServerInterceptor { return func(ctx context.Context, req interface{}, info *grpc.UnaryServerInfo, handler grpc.UnaryHandler) (resp interface{}, err error) { log.Println(\u0026#34;Hello\u0026#34;) resp, err = handler(ctx, req) log.Println(\u0026#34;Bye bye\u0026#34;) return } } åœ¨æœåŠ¡ç«¯ä»£ç ä¸­é…ç½®æ‹¦æˆªå™¨ï¼›\nopts := []grpc.ServerOption{ grpc.UnaryInterceptor(interceptors.HelloInterceptor()), } server := grpc.NewServer(opts...) 2ã€ä½¿ç”¨å¤šä¸ªæ‹¦æˆªå™¨ gRPC é»˜è®¤åªæ”¯æŒè®¾ç½®å•ä¸ªæ‹¦æˆªå™¨ï¼Œè®¾ç½®è¿‡ä¸ªæ‹¦æˆªå™¨ä¼špainc\npanic: The unary server interceptor was already set and may not be reset.\nè®¾ç½®å¤šä¸ªæ‹¦æˆªå™¨å¯ä»¥ä½¿ç”¨ grpc-ecosystem/go-grpc-middleware\ngo get -u github.com/grpc-ecosystem/go-grpc-middleware@latest\nopts := []grpc.ServerOption{ grpc.UnaryInterceptor(grpc_middleware.ChainUnaryServer( interceptors.HelloInterceptor(), interceptors.DurationInterceptor(), )), } 3ã€å®¢æˆ·ç«¯æ‹¦æˆªå™¨ è¶…æ—¶æ§åˆ¶å®ç° è¶…æ—¶æ‹¦æˆªå™¨\nfunc TimeoutInterceptor(second) grpc.UnaryClientInterceptor { return func(ctx context.Context, method string, req, reply interface{}, cc *grpc.ClientConn, invoker grpc.UnaryInvoker, opts ...grpc.CallOption) error { if _, ok := ctx.Deadline(); !ok { timeout := 3 * time.Second var cancel context.CancelFunc ctx, cancel = context.WithTimeout(ctx, timeout) defer cancel() } return invoker(ctx, method, req, reply, cc, opts...) } } è®¾ç½®å®¢æˆ·ç«¯æ‹¦æˆªå™¨\nopt := []grpc.DialOption{ grpc.WithTransportCredentials(insecure.NewCredentials()), grpc.WithUnaryInterceptor(interceptors.TimeoutInterceptor(time.Second)), } conn, _ := grpc.Dial(\u0026#34;:\u0026#34;+port, opt...) 4ã€æœåŠ¡ç«¯è¶…æ—¶æ‹¦æˆªå™¨ æœåŠ¡ç«¯æ‹¦æˆªå™¨å¯ä»¥å‚è€ƒ go-zero ä¸­æ‹¦æˆªå™¨çš„å®ç°ä»£ç ï¼šå®šä¹‰done, paincChan ä¸¤ä¸ªchannelï¼›å•ç‹¬å¼€ä¸€ä¸ªgoroutineæ‰§è¡Œ handler é€»è¾‘å¹¶å¤„ç†panicï¼›ä¹‹åé€šè¿‡select è¯­å¥é˜»å¡ç›‘å¬ ctx.Done;done å’ŒpanicChanï¼›\nfunc UnaryTimeoutInterceptor(timeout time.Duration) grpc.UnaryServerInterceptor { return func(ctx context.Context, req interface{}, info *grpc.UnaryServerInfo, handler grpc.UnaryHandler) (interface{}, error) { var cancel context.CancelFunc if _, ok := ctx.Deadline(); !ok { ctx, cancel = context.WithTimeout(ctx, timeout) } if cancel != nil { defer cancel() } var resp interface{} var err error var lock sync.Mutex done := make(chan struct{}) // create channel with buffer size 1 to avoid goroutine leak panicChan := make(chan interface{}, 1) go func() { defer func() { if p := recover(); p != nil { // attach call stack to avoid missing in different goroutine panicChan \u0026lt;- fmt.Sprintf(\u0026#34;%+v\\n\\n%s\u0026#34;, p, strings.TrimSpace(string(debug.Stack()))) } }() lock.Lock() defer lock.Unlock() resp, err = handler(ctx, req) close(done) }() select { case p := \u0026lt;-panicChan: panic(p) case \u0026lt;-done: lock.Lock() defer lock.Unlock() return resp, err case \u0026lt;-ctx.Done(): err := ctx.Err() if err == context.Canceled { err = status.Error(codes.Canceled, err.Error()) } else if err == context.DeadlineExceeded { err = status.Error(codes.DeadlineExceeded, err.Error()) } return nil, err } } Metadata åœ¨gRPCä¸­ï¼Œmetadataå®é™…ä¸Šå°±æ˜¯-ä¸€ä¸ª mapç»“æ„:\ntype MD map [string][] string\næœ¬è´¨.ä¸Šä¹Ÿå¯ä»¥é€šè¿‡Headeræ¥ä¼ é€’æ•°æ® 1ã€è®¾ç½®metadata\nmd := metadata.New(map[string]string{ \u0026#34;auth\u0026#34;: \u0026#34;golang\u0026#34;, }) mdCtx := metadata.NewOutgoingContext(ctx, md) 2ã€è¯»å–metadata\nmd, b := metadata.FromIncomingContext(ctx) if b { log.Printf(\u0026#34;metadata:%v\u0026#34;, md) if auth, ok := md[\u0026#34;auth\u0026#34;]; ok { log.Printf(\u0026#34;auth:%v\u0026#34;, auth) } } "
},
{
	"uri": "http://blog.911015.com/wx/20230524.html",
	"title": " Go è¯­è¨€æ•°æ®ç»“æ„ï¼šMaps",
	"tags": null,
	"description": "Golangä¸­çš„Mapæ˜¯ä¸€ç§é›†åˆç±»å‹ï¼Œå®ƒç”¨äºå°†ä¸€ä¸ªé”®å€¼å¯¹æ˜ å°„åˆ°å¦ä¸€ä¸ªé”®å€¼å¯¹ã€‚è¿™äº›é”®å€¼å¯¹å¯ä»¥æ˜¯ä»»ä½•å¯æ¯”è¾ƒçš„ç±»å‹ï¼ŒåŒ…æ‹¬å†…ç½®ç±»å‹å’Œç”¨æˆ·å®šä¹‰çš„ç±»å‹ï¼Œè€Œä¸”æ¯ä¸ªé”®åªèƒ½åœ¨Mapä¸­å‡ºç°ä¸€æ¬¡ã€‚ å…·ä½“æ¥è¯´ï¼ŒMapæ˜¯ç”±ä¸€ç»„é”®å€¼å¯¹ç»„æˆçš„æ— åºé›†åˆã€‚æ¯ä¸ªé”®å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œè€Œä¸åŒçš„é”®å¯ä»¥å…³è”åˆ°ç›¸åŒçš„å€¼ã€‚",
	"content": "Golangä¸­çš„Mapæ˜¯ä¸€ç§é›†åˆç±»å‹ï¼Œå®ƒç”¨äºå°†ä¸€ä¸ªé”®å€¼å¯¹æ˜ å°„åˆ°å¦ä¸€ä¸ªé”®å€¼å¯¹ã€‚è¿™äº›é”®å€¼å¯¹å¯ä»¥æ˜¯ä»»ä½•å¯æ¯”è¾ƒçš„ç±»å‹ï¼ŒåŒ…æ‹¬å†…ç½®ç±»å‹å’Œç”¨æˆ·å®šä¹‰çš„ç±»å‹ï¼Œè€Œä¸”æ¯ä¸ªé”®åªèƒ½åœ¨Mapä¸­å‡ºç°ä¸€æ¬¡ã€‚ å…·ä½“æ¥è¯´ï¼ŒMapæ˜¯ç”±ä¸€ç»„é”®å€¼å¯¹ç»„æˆçš„æ— åºé›†åˆã€‚æ¯ä¸ªé”®å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œè€Œä¸åŒçš„é”®å¯ä»¥å…³è”åˆ°ç›¸åŒçš„å€¼ã€‚Mapé€šå¸¸ç”¨äºéœ€è¦å¿«é€ŸæŸ¥æ‰¾ç‰¹å®šé”®ä»¥è·å–ç›¸åº”å€¼çš„åœºæ™¯ï¼Œä¾‹å¦‚å­—å…¸æˆ–è®¡æ•°å™¨ã€‚\nMap åŸºæœ¬ç”¨æ³• ä»¥ä¸‹æ˜¯ä½¿ç”¨Mapçš„ä¸€äº›åŸºæœ¬ç”¨æ³•ï¼š\nåˆ›å»ºMapï¼šä½¿ç”¨makeå‡½æ•°åˆ›å»ºä¸€ä¸ªMapå¯¹è±¡ï¼ŒåŒæ—¶æŒ‡å®šé”®å’Œå€¼çš„ç±»å‹ã€‚ myMap := make(map[string]int) æ·»åŠ å…ƒç´ ï¼šé€šè¿‡é”®å€¼å¯¹çš„æ–¹å¼æ·»åŠ å…ƒç´ åˆ°Mapä¸­ã€‚ myMap[\u0026#34;apple\u0026#34;] = 10 myMap[\u0026#34;orange\u0026#34;] = 5 è®¿é—®å…ƒç´ ï¼šé€šè¿‡é”®è®¿é—®Mapä¸­çš„å…ƒç´ å€¼ã€‚ fmt.Println(myMap[\u0026#34;apple\u0026#34;]) // Output: 10 æ›´æ–°å…ƒç´ ï¼šé€šè¿‡é”®æ›´æ–°Mapä¸­çš„å…ƒç´ å€¼ã€‚ myMap[\u0026#34;apple\u0026#34;] = 15 åˆ é™¤å…ƒç´ ï¼šé€šè¿‡é”®åˆ é™¤Mapä¸­çš„å…ƒç´ ã€‚ delete(myMap, \u0026#34;orange\u0026#34;) éå†Mapï¼šä½¿ç”¨for rangeè¯­å¥éå†Mapä¸­çš„æ‰€æœ‰é”®å€¼å¯¹,éå†æ˜¯é¡ºåºæ˜¯ä¸ç¡®å®šçš„ã€‚ for key, value := range myMap { fmt.Println(key, value) } åº”ç”¨åœºæ™¯ è®¡æ•°å™¨ï¼šä½¿ç”¨Mapå¯ä»¥è½»æ¾å®ç°è®¡æ•°å™¨åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œå¦‚æœéœ€è¦ç»Ÿè®¡ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªMapæ¥ä¿å­˜æ¯ä¸ªå­—ç¬¦åŠå…¶å‡ºç°æ¬¡æ•°ã€‚ str := \u0026#34;abracadabra\u0026#34; counts := make(map[rune]int) for _, c := range str { counts[c]++ } fmt.Println(counts) // Output: map[a:5 b:2 r:2 c:1 d:1] ç¼“å­˜ï¼šMapä¹Ÿå¯ä»¥ç”¨ä½œç¼“å­˜ï¼Œä»¥åŠ å¿«åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚ä¾‹å¦‚ï¼Œåœ¨Webåº”ç”¨ç¨‹åºä¸­ï¼Œå¯ä»¥å°†ä»æ•°æ®åº“ä¸­æ£€ç´¢åˆ°çš„æ•°æ®å­˜å‚¨åœ¨Mapä¸­ï¼Œä»¥é¿å…é‡å¤æŸ¥è¯¢ç›¸åŒçš„æ•°æ®ã€‚ type User struct { ID int Name string } var cache = make(map[int]User) func getUserByID(id int) (User, error) { user, ok := cache[id] if !ok { // ä»æ•°æ®åº“ä¸­æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ user = User{ID: id, Name: \u0026#34;John Doe\u0026#34;} cache[id] = user } return user, nil } å®ç°é›†åˆï¼ˆsetï¼‰æ•°æ®ç»“æ„ï¼šåœ¨åªå…³å¿ƒkeyæ˜¯å¦å­˜åœ¨ï¼Œè€Œä¸å…³ç³»å€¼çš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨ map[T]struct{} æ¥å®ç°é›†åˆçš„æ•ˆæœ keySet := map[string]struct{}{\u0026#34;golang\u0026#34;: {}, \u0026#34;java\u0026#34;: {}} if _, ok := keySet[\u0026#34;golang\u0026#34;]; ok { fmt.Println(\u0026#34;key golang exist\u0026#34;) } else { fmt.Println(\u0026#34;key golang not exist\u0026#34;) } //output key golang exist ç»ƒä¹ ï¼šmap å®ç°WordCountã€‚å®ƒåº”è¯¥è¿”å›å­—ç¬¦ä¸²sä¸­æ¯ä¸ªâ€œå•è¯â€è®¡æ•°çš„mapã€‚wc.Testå‡½æ•°é’ˆå¯¹æ‰€æä¾›çš„å‡½æ•°è¿è¡Œä¸€ä¸ªæµ‹è¯•å¥—ä»¶ï¼Œå¹¶æ‰“å°æˆåŠŸæˆ–å¤±è´¥ã€‚ä½ å¯èƒ½ä¼šç”¨åˆ° strings.Fieldsã€‚ ä»¥ä¸‹ä»£ç ä»…ä¾›å‚è€ƒ\npackage main import ( \u0026#34;strings\u0026#34; \u0026#34;golang.org/x/tour/wc\u0026#34; ) func WordCount(s string) map[string]int { res := make(map[string]int) words := strings.Fields(s) for _, word := range words { res[word]++ } return res } func main() { wc.Test(WordCount) } æ³¨æ„äº‹é¡¹ åœ¨ä½¿ç”¨Mapæ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š\nå¹¶å‘è®¿é—®ï¼šMapä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¦‚æœå¤šä¸ªgoroutineåŒæ—¶è®¿é—®åŒä¸€ä¸ªMapï¼Œåˆ™å¯èƒ½ä¼šå¯¼è‡´æ•°æ®ç«äº‰å’Œä¸ç¡®å®šç»“æœã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨sync.Mutexç­‰æ–¹æ³•è¿›è¡ŒåŠ é”å¤„ç†ã€‚ ç©ºæŒ‡é’ˆï¼šåœ¨å£°æ˜Mapæ—¶ï¼Œå¦‚æœæ²¡æœ‰è¿›è¡Œåˆå§‹åŒ–ï¼Œåˆ™é»˜è®¤å€¼ä¸ºnilã€‚å¦‚æœå°è¯•å¯¹nil mapè¿›è¡Œæ“ä½œï¼Œå°†ä¼šäº§ç”Ÿpanicã€‚åº”è¯¥åœ¨å£°æ˜æ—¶è¿›è¡Œåˆå§‹åŒ–æˆ–è€…å…ˆåˆ¤æ–­mapæ˜¯å¦ä¸ºnilã€‚ ä¸ç¨³å®šçš„è¿­ä»£é¡ºåºï¼šMapæ˜¯æ— åºçš„ï¼Œå› æ­¤ä¸èƒ½ä¿è¯è¿­ä»£æ—¶å…ƒç´ çš„é¡ºåºã€‚å¦‚æœéœ€è¦æœ‰åºçš„é›†åˆï¼Œè¯·ä½¿ç”¨Sliceã€‚ æœªåˆå§‹åŒ–çš„å€¼ç±»å‹ï¼šå½“ä½¿ç”¨å€¼ç±»å‹ä½œä¸ºMapçš„é”®æ—¶ï¼Œå¿…é¡»ç¡®ä¿è¯¥ç±»å‹å·²ç»è¢«åˆå§‹åŒ–ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½¿ç”¨ç»“æ„ä½“ä½œä¸ºé”®ï¼Œåˆ™å¿…é¡»ç¡®ä¿ç»“æ„ä½“å†…æ‰€æœ‰å­—æ®µéƒ½è¢«åˆå§‹åŒ–ã€‚ Mapé•¿åº¦è®¡ç®—ï¼šä¸èƒ½ä¾èµ–len()å‡½æ•°æ¥è®¡ç®—Mapçš„é•¿åº¦ã€‚è¿™æ˜¯å› ä¸ºMapçš„é•¿åº¦æ˜¯åŠ¨æ€å˜åŒ–çš„ã€‚å¦‚æœéœ€è¦çŸ¥é“Mapçš„é•¿åº¦ï¼Œè¯·è‡ªå·±ç»Ÿè®¡å…ƒç´ æ•°é‡ã€‚ Mapå†…å­˜æ³„æ¼ï¼šå¦‚æœä¸å†éœ€è¦Mapä¸­çš„æŸä¸ªå…ƒç´ ï¼Œè¯·åŠæ—¶åˆ é™¤å®ƒã€‚å¦åˆ™ï¼Œå®ƒå°†å ç”¨å†…å­˜ï¼Œå¹¶å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ã€‚ Mapé”®ç±»å‹ï¼šMapçš„é”®å¯ä»¥æ˜¯æ‰€æœ‰å¯æ¯”è¾ƒçš„ç±»å‹ï¼ŒåŒ…æ‹¬åŸºæœ¬ç±»å‹ã€å­—ç¬¦ä¸²å’ŒæŒ‡é’ˆã€‚ä½†æ˜¯ï¼Œä¸å»ºè®®ä½¿ç”¨æµ®ç‚¹æ•°ä½œä¸ºé”®ï¼Œå› ä¸ºåœ¨è®¡ç®—æœºå†…éƒ¨è¡¨ç¤ºæ—¶å¯èƒ½å­˜åœ¨ç²¾åº¦é—®é¢˜ã€‚ "
},
{
	"uri": "http://blog.911015.com/beginner/04.html",
	"title": "04-å…¥é—¨å¤šæ¨¡å—å·¥ä½œåŒº",
	"tags": null,
	"description": "",
	"content": "æœ¬æ•™ç¨‹ä»‹ç»äº† Go ä¸­å¤šæ¨¡å—å·¥ä½œåŒºçš„åŸºç¡€çŸ¥è¯†ã€‚ä½¿ç”¨å¤šæ¨¡å—å·¥ä½œåŒºï¼Œæ‚¨å¯ä»¥å‘Šè¯‰ Go å‘½ä»¤æ‚¨æ­£åœ¨åŒæ—¶åœ¨å¤šä¸ªæ¨¡å—ä¸­ç¼–å†™ä»£ç ï¼Œå¹¶è½»æ¾åœ°åœ¨è¿™äº›æ¨¡å—ä¸­æ„å»ºå’Œè¿è¡Œä»£ç ã€‚ åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å°†åœ¨å…±äº«çš„å¤šæ¨¡å—å·¥ä½œåŒºä¸­åˆ›å»ºä¸¤ä¸ªæ¨¡å—ï¼Œå¯¹è¿™äº›æ¨¡å—è¿›è¡Œæ›´æ”¹ï¼Œå¹¶åœ¨æ„å»ºä¸­æŸ¥çœ‹è¿™äº›æ›´æ”¹çš„ç»“æœã€‚\nå‰æœŸå‡†å¤‡ å®‰è£… Go 1.18 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚ ä¸€ä¸ªç¼–è¾‘ä»£ç çš„å·¥å…·ã€‚ ä¸€ä¸ªå‘½ä»¤ç»ˆç«¯ã€‚ æœ¬æ•™ç¨‹éœ€è¦** go1.18** æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚ä½¿ç”¨go.dev/dlä¸­çš„é“¾æ¥ç¡®ä¿æ‚¨å·²åœ¨ Go 1.18 æˆ–æ›´é«˜ç‰ˆæœ¬ä¸­å®‰è£…äº† Go ã€‚\nåˆ›å»ºä¸€ä¸ªæ¨¡å— é¦–å…ˆï¼Œä¸ºæ‚¨è¦ç¼–å†™çš„ä»£ç åˆ›å»ºä¸€ä¸ªæ¨¡å—ã€‚ ä¸€ã€æ‰“å¼€å‘½ä»¤æç¤ºç¬¦å¹¶åˆ‡æ¢åˆ°æ‚¨çš„ä¸»ç›®å½•ã€‚\n# Linux æˆ– Macï¼š $ cd # Windowsï¼š C:\\\u0026gt; cd %HOMEPATH% æœ¬æ•™ç¨‹çš„å…¶ä½™éƒ¨åˆ†å°†æ˜¾ç¤º $ ä½œä¸ºæç¤ºç¬¦ã€‚æ‚¨ä½¿ç”¨çš„å‘½ä»¤ä¹Ÿé€‚ç”¨äº Windowsã€‚\näºŒã€åœ¨å‘½ä»¤æç¤ºç¬¦ä¸‹ï¼Œåˆ›å»ºworkspaceç›®å½•ã€‚\n$ mkdir workspace $ cd workspace ä¸‰ã€åˆå§‹åŒ–æ¨¡å—\næœ¬ç¤ºä¾‹å°†åˆ›å»ºä¸€ä¸ªä¾èµ– golang.org/x/example æ¨¡å—çš„hello æ¨¡å—ã€‚\n1ã€åˆ›å»º hello æ¨¡å—ï¼š\n$ mkdir hello $ cd hello $ go mod init example.com/hello go: creating new go.mod: module example.com/hello 2ã€ä½¿ç”¨ go get æ·»åŠ  golang.org/x/example ä¾èµ–ã€ã€‚\n$ go get golang.org/x/example 3ã€åœ¨ hello ç›®å½•ä¸‹åˆ›å»º hello.goï¼Œå†…å®¹å¦‚ä¸‹ï¼š\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;golang.org/x/example/stringutil\u0026#34; ) func main() { fmt.Println(stringutil.Reverse(\u0026#34;Hello\u0026#34;)) } 4ã€è¿è¡Œ hello ç¨‹åºï¼š\n$ go run example.com/hello olleH åˆ›å»ºå·¥ä½œåŒº åœ¨æ­¤æ­¥éª¤ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªgo.workæ–‡ä»¶æ¥æŒ‡å®šæ¨¡å—çš„å·¥ä½œåŒºã€‚\nåˆå§‹åŒ–å·¥ä½œåŒº åœ¨workspaceç›®å½•ä¸­ï¼Œè¿è¡Œï¼š\n$ go work init ./hello è¯¥go work initå‘½ä»¤ä¼šç”Ÿæˆgo.workæ–‡ä»¶ä»è€Œåˆ›å»ºä¸€ä¸ªåŒ…å« ./hello ç›®å½•çš„å·¥ä½œç©ºé—´\nè¯¥goå‘½ä»¤ç”Ÿæˆä¸€ä¸ªgo.workå¦‚ä¸‹æ‰€ç¤ºçš„æ–‡ä»¶ï¼š\ngo 1.18 use ./hello è¯¥go.workæ–‡ä»¶çš„è¯­æ³•ä¸go.mod ç±»ä¼¼ ç¬¬ä¸€è¡Œ go 1.18 å‘Šè¯‰ Go åº”ä½¿ç”¨å“ªä¸ªç‰ˆæœ¬çš„ Go ç¼–è¯‘æ–‡ä»¶ï¼Œä¸go.modæ–‡ä»¶go.mod ã€‚ ç¬¬äºŒè¡Œ use ./hello å‘Šè¯‰ Go åœ¨ç¼–è¯‘æ—¶ hello ç›®å½•çš„æ¨¡å—åº”è¯¥æ˜¯ä¸»æ¨¡å— æ‰€ä»¥åœ¨ä»»ä½•å­ç›®å½•ä¸‹çš„workspaceæ¨¡å—éƒ½ä¼šè¢«æ¿€æ´»ã€‚\nè¿è¡Œå·¥ä½œåŒºç›®å½•ä¸‹çš„ç¨‹åº åœ¨workspaceç›®å½•ä¸­ï¼Œè¿è¡Œï¼š\n$ go run example.com/hello olleH Go å‘½ä»¤åŒ…æ‹¬å·¥ä½œåŒºä¸­çš„æ‰€æœ‰æ¨¡å—ä½œä¸ºä¸»æ¨¡å—ã€‚è¿™å…è®¸æˆ‘ä»¬å¼•ç”¨æ¨¡å—ä¸­heæ¨¡å—å¤–çš„åŒ…ã€‚åœ¨æ¨¡å—æˆ–å·¥ä½œåŒºå¤–è¿è¡Œè¯¥go runå‘½ä»¤ä¼šæŠ¥é”™ï¼Œå› ä¸ºè¯¥goå‘½ä»¤ä¸çŸ¥é“è¦ä½¿ç”¨å“ªäº›æ¨¡å—ã€‚\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ¨¡å—çš„æœ¬åœ°golang.org/x/exampleæ·»åŠ åˆ°å·¥ä½œåŒºã€‚ç„¶åæˆ‘ä»¬å°†å‘stringutilåŒ…ä¸­æ·»åŠ ä¸€ä¸ªæ–°å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥ä»£æ›¿Reverse.\nä¸‹è½½å¹¶ä¿®æ”¹golang.org/x/exampleæ¨¡å— åœ¨æ­¤æ­¥éª¤ä¸­ï¼Œæˆ‘ä»¬å°†ä¸‹è½½åŒ…å«è¯¥æ¨¡å—çš„ Git å­˜å‚¨åº“çš„å‰¯æœ¬golang.org/x/exampleï¼Œå°†å…¶æ·»åŠ åˆ°å·¥ä½œåŒºï¼Œç„¶åå‘å…¶ä¸­æ·»åŠ æˆ‘ä»¬å°†åœ¨ hello ç¨‹åºä¸­ä½¿ç”¨çš„æ–°å‡½æ•°ã€‚ å…‹éš†å­˜å‚¨åº“ 1ã€åœ¨å·¥ä½œåŒºç›®å½•ä¸­ï¼Œè¿è¡Œgitå‘½ä»¤ä»¥å…‹éš†å­˜å‚¨åº“ï¼š\n$ git clone https://go.googlesource.com/example Cloning into \u0026#39;example\u0026#39;... remote: Total 165 (delta 27), reused 165 (delta 27) Receiving objects: 100% (165/165), 434.18 KiB | 1022.00 KiB/s, done. Resolving deltas: 100% (27/27), done. 2ã€å°†æ¨¡å—æ·»åŠ åˆ°å·¥ä½œåŒº\n$ go work use ./example è¯¥go work useå‘½ä»¤å°†ä¸€ä¸ªæ–°æ¨¡å—æ·»åŠ åˆ° go.work æ–‡ä»¶ä¸­ã€‚å¦‚ä¸‹ï¼š\ngo 1.18 use ( ./hello ./example ) è¯¥æ¨¡å—ç°åœ¨åŒ…æ‹¬æ¨¡å—example.com/helloå’Œgolang.org/x/exampleæ¨¡å—ã€‚ æˆ‘ä»¬å°†åœ¨æœ¬åœ°stringutilæ¨¡å—ä¸­ç¼–å†™çš„æ–°ä»£ç ï¼Œè€Œä¸æ˜¯ä½¿ç”¨go getå‘½ä»¤ä¸‹è½½çš„æ¨¡å—ç‰ˆæœ¬ã€‚\n3ã€æ·»åŠ æ–°åŠŸèƒ½ã€‚ æ·»åŠ ä¸€ä¸ªå°†å­—ç¬¦ä¸²è½¬å¤§å†™çš„æ–°å‡½æ•°åˆ°golang.org/x/example/stringutilåŒ…ä¸­ã€‚ åœ¨ workspace/example/stringutil ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªtoupper.goï¼›å†™å…¥ä¸€ä¸‹ä»£ç ï¼š\npackage stringutil import \u0026#34;unicode\u0026#34; // ToUpper uppercases all the runes in its argument string. func ToUpper(s string) string { r := []rune(s) for i := range r { r[i] = unicode.ToUpper(r[i]) } return string(r) } 4ã€ä¿®æ”¹ hello ç¨‹åºä»¥ä½¿ç”¨è¯¥å‡½æ•°ã€‚ ä¿®æ”¹å†…å®¹ä¸ºworkspace/hello/hello.goåŒ…å«ä»¥ä¸‹å†…å®¹ï¼š\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;golang.org/x/example/stringutil\u0026#34; ) func main() { fmt.Println(stringutil.ToUpper(\u0026#34;Hello\u0026#34;)) } åœ¨å·¥ä½œåŒºè¿è¡Œä»£ç  ä»å·¥ä½œåŒºç›®å½•ï¼Œè¿è¡Œ\n$ go run example.com/hello HELLO Goå‘½ä»¤åœ¨go.workæ–‡ä»¶æŒ‡å®šçš„ç›®å½•example.com/helloä¸‹æŸ¥æ‰¾å‘½ä»¤è¡ŒæŒ‡å®šçš„æ¨¡å— ï¼ŒåŒæ ·ä½¿ç”¨go.workæ–‡ä»¶è§£æå¯¼å…¥golang.org/x/example go.workå¯ä»¥æ›¿æ¢ replace æŒ‡ä»¤æ¥è·¨å¤šä¸ªæ¨¡å—å·¥ä½œã€‚ ç”±äºè¿™ä¸¤ä¸ªæ¨¡å—ä½äºåŒä¸€ä¸ªå·¥ä½œåŒºä¸­ï¼Œå› æ­¤å¾ˆå®¹æ˜“åœ¨ä¸€ä¸ªæ¨¡å—ä¸­è¿›è¡Œæ›´æ”¹å¹¶åœ¨å¦ä¸€ä¸ªæ¨¡å—ä¸­ä½¿ç”¨å®ƒã€‚\næ›´è¿›ä¸€æ­¥ ç°åœ¨ï¼Œè¦æ­£ç¡®å‘å¸ƒè¿™äº›æ¨¡å—ï¼Œæˆ‘ä»¬éœ€è¦å‘å¸ƒæ¨¡å—golang.org/x/example ï¼Œä¾‹å¦‚åœ¨v0.1.0. è¿™é€šå¸¸æ˜¯é€šè¿‡åœ¨æ¨¡å—çš„ç‰ˆæœ¬æ§åˆ¶å­˜å‚¨åº“ä¸Šæ ‡è®°æäº¤æ¥å®Œæˆçš„ã€‚ æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… æ¨¡å—å‘å¸ƒå·¥ä½œæµç¨‹æ–‡æ¡£ã€‚å‘å¸ƒå®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥åœ¨hello/go.modä¸­å¢åŠ å¯¹ golang.org/x/exampleçš„ä¾èµ–ï¼š\ncd hello go get golang.org/x/example@v0.1.0 è¿™æ ·ï¼Œè¯¥goå‘½ä»¤å°±å¯ä»¥æ­£ç¡®è§£æå·¥ä½œåŒºå¤–çš„æ¨¡å—ã€‚\näº†è§£æœ‰å…³å·¥ä½œåŒºçš„æ›´å¤šä¿¡æ¯ é™¤äº†æˆ‘ä»¬åœ¨æœ¬æ•™ç¨‹å‰é¢çœ‹åˆ°çš„go work initä¹‹å¤–ï¼Œè¯¥goå‘½ä»¤è¿˜æœ‰å‡ ä¸ªç”¨äºå¤„ç†å·¥ä½œåŒºçš„å­å‘½ä»¤ï¼š\ngo work use [-r] [dir] ï¼šå¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™ä¸ºgo.workæ–‡ä»¶æ·»åŠ ä¸€ä¸ªuse diræŒ‡ä»¤ï¼Œå¦‚æœå‚æ•°ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™åˆ é™¤è¯¥ç›®å½•ã€‚-rè¡¨ç¤ºé€’å½’åœ°æ£€æŸ¥å­ç›®å½•ã€‚ go work editï¼šç¼–è¾‘go.workæ–‡ä»¶ç±»ä¼¼äºgo mod edit go work syncï¼šå°†å·¥ä½œåŒºæ„å»ºåˆ—è¡¨ä¸­çš„ä¾èµ–é¡¹åŒæ­¥åˆ°æ¯ä¸ªå·¥ä½œåŒºæ¨¡å—ä¸­ã€‚ "
},
{
	"uri": "http://blog.911015.com/tour/04.html",
	"title": "4ã€æ–¹æ³•ä¸æ¥å£",
	"tags": null,
	"description": "æ–¹æ³•ä¸æ¥å£;Goæ²¡æœ‰ç±»ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥åœ¨ç±»å‹ä¸Šå®šä¹‰æ–¹æ³•ã€‚",
	"content": "Methods Goæ²¡æœ‰ç±»ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥åœ¨ç±»å‹ä¸Šå®šä¹‰æ–¹æ³•ã€‚ æ–¹æ³•æ˜¯ä¸€ä¸ªå…·æœ‰ç‰¹æ®Šæ¥æ”¶å™¨å‚æ•°çš„å‡½æ•°ã€‚ æ¥æ”¶å™¨å‡ºç°åœ¨è‡ªå·±çš„å‚æ•°åˆ—è¡¨ä¸­ï¼Œä½äºfuncå…³é”®å­—å’Œæ–¹æ³•åç§°ä¹‹é—´ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math\u0026#34; ) type Vertex struct { X, Y float64 } func (v Vertex) Abs() float64 { return math.Sqrt(v.X*v.X + v.Y*v.Y) } func main() { v := Vertex{3, 4} fmt.Println(v.Abs()) } åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒAbsæ–¹æ³•æœ‰ä¸€ä¸ªåä¸ºvçš„Vertexç±»å‹çš„æ¥æ”¶å™¨ã€‚ è¯·è®°ä½ï¼šæ–¹æ³•åªæ˜¯ä¸€ä¸ªå¸¦æœ‰æ¥æ”¶å™¨å‚æ•°çš„å‡½æ•°ã€‚ä¸‹é¢çš„Absæ˜¯ä½œä¸ºä¸€ä¸ªæ™®é€šå‡½æ•°ç¼–å†™çš„ï¼Œå‡½æ•°æœ¬èº«æ²¡æœ‰å˜åŒ–ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math\u0026#34; ) type Vertex struct { X, Y float64 } func Abs(v Vertex) float64 { return math.Sqrt(v.X*v.X + v.Y*v.Y) } func main() { v := Vertex{3, 4} fmt.Println(Abs(v)) } æ‚¨ä¹Ÿå¯ä»¥åœ¨éç»“æ„ç±»å‹ä¸Šå£°æ˜ä¸€ä¸ªæ–¹æ³•ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math\u0026#34; ) type MyFloat float64 func (f MyFloat) Abs() float64 { if f \u0026lt; 0 { return float64(-f) } return float64(f) } func main() { f := MyFloat(-math.Sqrt2) fmt.Println(f.Abs()) } åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°ä¸€ä¸ªå¸¦æœ‰Absæ–¹æ³•çš„æ•°å­—ç±»å‹MyFloatã€‚åªèƒ½å£°æ˜å…·æœ‰æ¥æ”¶å™¨çš„æ–¹æ³•ï¼Œè¯¥æ¥æ”¶å™¨çš„ç±»å‹ä¸è¯¥æ–¹æ³•åœ¨åŒä¸€ä¸ªåŒ…ä¸­å®šä¹‰ã€‚ä¸èƒ½ä½¿ç”¨ç±»å‹åœ¨å¦ä¸€ä¸ªåŒ…ï¼ˆåŒ…æ‹¬intç­‰å†…ç½®ç±»å‹ï¼‰ä¸­å®šä¹‰çš„æ¥æ”¶å™¨æ¥å£°æ˜æ–¹æ³•ã€‚\næŒ‡é’ˆæ¥æ”¶å™¨ å¯ä»¥ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶å™¨å£°æ˜æ–¹æ³•ã€‚è¿™æ„å‘³ç€æ¥æ”¶å™¨ç±»å‹å…·æœ‰æŸäº›ç±»å‹Tçš„æŒ‡é’ˆTã€‚ï¼ˆæ­¤å¤–ï¼ŒTæœ¬èº«ä¸èƒ½æ˜¯intä¹‹ç±»çš„æŒ‡é’ˆã€‚ï¼‰ ä¾‹å¦‚ï¼Œæ­¤å¤„çš„â€œScaleâ€æ–¹æ³•æ˜¯åœ¨â€œ*é¡¶ç‚¹â€ä¸Šå®šä¹‰çš„ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math\u0026#34; ) type Vertex struct { X, Y float64 } func (v Vertex) Abs() float64 { return math.Sqrt(v.X*v.X + v.Y*v.Y) } func (v *Vertex) Scale(f float64) { v.X = v.X * f v.Y = v.Y * f } func main() { v := Vertex{3, 4} v.Scale(10) fmt.Println(v.Abs()) } å¸¦æœ‰æŒ‡é’ˆæ¥æ”¶å™¨çš„æ–¹æ³•å¯ä»¥ä¿®æ”¹æ¥æ”¶å™¨æŒ‡å‘çš„å€¼ï¼ˆå°±åƒScaleåœ¨è¿™é‡Œæ‰€åšçš„é‚£æ ·ï¼‰ã€‚ç”±äºæ–¹æ³•é€šå¸¸éœ€è¦ä¿®æ”¹å…¶æ¥æ”¶å™¨ï¼Œå› æ­¤æŒ‡é’ˆæ¥æ”¶å™¨æ¯”å€¼æ¥æ”¶å™¨æ›´å¸¸è§ã€‚ å°è¯•ä»ç¬¬16è¡ŒScaleå‡½æ•°çš„å£°æ˜ä¸­åˆ é™¤*ï¼Œå¹¶è§‚å¯Ÿç¨‹åºçš„è¡Œä¸ºæ˜¯å¦‚ä½•å˜åŒ–çš„ã€‚ å¯¹äºå€¼æ¥æ”¶å™¨ï¼Œâ€œScaleâ€æ–¹æ³•å¯¹åŸå§‹â€œVertex â€å€¼çš„å‰¯æœ¬è¿›è¡Œæ“ä½œã€‚ï¼ˆè¿™ä¸ä»»ä½•å…¶ä»–å‡½æ•°å‚æ•°çš„è¡Œä¸ºç›¸åŒã€‚ï¼‰Scaleæ–¹æ³•å¿…é¡»æœ‰ä¸€ä¸ªæŒ‡é’ˆæ¥æ”¶å™¨æ‰èƒ½æ›´æ”¹ä¸»å‡½æ•°ä¸­å£°æ˜çš„Vertexå€¼ã€‚\næŒ‡é’ˆå’Œå‡½æ•° åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬çœ‹åˆ°Abså’ŒScaleæ–¹æ³•è¢«é‡å†™ä¸ºå‡½æ•°ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math\u0026#34; ) type Vertex struct { X, Y float64 } func Abs(v Vertex) float64 { return math.Sqrt(v.X*v.X + v.Y*v.Y) } func Scale(v *Vertex, f float64) { v.X = v.X * f v.Y = v.Y * f } func main() { v := Vertex{3, 4} Scale(\u0026amp;v, 10) fmt.Println(Abs(v)) } å†æ¬¡å°è¯•ä»ç¬¬16è¡Œåˆ é™¤*ã€‚ä½ èƒ½çœ‹åˆ°ä¸ºä»€ä¹ˆè¡Œä¸ºä¼šæ”¹å˜å—ï¼Ÿä¸ºäº†ç¼–è¯‘ç¤ºä¾‹ï¼Œæ‚¨è¿˜éœ€è¦æ›´æ”¹å“ªäº›å†…å®¹ï¼Ÿ\næ–¹æ³•å’ŒæŒ‡é’ˆé—´æ¥å¯»å€ æ¯”è¾ƒå‰ä¸¤ä¸ªç¨‹åºï¼Œæ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°å¸¦æœ‰æŒ‡é’ˆå‚æ•°çš„å‡½æ•°å¿…é¡»ä½¿ç”¨æŒ‡é’ˆï¼š\nvar v Vertex ScaleFunc(v, 5) // Compile error! ScaleFunc(\u0026amp;v, 5) // OK è€Œå…·æœ‰æŒ‡é’ˆæ¥æ”¶å™¨çš„æ–¹æ³•åœ¨è¢«è°ƒç”¨æ—¶é‡‡ç”¨å€¼æˆ–æŒ‡é’ˆä½œä¸ºæ¥æ”¶å™¨ï¼š\nvar v Vertex v.Scale(5) // OK p := \u0026amp;v p.Scale(10) // OK å¯¹äºv.Scaleï¼ˆ5ï¼‰è¯­å¥ï¼Œå³ä½¿væ˜¯ä¸€ä¸ªå€¼è€Œä¸æ˜¯æŒ‡é’ˆï¼Œä¹Ÿä¼šè‡ªåŠ¨è°ƒç”¨å¸¦æœ‰æŒ‡é’ˆæ¥æ”¶å™¨çš„æ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ºäº†æ–¹ä¾¿èµ·è§ï¼ŒGoå°†è¯­å¥v.Scaleï¼ˆ5ï¼‰è§£é‡Šä¸ºï¼ˆ\u0026amp;vï¼‰.Scaleï¼ˆ5ï¼‰ï¼Œå› ä¸ºScaleæ–¹æ³•æœ‰ä¸€ä¸ªæŒ‡é’ˆæ¥æ”¶å™¨ã€‚\npackage main import \u0026#34;fmt\u0026#34; type Vertex struct { X, Y float64 } func (v *Vertex) Scale(f float64) { v.X = v.X * f v.Y = v.Y * f } func ScaleFunc(v *Vertex, f float64) { v.X = v.X * f v.Y = v.Y * f } func main() { v := Vertex{3, 4} v.Scale(2) ScaleFunc(\u0026amp;v, 10) p := \u0026amp;Vertex{4, 3} p.Scale(3) ScaleFunc(p, 8) fmt.Println(v, p) } åè¿‡æ¥ï¼Œé‡‡ç”¨å€¼å‚æ•°çš„å‡½æ•°å¿…é¡»é‡‡ç”¨è¯¥ç‰¹å®šç±»å‹çš„å€¼ï¼š\nvar v Vertex fmt.Println(AbsFunc(v)) // OK fmt.Println(AbsFunc(\u0026amp;v)) // Compile error! è€Œå…·æœ‰å€¼æ¥æ”¶å™¨çš„æ–¹æ³•åœ¨è¢«è°ƒç”¨æ—¶å¯ä»¥é‡‡ç”¨å€¼æˆ–æŒ‡é’ˆä½œä¸ºæ¥æ”¶å™¨ï¼š\nvar v Vertex fmt.Println(v.Abs()) // OK p := \u0026amp;v fmt.Println(p.Abs()) // OK åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ–¹æ³•è°ƒç”¨p.Absï¼ˆï¼‰è¢«è§£é‡Šä¸ºï¼ˆ*pï¼‰.Absï¼ˆï¼‰ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math\u0026#34; ) type Vertex struct { X, Y float64 } func (v Vertex) Abs() float64 { return math.Sqrt(v.X*v.X + v.Y*v.Y) } func AbsFunc(v Vertex) float64 { return math.Sqrt(v.X*v.X + v.Y*v.Y) } func main() { v := Vertex{3, 4} fmt.Println(v.Abs()) fmt.Println(AbsFunc(v)) p := \u0026amp;Vertex{4, 3} fmt.Println(p.Abs()) fmt.Println(AbsFunc(*p)) } é€‰æ‹©å€¼æˆ–æŒ‡é’ˆæ¥æ”¶å™¨ ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶å™¨æœ‰ä¸¤ä¸ªåŸå› ã€‚ç¬¬ä¸€ä¸ªæ˜¯ä½¿è¯¥æ–¹æ³•å¯ä»¥ä¿®æ”¹å…¶æ¥æ”¶å™¨æŒ‡å‘çš„å€¼ã€‚ç¬¬äºŒä¸ªæ˜¯åœ¨æ–¹æ³•è°ƒç”¨æ—¶é¿å…å¤åˆ¶ã€‚å¦‚æœæ¥æ”¶å™¨æ˜¯ä¸€ä¸ªå¤§å‹ç»“æ„ä½“ï¼Œè¿™å¯èƒ½ä¼šæ›´é«˜æ•ˆã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math\u0026#34; ) type Vertex struct { X, Y float64 } func (v *Vertex) Scale(f float64) { v.X = v.X * f v.Y = v.Y * f } func (v *Vertex) Abs() float64 { return math.Sqrt(v.X*v.X + v.Y*v.Y) } func main() { v := \u0026amp;Vertex{3, 4} fmt.Printf(\u0026#34;Before scaling: %+v, Abs: %v\\n\u0026#34;, v, v.Abs()) v.Scale(5) fmt.Printf(\u0026#34;After scaling: %+v, Abs: %v\\n\u0026#34;, v, v.Abs()) } åœ¨æœ¬ä¾‹ä¸­ï¼ŒScaleå’ŒAbséƒ½æ˜¯æ¥æ”¶å™¨ç±»å‹ä¸º*Vertexçš„æ–¹æ³•ï¼Œå°½ç®¡Absæ–¹æ³•ä¸éœ€è¦ä¿®æ”¹å…¶æ¥æ”¶å™¨ã€‚ é€šå¸¸ï¼Œç»™å®šç±»å‹ä¸Šçš„æ‰€æœ‰æ–¹æ³•éƒ½åº”è¯¥å…·æœ‰å€¼æˆ–æŒ‡é’ˆæ¥æ”¶å™¨ï¼Œä½†ä¸èƒ½åŒæ—¶å…·æœ‰è¿™ä¸¤è€…ã€‚\nInterfaces æ¥å£ç±»å‹è¢«å®šä¹‰ä¸ºä¸€ç»„æ–¹æ³•ç­¾åã€‚ æ¥å£ç±»å‹çš„å€¼å¯ä»¥åŒ…å«å®ç°è¿™äº›æ–¹æ³•çš„ä»»ä½•å€¼ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math\u0026#34; ) type Abser interface { Abs() float64 } func main() { var a Abser f := MyFloat(-math.Sqrt2) v := Vertex{3, 4} a = f // a MyFloat implements Abser a = \u0026amp;v // a *Vertex implements Abser // In the following line, v is a Vertex (not *Vertex) // and does NOT implement Abser. a = v fmt.Println(a.Abs()) } type MyFloat float64 func (f MyFloat) Abs() float64 { if f \u0026lt; 0 { return float64(-f) } return float64(f) } type Vertex struct { X, Y float64 } func (v *Vertex) Abs() float64 { return math.Sqrt(v.X*v.X + v.Y*v.Y) } æ³¨æ„ï¼šç¬¬22è¡Œçš„ç¤ºä¾‹ä»£ç ä¸­æœ‰ä¸€ä¸ªé”™è¯¯ã€‚Vertexï¼ˆå€¼ç±»å‹ï¼‰ä¸å®ç°Abserï¼Œå› ä¸ºAbsæ–¹æ³•ä»…åœ¨*Vertexï¼ˆæŒ‡é’ˆç±»å‹ï¼‰ä¸Šå®šä¹‰ã€‚\næ¥å£æ˜¯éšå¼å®ç°çš„ ç±»å‹é€šè¿‡å®ç°å…¶æ–¹æ³•æ¥å®ç°æ¥å£ã€‚æ²¡æœ‰æ˜ç¡®çš„æ„å‘å£°æ˜ï¼Œä¹Ÿæ²¡æœ‰â€œimplementsâ€å…³é”®å­—ã€‚éšå¼æ¥å£å°†æ¥å£çš„å®šä¹‰ä¸å…¶å®ç°è§£è€¦ï¼Œç„¶åæ¥å£å¯ä»¥åœ¨æ²¡æœ‰é¢„å…ˆå®‰æ’çš„æƒ…å†µä¸‹å‡ºç°åœ¨ä»»ä½•åŒ…ä¸­ã€‚\npackage main import \u0026#34;fmt\u0026#34; type I interface { M() } type T struct { S string } // This method means type T implements the interface I, // but we don\u0026#39;t need to explicitly declare that it does so. func (t T) M() { fmt.Println(t.S) } func main() { var i I = T{\u0026#34;hello\u0026#34;} i.M() } æ¥å£å€¼ æ¥å£å€¼å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå€¼å’Œä¸€ä¸ªå…·ä½“ç±»å‹çš„å…ƒç»„ (value, type) æ¥å£å€¼åŒ…å«ç‰¹å®šåŸºç¡€å…·ä½“ç±»å‹çš„å€¼ã€‚å¯¹æ¥å£å€¼è°ƒç”¨æ–¹æ³•ä¼šåœ¨å…¶åŸºç¡€ç±»å‹ä¸Šæ‰§è¡Œç›¸åŒåç§°çš„æ–¹æ³•ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math\u0026#34; ) type I interface { M() } type T struct { S string } func (t *T) M() { fmt.Println(t.S) } type F float64 func (f F) M() { fmt.Println(f) } func main() { var i I i = \u0026amp;T{\u0026#34;Hello\u0026#34;} describe(i) i.M() i = F(math.Pi) describe(i) i.M() } func describe(i I) { fmt.Printf(\u0026#34;(%v, %T)\\n\u0026#34;, i, i) } åŸºæœ¬å€¼ä¸ºnilçš„æ¥å£å€¼ å¦‚æœæ¥å£å†…éƒ¨çš„å…·ä½“å€¼ä¸ºnilï¼Œé‚£ä¹ˆå°†ä½¿ç”¨nilæ¥æ”¶å™¨è°ƒç”¨è¯¥æ–¹æ³•ã€‚åœ¨æŸäº›è¯­è¨€ä¸­ï¼Œè¿™ä¼šè§¦å‘nullæŒ‡é’ˆå¼‚å¸¸ï¼Œä½†åœ¨Goä¸­ï¼Œé€šå¸¸ä¼šç¼–å†™ä¸€äº›æ–¹æ³•æ¥ä¼˜é›…åœ°å¤„ç†ä½¿ç”¨nilæ¥æ”¶å™¨è°ƒç”¨çš„æƒ…å†µï¼ˆå¦‚æœ¬ä¾‹ä¸­çš„æ–¹æ³•Mï¼‰\npackage main import \u0026#34;fmt\u0026#34; type I interface { M() } type T struct { S string } func (t *T) M() { if t == nil { fmt.Println(\u0026#34;\u0026lt;nil\u0026gt;\u0026#34;) return } fmt.Println(t.S) } func main() { var i I var t *T i = t describe(i) i.M() i = \u0026amp;T{\u0026#34;hello\u0026#34;} describe(i) i.M() } func describe(i I) { fmt.Printf(\u0026#34;(%v, %T)\\n\u0026#34;, i, i) } è¯·æ³¨æ„ï¼ŒæŒæœ‰nilå…·ä½“å€¼çš„æ¥å£å€¼æœ¬èº«å°±æ˜¯énilã€‚\nNilæ¥å£å€¼ nilæ¥å£å€¼æ—¢ä¸åŒ…å«å€¼ï¼Œä¹Ÿä¸åŒ…å«å…·ä½“ç±»å‹ã€‚åœ¨nilæ¥å£ä¸Šè°ƒç”¨æ–¹æ³•æ˜¯ä¸€ä¸ªè¿è¡Œæ—¶é”™è¯¯ï¼Œå› ä¸ºæ¥å£å…ƒç»„ä¸­æ²¡æœ‰æŒ‡ç¤ºè¦è°ƒç”¨å“ªä¸ªå…·ä½“æ–¹æ³•çš„ç±»å‹ã€‚\npackage main import \u0026#34;fmt\u0026#34; type I interface { M() } func main() { var i I describe(i) i.M() } func describe(i I) { fmt.Printf(\u0026#34;(%v, %T)\\n\u0026#34;, i, i) } ç©ºæ¥å£ æŒ‡å®šé›¶æ–¹æ³•çš„æ¥å£ç±»å‹ç§°ä¸ºç©ºæ¥å£ï¼šinterface{} ç©ºæ¥å£å¯ä»¥åŒ…å«ä»»ä½•ç±»å‹çš„å€¼ã€‚ï¼ˆæ¯ä¸ªç±»å‹è‡³å°‘å®ç°é›¶ä¸ªæ–¹æ³•ã€‚ï¼‰ ç©ºæ¥å£åœ¨ç¨‹åºå¤„ç†æœªçŸ¥ç±»å‹å€¼çš„æ—¶å€™ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œfmt.Printæ¥å—ä»»æ„æ•°é‡çš„æ¥å£ï½›ï½ç±»å‹çš„å‚æ•°ã€‚\npackage main import \u0026#34;fmt\u0026#34; func main() { var i interface{} describe(i) i = 42 describe(i) i = \u0026#34;hello\u0026#34; describe(i) } func describe(i interface{}) { fmt.Printf(\u0026#34;(%v, %T)\\n\u0026#34;, i, i) } ç±»å‹æ–­è¨€ ç±»å‹æ–­è¨€æä¾›äº†è®¿é—®æ¥å£å€¼çš„åº•å±‚å…·ä½“å€¼çš„æ–¹æ³•ã€‚\nt := i.(T) è¯¥è¯­å¥æ–­è¨€æ¥å£å€¼iåŒ…å«å…·ä½“ç±»å‹Tï¼Œå¹¶å°†åº•å±‚Tå€¼åˆ†é…ç»™å˜é‡tã€‚å¦‚æœä¸æ˜¯Tç±»å‹ï¼Œé‚£ä¹ˆè¿™ä¸ªè¯­å¥å°†å¼•å‘panicã€‚ ä¸ºäº†æµ‹è¯•æ¥å£å€¼æ˜¯å¦åŒ…å«ç‰¹å®šç±»å‹ï¼Œç±»å‹æ–­è¨€å¯ä»¥è¿”å›ä¸¤ä¸ªå€¼ï¼šåŸºç¡€å€¼å’ŒæŠ¥å‘Šæ–­è¨€æ˜¯å¦æˆåŠŸçš„å¸ƒå°”å€¼ã€‚\nt, ok := i.(T) å¦‚æœæ˜¯Tç±»å‹ï¼Œé‚£ä¹ˆtè¢«èµ‹å€¼å€¼ï¼Œokå°†ä¸ºtrue å¦‚æœä¸æ˜¯ï¼Œokå°†ä¸ºfalseï¼Œtå°†æ˜¯ç±»å‹Tçš„é›¶å€¼ï¼Œå¹¶ä¸”ä¸ä¼šå‘ç”Ÿpanicã€‚ æ³¨æ„è¿™ä¸ªè¯­æ³•å’Œä»mapçš„è¯­æ³•ä¹‹é—´çš„ç›¸ä¼¼æ€§ã€‚\npackage main import \u0026#34;fmt\u0026#34; func main() { var i interface{} = \u0026#34;hello\u0026#34; s := i.(string) fmt.Println(s) s, ok := i.(string) fmt.Println(s, ok) f, ok := i.(float64) fmt.Println(f, ok) f = i.(float64) // panic fmt.Println(f) } ç±»å‹è½¬æ¢ ç±»å‹è½¬æ¢æ˜¯ä¸€ç§å…è®¸å¤šä¸ªç±»å‹æ–­è¨€ä¸²è”çš„æ„é€ ã€‚ ç±»å‹è½¬æ¢ç±»ä¼¼äºå¸¸è§„switchè¯­å¥ï¼Œä½†ç±»å‹è½¬æ¢ä¸­çš„caseæŒ‡å®šç±»å‹ï¼ˆè€Œä¸æ˜¯å€¼ï¼‰ï¼Œå¹¶å°†è¿™äº›å€¼ä¸ç»™å®šæ¥å£å€¼æ‰€æŒæœ‰çš„å€¼çš„ç±»å‹è¿›è¡Œæ¯”è¾ƒã€‚\nswitch v := i.(type) { case T: // here v has type T case S: // here v has type S default: // no match; here v has the same type as i } ç±»å‹è½¬æ¢ä¸­çš„å£°æ˜ä¸ç±»å‹æ–­è¨€iå…·æœ‰ç›¸åŒçš„è¯­æ³• i.(T)ï¼Œä½†ç‰¹å®šç±»å‹Tè¢«å…³é”®å­— type æ‰€å–ä»£ã€‚\npackage main import \u0026#34;fmt\u0026#34; func do(i interface{}) { switch v := i.(type) { case int: fmt.Printf(\u0026#34;Twice %v is %v\\n\u0026#34;, v, v*2) case string: fmt.Printf(\u0026#34;%q is %v bytes long\\n\u0026#34;, v, len(v)) default: fmt.Printf(\u0026#34;I don\u0026#39;t know about type %T!\\n\u0026#34;, v) } } func main() { do(21) do(\u0026#34;hello\u0026#34;) do(true) } æ­¤switchè¯­å¥æµ‹è¯•æ¥å£å€¼iæ˜¯å¦æŒæœ‰Tæˆ–Sç±»å‹çš„å€¼ã€‚åœ¨Tå’ŒSçš„æ¯ç§æƒ…å†µä¸‹ï¼Œå˜é‡vå°†åˆ†åˆ«ä¸ºTæˆ–Så‹ï¼Œå¹¶æŒæœ‰iæŒæœ‰çš„å€¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ˆä¸åŒ¹é…ï¼‰ï¼Œå˜é‡vä¸iå…·æœ‰ç›¸åŒçš„æ¥å£ç±»å‹å’Œå€¼ã€‚\nStringer æ¥å£ fmtåŒ…å®šä¹‰çš„Stringeræ˜¯æœ€æ™®éçš„æ¥å£ä¹‹ä¸€ã€‚\ntype Stringer interface { String() string } Stringeræ˜¯ä¸€ç§å¯ä»¥å°†è‡ªå·±æè¿°ä¸ºå­—ç¬¦ä¸²çš„ç±»å‹ã€‚fmtåŒ…ï¼ˆä»¥åŠè®¸å¤šå…¶ä»–åŒ…ï¼‰æŸ¥æ‰¾æ­¤æ¥å£ä»¥æ‰“å°å€¼ã€‚\npackage main import \u0026#34;fmt\u0026#34; type Person struct { Name string Age int } func (p Person) String() string { return fmt.Sprintf(\u0026#34;%v (%v years)\u0026#34;, p.Name, p.Age) } func main() { a := Person{\u0026#34;Arthur Dent\u0026#34;, 42} z := Person{\u0026#34;Zaphod Beeblebrox\u0026#34;, 9001} fmt.Println(a, z) } ç»ƒä¹ ï¼šStringer ä½¿IPAddrç±»å‹å®ç°fmt.Stringerï¼Œä»¥å°†åœ°å€æ‰“å°ä¸ºç‚¹å››å…ƒç»„ã€‚ä¾‹å¦‚ï¼ŒIPAddrï½›1ï¼Œ2ï¼Œ3ï¼Œ4ï½åº”æ‰“å°ä¸ºâ€œ1.2.3.4â€ã€‚ ä»£ç ä»…ä¾›å‚è€ƒ\npackage main import \u0026#34;fmt\u0026#34; type IPAddr [4]byte // TODO: Add a \u0026#34;String() string\u0026#34; method to IPAddr. func (ip IPAddr) String() string { return fmt.Sprintf(\u0026#34;%d.%d.%d.%d\u0026#34;, ip[0], ip[1], ip[2], ip[3]) } func main() { hosts := map[string]IPAddr{ \u0026#34;loopback\u0026#34;: {127, 0, 0, 1}, \u0026#34;googleDNS\u0026#34;: {8, 8, 8, 8}, } for name, ip := range hosts { fmt.Printf(\u0026#34;%v: %v\\n\u0026#34;, name, ip) } } Errors æ¥å£ Goç¨‹åºç”¨é”™è¯¯å€¼è¡¨ç¤ºé”™è¯¯çŠ¶æ€ã€‚é”™è¯¯ç±»å‹æ˜¯ä¸€ä¸ªç±»ä¼¼äºfmt.Stringerçš„å†…ç½®æ¥å£ã€‚ï¼š\ntype error interface { Error() string } ï¼ˆä¸fmt.Stringerä¸€æ ·ï¼ŒfmtåŒ…åœ¨æ‰“å°å€¼æ—¶ä¼šæŸ¥æ‰¾erroræ¥å£ã€‚ï¼‰ å‡½æ•°é€šå¸¸è¿”å›ä¸€ä¸ªé”™è¯¯å€¼ï¼Œè°ƒç”¨ä»£ç åº”è¯¥é€šè¿‡æµ‹è¯•é”™è¯¯æ˜¯å¦ç­‰äºé›¶æ¥å¤„ç†é”™è¯¯ã€‚\ni, err := strconv.Atoi(\u0026#34;42\u0026#34;) if err != nil { fmt.Printf(\u0026#34;couldn\u0026#39;t convert number: %v\\n\u0026#34;, err) return } fmt.Println(\u0026#34;Converted integer:\u0026#34;, i) nil è¡¨ç¤ºæˆåŠŸï¼›é nil è¡¨ç¤ºå¤±è´¥ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;time\u0026#34; ) type MyError struct { When time.Time What string } func (e *MyError) Error() string { return fmt.Sprintf(\u0026#34;at %v, %s\u0026#34;, e.When, e.What) } func run() error { return \u0026amp;MyError{ time.Now(), \u0026#34;it didn\u0026#39;t work\u0026#34;, } } func main() { if err := run(); err != nil { fmt.Println(err) } } ç»ƒä¹ ï¼šerror å¤åˆ¶å‰é¢ç»ƒä¹ ä¸­çš„Sqrtå‡½æ•°ï¼Œå¹¶å¯¹å…¶è¿›è¡Œä¿®æ”¹ä»¥è¿”å›é”™è¯¯å€¼ã€‚å½“ç»™å®šè´Ÿæ•°æ—¶ï¼ŒSqrtåº”è¯¥è¿”å›ä¸€ä¸ªéé›¶é”™è¯¯å€¼ï¼Œå› ä¸ºå®ƒä¸æ”¯æŒå¤æ•°ã€‚åˆ›å»ºæ–°ç±»å‹\ntype ErrNegativeSqrt float64 å®ç°error æ¥å£\nfunc (e ErrNegativeSqrt) Error() string ä½¿å¾—ErrNegativeSqrtï¼ˆ-2ï¼‰.Errorï¼ˆï¼‰è¿”å›\u0026quot;cannot Sqrt negative number: -2\u0026quot;.ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math\u0026#34; ) type ErrNegativeSqrt float64 func (e ErrNegativeSqrt) Error() string { return fmt.Sprintf(\u0026#34;cannot Sqrt negative number: %v\u0026#34;, float64(e)) } func Sqrt(x float64) (float64, error) { if x \u0026lt; 0 { return 0, ErrNegativeSqrt(x) } var z = 1.0 var old float64 for math.Abs(old-z) \u0026gt;= 0.000001 { old = z z -= (z*z - x) / (2 * z) } return z, nil } func main() { fmt.Println(Sqrt(2)) fmt.Println(Sqrt(-2)) } Reader æ¥å£ ioåŒ…æŒ‡å®šio.Readeræ¥å£ï¼Œè¯¥æ¥å£è¡¨ç¤ºæ•°æ®æµçš„è¯»å–ç«¯ã€‚Goæ ‡å‡†åº“åŒ…å«è¯¥æ¥å£çš„è®¸å¤šå®ç°ï¼ŒåŒ…æ‹¬æ–‡ä»¶ã€ç½‘ç»œè¿æ¥ã€å‹ç¼©å™¨ã€å¯†ç ç­‰ã€‚io.Readeræ¥å£æœ‰ä¸€ä¸ªReadæ–¹æ³•ï¼š\nfunc (T) Read(b []byte) (n int, err error) Readç”¨æ•°æ®å¡«å……ç»™å®šçš„å­—èŠ‚ç‰‡ï¼Œå¹¶è¿”å›å¡«å……çš„å­—èŠ‚æ•°å’Œé”™è¯¯å€¼ã€‚å½“æµç»“æŸæ—¶ï¼Œå®ƒè¿”å›ä¸€ä¸ªio.EOFé”™è¯¯ã€‚ ç¤ºä¾‹ä»£ç åˆ›å»ºä¸€ä¸ªstrings.Readerï¼Œå¹¶ä¸€æ¬¡æ¶ˆè€—å…¶è¾“å‡ºçš„8ä¸ªå­—èŠ‚ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;io\u0026#34; \u0026#34;strings\u0026#34; ) func main() { r := strings.NewReader(\u0026#34;Hello, Reader!\u0026#34;) b := make([]byte, 8) for { n, err := r.Read(b) fmt.Printf(\u0026#34;n = %v err = %v b = %v\\n\u0026#34;, n, err, b) fmt.Printf(\u0026#34;b[:n] = %q\\n\u0026#34;, b[:n]) if err == io.EOF { break } } } ç»ƒä¹ ï¼šReader å®ç°ä¸€ä¸ªReaderç±»å‹ï¼Œè¯¥ç±»å‹å‘å‡ºASCIIå­—ç¬¦â€œaâ€çš„æ— é™æµã€‚ å‚è€ƒ\npackage main import \u0026#34;golang.org/x/tour/reader\u0026#34; type MyReader struct{} // TODO: Add a Read([]byte) (int, error) method to MyReader. func (mr MyReader) Read(b []byte) (int, error) { for i := range b { b[i] = \u0026#39;A\u0026#39; } return len(b), nil } func main() { reader.Validate(MyReader{}) } ç»ƒä¹ ï¼šrot13Reader ä¸€ç§å¸¸è§çš„æ¨¡å¼æ˜¯ä¸€ä¸ªio.Readerï¼Œå®ƒåŒ…è£…å¦ä¸€ä¸ªio.Leaderï¼Œä»¥æŸç§æ–¹å¼ä¿®æ”¹æµã€‚ä¾‹å¦‚ï¼Œgzip.NewReaderå‡½æ•°æ¥å—ä¸€ä¸ªio.Readerï¼ˆå‹ç¼©æ•°æ®æµï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ª*gzip.Readerï¼Œè¯¥å‡½æ•°è¿˜å®ç°äº†io.Readersï¼ˆè§£å‹ç¼©æ•°æ®æµï¼‰ã€‚å®ç°ä¸€ä¸ªrot13Readerï¼Œå®ƒå®ç°io.Readerå¹¶ä»io.Readersè¯»å–ï¼Œé€šè¿‡å°†rot13æ›¿æ¢å¯†ç åº”ç”¨äºæ‰€æœ‰å­—æ¯å­—ç¬¦æ¥ä¿®æ”¹æµã€‚rot13Readerç±»å‹æ˜¯ä¸ºæ‚¨æä¾›çš„ã€‚é€šè¿‡å®ç°å®ƒçš„Readæ–¹æ³•ï¼Œä½¿å®ƒæˆä¸ºä¸€ä¸ªio.Readerã€‚\npackage main import ( \u0026#34;io\u0026#34; \u0026#34;os\u0026#34; \u0026#34;strings\u0026#34; ) type rot13Reader struct { r io.Reader } func (rr *rot13Reader) Read(p []byte) (n int, err error) { for { b := make([]byte, 1024, 2048) read, err1 := rr.r.Read(b) if err1 == io.EOF { break } for i, b2 := range b[:read] { p[i] = rot13byte(b2) } n += read } return n, nil } func rot13byte(b byte) byte { s := rune(b) if s \u0026gt;= \u0026#39;a\u0026#39; \u0026amp;\u0026amp; s \u0026lt;= \u0026#39;m\u0026#39; || s \u0026gt;= \u0026#39;A\u0026#39; \u0026amp;\u0026amp; s \u0026lt;= \u0026#39;M\u0026#39; { b += 13 } if s \u0026gt;= \u0026#39;n\u0026#39; \u0026amp;\u0026amp; s \u0026lt;= \u0026#39;z\u0026#39; || s \u0026gt;= \u0026#39;N\u0026#39; \u0026amp;\u0026amp; s \u0026lt;= \u0026#39;Z\u0026#39; { b -= 13 } return b } func main() { s := strings.NewReader(\u0026#34;Lbh penpxrq gur pbqr!\u0026#34;) r := rot13Reader{s} io.Copy(os.Stdout, \u0026amp;r) } Images image åŒ…å®šä¹‰ image æ¥å£ï¼š\npackage image type Image interface { ColorModel() color.Model Bounds() Rectangle At(x, y int) color.Color } æ³¨æ„ï¼šBoundsæ–¹æ³•çš„Rectangleè¿”å›å€¼å®é™…ä¸Šæ˜¯ä¸€ä¸ªå›¾åƒã€‚Rectangleï¼Œå› ä¸ºå£°æ˜åœ¨åŒ…å›¾åƒä¸­ã€‚color.colorå’Œcolor.Modelç±»å‹ä¹Ÿæ˜¯æ¥å£ï¼Œä½†æˆ‘ä»¬å°†é€šè¿‡ä½¿ç”¨é¢„å®šä¹‰çš„å®ç°color.RGBAå’Œcolor.RGBAModelæ¥å¿½ç•¥è¿™ä¸€ç‚¹ã€‚è¿™äº›æ¥å£å’Œç±»å‹ç”± image/color åŒ…æŒ‡å®š\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;image\u0026#34; ) func main() { m := image.NewRGBA(image.Rect(0, 0, 100, 100)) fmt.Println(m.Bounds()) fmt.Println(m.At(0, 0).RGBA()) } ç»ƒä¹ ï¼šimage è¿˜è®°å¾—ä½ ä¹‹å‰å†™çš„å›¾ç‰‡ç”Ÿæˆå™¨å—ï¼Ÿè®©æˆ‘ä»¬å†å†™ä¸€ä¸ªï¼Œä½†è¿™æ¬¡å®ƒå°†è¿”å›image.imageçš„å®ç°ï¼Œè€Œä¸æ˜¯æ•°æ®åˆ‡ç‰‡ã€‚ å®šä¹‰æ‚¨è‡ªå·±çš„å›¾åƒç±»å‹ï¼Œå®ç°å¿…è¦çš„æ–¹æ³•ï¼Œç„¶åè°ƒç”¨pic.ShowImageã€‚ Boundsåº”è¯¥è¿”å›ä¸€ä¸ª image.Rectangleï¼Œç±»ä¼¼äºå›¾åƒã€‚çŸ©å½¢ï¼ˆ0ï¼Œ0ï¼Œwï¼Œhï¼‰ã€‚ ColorModelåº”è¿”å›color.RGBAModelã€‚ Atåº”è¯¥è¿”å›ä¸€ç§é¢œè‰²ï¼›æœ€åä¸€ä¸ªå›¾ç‰‡ç”Ÿæˆå™¨ä¸­çš„å€¼vå¯¹åº”äºé¢œè‰²ã€‚RGBA{vï¼Œvï¼Œ255ï¼Œ255}ã€‚\npackage main import ( \u0026#34;image\u0026#34; \u0026#34;image/color\u0026#34; \u0026#34;golang.org/x/tour/pic\u0026#34; ) type Image struct{} func (i Image) ColorModel() color.Model { return color.RGBAModel } func (i Image) Bounds() image.Rectangle { return image.Rect(0, 0, 200, 200) } func (i Image) At(x, y int) color.Color { return color.RGBA{uint8(x % 255), uint8(y % 255), 255, 255} } func main() { m := Image{} pic.ShowImage(m) } "
},
{
	"uri": "http://blog.911015.com/go-zero/04.html",
	"title": "go-zero å¾®æœåŠ¡åº”ç”¨å®è·µï¼ˆä¸€ï¼‰",
	"tags": null,
	"description": "å•ä½“åº”ç”¨å®è·µ",
	"content": "ç®€ä»‹ go-zero æ˜¯ä¸€ä¸ªé›†æˆäº†å„ç§å·¥ç¨‹å®è·µçš„ web å’Œ rpc æ¡†æ¶ã€‚é€šè¿‡å¼¹æ€§è®¾è®¡ä¿éšœäº†å¤§å¹¶å‘æœåŠ¡ç«¯çš„ç¨³å®šæ€§ï¼Œç»å—äº†å……åˆ†çš„å®æˆ˜æ£€éªŒã€‚\næœ¬èŠ‚å°†ç”¨go-zero å¼€å‘ä¸€ä¸ªç”¨æˆ·æœåŠ¡ï¼›ä¸»è¦åŒ…æ‹¬æ³¨å†Œã€ç™»å½•ã€ç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢åŠŸèƒ½\nåˆå§‹åŒ–é¡¹ç›® //åˆ›å»ºç›®å½• madir project \u0026amp;\u0026amp; cd project //åˆå§‹åŒ–é¡¹ç›® go mod init project ç”¨æˆ·æœåŠ¡ 0ã€ç¯å¢ƒå‡†å¤‡ protoc \u0026amp; protoc-gen-goå®‰è£…\nprotocæ˜¯ä¸€æ¬¾ç”¨C++ç¼–å†™çš„å·¥å…·ï¼Œå…¶å¯ä»¥å°†protoæ–‡ä»¶ç¿»è¯‘ä¸ºæŒ‡å®šè¯­è¨€çš„ä»£ç ã€‚åœ¨go-zeroçš„å¾®æœåŠ¡ä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨grpcè¿›è¡ŒæœåŠ¡é—´çš„é€šä¿¡ï¼Œè€Œgrpcçš„ç¼–å†™å°±éœ€è¦ç”¨åˆ°protocå’Œç¿»è¯‘æˆgoè¯­è¨€rpc stubä»£ç çš„æ’ä»¶protoc-gen-goã€‚\n1ã€åˆ›å»ºproto æ–‡ä»¶ user/rpc/user.proto\nsyntax = \u0026#34;proto3\u0026#34;; package user; option go_package = \u0026#34;./user\u0026#34;; message RegisterRequest { string Name = 1; int64 Gender = 2; string Email = 3; string Password = 4; } message RegisterResponse { int64 Id = 1; string Name = 2; int64 Gender = 3; string Email = 4; } message LoginRequest { string Email = 1; string Password = 2; } message LoginResponse { int64 Id = 1; string Name = 2; int64 Gender = 3; string Email = 4; } message UserInfoRequest { int64 Id = 1; } message UserInfoResponse { int64 Id = 1; string Name = 2; int64 Gender = 3; string Email = 4; } service User { rpc Register(RegisterRequest) returns(RegisterResponse); rpc Login(LoginRequest) returns(LoginResponse); rpc UserInfo(UserInfoRequest) returns(UserInfoResponse); } 2ã€åˆ›å»º user/generate.go ä¸ºäº†æ–¹ä¾¿å¿«é€Ÿæ‰§è¡Œ goctl ç›¸å…³å‘½ä»¤ï¼Œåˆ›å»ºgenerate.go æ–‡ä»¶ å†™å…¥ç”Ÿæˆå‘½ä»¤\npackage user //Rpc //go:generate goctl rpc protoc ./rpc/user.proto --go_out=./rpc/types --go-grpc_out=./rpc/types --zrpc_out=./rpc/ //go:generate goctl model mysql ddl -src ./model/user.sql -dir ./model -c //go:generate goctl api go -api ./api/user.api -dir ./api æ‰§è¡Œ goctl rpc protoc å‘½ä»¤ç”Ÿæˆä»£ç ï¼›ä»£ç ç›®å½•å¦‚ä¸‹\nâ”€â”€rpc â”œâ”€etc â”œâ”€internal â”‚ â”œâ”€config â”‚ â”œâ”€logic â”‚ â”œâ”€server â”‚ â””â”€svc â”œâ”€types â”‚ â””â”€user â””â”€user 3ã€åˆ›å»ºmodel/user.sql å¹¶æ‰§è¡Œ å‘½ä»¤\ngoctl model mysql ddl -src ./model/user.sql -dir ./model -c\nCREATE TABLE `user` ( `id` bigint unsigned NOT NULL AUTO_INCREMENT, `name` varchar(255) NOT NULL DEFAULT \u0026#39;\u0026#39; COMMENT \u0026#39;ç”¨æˆ·å§“å\u0026#39;, `gender` tinyint(3) unsigned NOT NULL DEFAULT \u0026#39;0\u0026#39; COMMENT \u0026#39;ç”¨æˆ·æ€§åˆ«\u0026#39;, `email` varchar(255) NOT NULL DEFAULT \u0026#39;\u0026#39; COMMENT \u0026#39;ç”¨æˆ·é‚®ç®±\u0026#39;, `password` varchar(255) NOT NULL DEFAULT \u0026#39;\u0026#39; COMMENT \u0026#39;ç”¨æˆ·å¯†ç \u0026#39;, `create_time` timestamp NULL DEFAULT CURRENT_TIMESTAMP, `update_time` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, PRIMARY KEY (`id`), UNIQUE KEY `idx_email_unique` (`email`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4; 4ã€æ³¨å†Œé€»è¾‘å¼€å‘ user/rpc/internal/logic/registerlogic.go\nfunc (l *RegisterLogic) Register(in *user.RegisterRequest) (*user.RegisterResponse, error) { _, err := l.svcCtx.UserModel.FindOneByEmail(l.ctx, in.Email) if err == nil { return nil, status.Error(100, \u0026#34;è¯¥é‚®ç®±è¢«å·²æ³¨å†Œ\u0026#34;) } if err != model.ErrNotFound { return nil, status.Error(500, err.Error()) } newUser := model.User{ Name: in.Name, Gender: in.Gender, Email: in.Email, Password: cryptx.PasswordEncrypt(l.svcCtx.Config.Salt, in.Password), } res, err := l.svcCtx.UserModel.Insert(l.ctx, \u0026amp;newUser) if err != nil { return nil, status.Error(500, err.Error()) } newUser.Id, err = res.LastInsertId() if err != nil { return nil, status.Error(500, err.Error()) } return \u0026amp;user.RegisterResponse{ Id: newUser.Id, Name: newUser.Name, Gender: newUser.Gender, Email: newUser.Email, }, nil } å…¶ä¸­å¯†ç éœ€è¦åŠ å¯†å­˜å‚¨ï¼ŒåŠ å¯†æ–¹æ³•å®ç°ï¼šuser/common/cryptx/crypt.go\nfunc PasswordEncrypt(salt, password string) string { dk, _ := scrypt.Key([]byte(password), []byte(salt), 32768, 8, 1, 32) return fmt.Sprintf(\u0026#34;%x\u0026#34;, string(dk)) } 5ã€ç™»å½•é€»è¾‘å¼€å‘ï¼šuser/rpc/internal/logic/loginlogic.go\nfunc (l *LoginLogic) Login(in *user.LoginRequest) (*user.LoginResponse, error) { res, err := l.svcCtx.UserModel.FindOneByEmail(l.ctx, in.Email) if err != nil { if err == model.ErrNotFound { return nil, status.Error(100, \u0026#34;ç”¨æˆ·ä¸å­˜åœ¨\u0026#34;) } return nil, status.Error(500, err.Error()) } password := cryptx.PasswordEncrypt(l.svcCtx.Config.Salt, in.Password) if password != res.Password { return nil, status.Error(100, \u0026#34;å¯†ç é”™è¯¯\u0026#34;) } return \u0026amp;user.LoginResponse{ Id: res.Id, Name: res.Name, Gender: res.Gender, Email: res.Email, }, nil } 6ã€æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼šuser/rpc/internal/logic/userinfologic.go\nfunc (l *UserInfoLogic) UserInfo(in *user.UserInfoRequest) (*user.UserInfoResponse, error) { // æŸ¥è¯¢ç”¨æˆ·æ˜¯å¦å­˜åœ¨ res, err := l.svcCtx.UserModel.FindOne(l.ctx, in.Id) if err != nil { if err == model.ErrNotFound { return nil, status.Error(100, \u0026#34;ç”¨æˆ·ä¸å­˜åœ¨\u0026#34;) } return nil, status.Error(500, err.Error()) } return \u0026amp;user.UserInfoResponse{ Id: res.Id, Name: res.Name, Gender: res.Gender, Email: res.Email, }, nil } 7ã€‚å¯åŠ¨æµ‹è¯• go run user.go -f etc/user.yaml\n\u0026gt; grpcurl -plaintext 127.0.0.1:8080 list grpc.health.v1.Health grpc.reflection.v1alpha.ServerReflection user.User \u0026gt; grpcurl -plaintext 127.0.0.1:8080 list user.User user.User.Login user.User.Register user.User.UserInfo grpcurl -plaintext -d \u0026#39;{\u0026#34;Name\u0026#34;:\u0026#34;gopher\u0026#34;,\u0026#34;Gender\u0026#34;:\u0026#34;1\u0026#34;,\u0026#34;Email\u0026#34;:\u0026#34;123@qq.com\u0026#34;,\u0026#34;Password\u0026#34;:\u0026#34;Password\u0026#34;}\u0026#39; \\ 127.0.0.1:8080 user.User/Register æµ‹è¯•ç”¨åˆ°äº†grpcurl éœ€è¦é…ç½® Mode: dev æˆ–test å¯ä»¥çœ‹åˆ°user.go ä¸­Modeä¸ºdevæˆ–testæ˜¯å¢åŠ äº†æ³¨å†Œåå°„æœåŠ¡ä»£ç \ns := zrpc.MustNewServer(c.RpcServerConf, func(grpcServer *grpc.Server) { user.RegisterUserServer(grpcServer, svr) if c.Mode == service.DevMode || c.Mode == service.TestMode { reflection.Register(grpcServer) } }) "
},
{
	"uri": "http://blog.911015.com/grpc/04.html",
	"title": "å››ã€æœåŠ¡æ³¨å†Œä¸å‘ç°",
	"tags": null,
	"description": "gRPC æ˜¯ Google å¼€å‘çš„ä¸€æ¬¾é«˜æ€§èƒ½ã€å¼€æºçš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰æ¡†æ¶ã€‚å®ƒä½¿ç”¨ Protocol Buffers ä½œä¸ºæ¥å£å®šä¹‰è¯­è¨€ï¼ˆIDLï¼‰ï¼Œå¯ä»¥åœ¨å¤šç§ç¼–ç¨‹è¯­è¨€å’Œå¹³å°ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚",
	"content": "ç¯å¢ƒä¾èµ– å®‰è£…å¹¶ä¸”å¯åŠ¨etcd æŒ‰ç…§etcd SDK go get go.etcd.io/etcd/client/v3@v3.5.4 go get google.golang.org/grpc@v1.48.0\næ—§ç‰ˆæœ¬grpcä¸etcdå¯èƒ½å­˜åœ¨ä¸å…¼å®¹é—®é¢˜ï¼Œå»ºè®®ä½¿ç”¨æœ€æ–°å…¼å®¹ç‰ˆæœ¬\næœåŠ¡æ³¨å†Œä¸å‘ç° å®ç°æ€è·¯ï¼šæœåŠ¡ç«¯å¯åŠ¨æœåŠ¡æ—¶å°†è‡ªå·±çš„æœåŠ¡ä¿¡æ¯å¦‚IPã€ç«¯å£ã€ç‰ˆæœ¬ç­‰ä¿¡æ¯æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒï¼ˆæ­¤å¤„ä¸ºETCDï¼‰ï¼Œå®¢æˆ·ç«¯åœ¨è¿›è¡ŒæœåŠ¡è°ƒç”¨æ—¶ä¼šä»¥çº¦å®šå¥½çš„æœåŠ¡ååˆ°æ³¨å†Œä¸­å¿ƒæŸ¥è¯¢ï¼Œå‘ç°å…·ä½“å¯ä»¥è°ƒç”¨çš„æœåŠ¡ã€‚ æœåŠ¡ç«¯å®ç°ï¼š\nfunc init() { flag.StringVar(\u0026amp;port, \u0026#34;p\u0026#34;, \u0026#34;8000\u0026#34;, \u0026#34;å¯åŠ¨ç«¯å£å·\u0026#34;) flag.Parse() } func main() { server := grpc.NewServer() discover.RegisterDiscoverDemoServer(server, \u0026amp;DiscoverDemo{}) reflection.Register(server) taget := fmt.Sprintf(\u0026#34;grpc-demo/grpc/%s\u0026#34;, types.SERVER_NAME) client, err := etcd3.New(etcd3.Config{ Endpoints: []string{\u0026#34;http://127.0.0.1:2379\u0026#34;}, }) if err != nil { panic(err) } addr := \u0026#34;127.0.0.1:\u0026#34;+port err = register.EtcdAdd(client, taget,addr) if err != nil { return } lis, _ := net.Listen(\u0026#34;tcp\u0026#34;, addr) server.Serve(lis) } register.EtcdAdd æ–¹æ³•å®ç°\nfunc EtcdAdd(c *clientv3.Client, service, addr string) error { em, _ := endpoints.NewManager(c, service) list, _ := em.List(c.Ctx()) fmt.Println(list) return em.AddEndpoint(c.Ctx(), service+\u0026#34;/\u0026#34;+addr, endpoints.Endpoint{Addr: addr}) } æ­¤æ—¶å¯åŠ¨æœåŠ¡\ngo run server.go -p 8001 go run server.go -p 8002\nå¯ä»¥é€šè¿‡ etcdctl å‘½ä»¤æŸ¥çœ‹åˆ°æ³¨å†Œä¿¡æ¯ï¼š å®¢æˆ·ç«¯å®ç°ï¼š\nfunc main() { cli, _ := clientv3.NewFromURL(\u0026#34;http://127.0.0.1:2379\u0026#34;) taget := \u0026#34;grpc-demo/grpc/discover-demo\u0026#34; n := 0 for { conn, err := register.EtcdDial(cli, taget) if err != nil { panic(err) } defer conn.Close() client := discover.NewDiscoverDemoClient(conn) reply, err := client.Discover(context.Background(), \u0026amp;discover.Request{Name: \u0026#34;DDDD\u0026#34;}) if err != nil { panic(err) } fmt.Printf(\u0026#34;%d: %v \\n\u0026#34;, n, reply) n++ time.Sleep(time.Second) } } //register.EtcdDial func EtcdDial(c *clientv3.Client, service string) (*grpc.ClientConn, error) { etcdResolver, err := resolver.NewBuilder(c) if err != nil { return nil, err } opts := []grpc.DialOption{ grpc.WithTransportCredentials(insecure.NewCredentials()), grpc.WithResolvers(etcdResolver), } return grpc.Dial(\u0026#34;etcd:///\u0026#34;+service, opts...) } å¯åŠ¨å®¢æˆ·ç«¯\n0: content:\u0026ldquo;request content from8001 =\u0026gt; DDDD\u0026rdquo; 1: content:\u0026ldquo;request content from8001 =\u0026gt; DDDD\u0026rdquo; 2: content:\u0026ldquo;request content from8001 =\u0026gt; DDDD\u0026rdquo; 3: content:\u0026ldquo;request content from8001 =\u0026gt; DDDD\u0026rdquo; 4: content:\u0026ldquo;request content from8002 =\u0026gt; DDDD\u0026rdquo; 5: content:\u0026ldquo;request content from8001 =\u0026gt; DDDD\u0026rdquo;\nè‡³æ­¤æˆ‘ä»¬å®ç°äº†æœåŠ¡ç«¯çš„æ³¨å†Œï¼Œä½†åœæ‰æœåŠ¡åä¼šå‘ç°etcdä¸­çš„æ³¨å†Œä¿¡æ¯å¹¶æ²¡æœ‰æ³¨é”€ï¼›å®é™…æœåŠ¡ç«¯è¿˜åº”è¯¥å®ç°æœåŠ¡çš„å®šæœŸæ£€æµ‹ä»¥åŠä¸»åŠ¨ä¸‹çº¿åŠŸèƒ½ï¼› æœåŠ¡åœæ­¢æ˜¯ä¸»åŠ¨ä¸‹çº¿ï¼š\n// server.go go server.Serve(lis) quit := make(chan os.Signal) signal.Notify(quit, syscall.SIGINT, syscall.SIGTERM) \u0026lt;-quit log.Println(\u0026#34;Shotdown Server ...\u0026#34;) _ = register.EtcdDelete(client, taget, addr) //register.EtcdDelete func EtcdDelete(c *clientv3.Client, service, addr string) error { em, _ := endpoints.NewManager(c, service) return em.DeleteEndpoint(c.Ctx(), service+\u0026#34;/\u0026#34;+addr) } åŒæ—¶å¯ä»¥é€šè¿‡ETCDè®¾ç½®ç§ŸæœŸï¼Œå’Œå®šæ—¶æ›´æ–°å®ç°å®šæ—¶æ£€æŸ¥å’Œå¼‚å¸¸è‡ªåŠ¨ä¸‹çº¿\nfunc EtcdKeepAlive(c *clientv3.Client, service, addr string, ttl int64) error { target := service + \u0026#34;/\u0026#34; + addr go func() { ticker := time.NewTicker(time.Second * 10) for { grant, err := c.Grant(c.Ctx(), ttl) if err != nil { log.Println(err) } em, _ := endpoints.NewManager(c, service) update := endpoints.NewAddUpdateOpts(target, endpoints.Endpoint{Addr: addr}, clientv3.WithLease(grant.ID)) err = em.Update(c.Ctx(), []*endpoints.UpdateWithOpts{update}) if err != nil { log.Println(err) } log.Println(\u0026#34;update\u0026#34;) select { case \u0026lt;-stopSignal: return case \u0026lt;-ticker.C: } } }() return nil } func EtcdDelete(c *clientv3.Client, service, addr string) error { close(stopSignal) em, _ := endpoints.NewManager(c, service) return em.DeleteEndpoint(c.Ctx(), service+\u0026#34;/\u0026#34;+addr) } Reference grpc-load-balancing\n"
},
{
	"uri": "http://blog.911015.com/wx/20230525.html",
	"title": " Go è¯­è¨€æ•°æ®ç»“æ„ï¼šç»“æ„ä½“",
	"tags": null,
	"description": "Goè¯­è¨€ä¸­ï¼Œç»“æ„ä½“æ˜¯ä¸€ç§ç”¨æˆ·è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹ï¼Œç”¨äºå­˜å‚¨ä¸åŒæ•°æ®ç±»å‹çš„é›†åˆ",
	"content": "æŒ‡é’ˆ Goæä¾›äº†æŒ‡é’ˆç±»å‹ã€‚æŒ‡é’ˆä¿å­˜çš„æ˜¯ä¸€ä¸ªå€¼çš„å†…å­˜åœ°å€ã€‚ä½†æ˜¯Goæ²¡æœ‰æŒ‡é’ˆè¿ç®—ã€‚ ç±»å‹*Tæ˜¯æŒ‡å‘Tå€¼çš„æŒ‡é’ˆã€‚å®ƒçš„é›¶å€¼ä¸ºnilã€‚\nvar p *int *\u0026amp; è¿ç®—ç¬¦ç”ŸæˆæŒ‡å‘å…¶æ“ä½œæ•°çš„æŒ‡é’ˆã€‚ **è¿ç®—ç¬¦è¡¨ç¤ºæŒ‡é’ˆçš„åŸºæœ¬å€¼ã€‚\ni := 42 p = \u0026amp;i fmt.Println(*p) // read i through the pointer p *p = 21 // set i through the pointer p ç»“æ„ä½“ï¼ˆStructsï¼‰ Goè¯­è¨€ä¸­ï¼Œç»“æ„ä½“æ˜¯ä¸€ç§ç”¨æˆ·è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹ï¼Œç”¨äºå­˜å‚¨ä¸åŒæ•°æ®ç±»å‹çš„é›†åˆ ã€‚ ä½¿ç”¨ç‚¹(.)è®¿é—®ç»“æ„å­—æ®µã€‚ åœ¨ç»“æ„ä½“ä¸­ï¼Œå­—æ®µé¦–å­—æ¯çš„å¤§å°å†™å†³å®šäº†è¯¥å­—æ®µçš„å¯è§æ€§ã€‚ å®šä¹‰ç»“æ„ä½“ ä¸€ä¸ªç»“æ„ä½“åŒ…å«0åˆ°Nä¸ªå­—æ®µï¼ˆFieldï¼‰ï¼Œæ¯ä¸ªå­—æ®µç”±å­—æ®µåå’Œç±»å‹æ„æˆï¼›å®šä¹‰ä¸€ä¸ªç»“æ„ä½“çš„ä¸€èˆ¬æ–¹å¼å¦‚ä¸‹ï¼Œ\ntype T struct { field1 type1 field2 type2 ... } å¦‚æœä¸ªå­—æ®µç±»å‹ç›¸åŒä¹Ÿå¯ä»¥ç®€å†™æˆ :\ntype T struct {X,Y int} åˆ›å»ºç»“æ„ä½“ å‡è®¾æˆ‘ä»¬å·²ç»å®šä¹‰äº†è¿™æ ·ä¸€ä¸ªç»“æ„ä½“ï¼š\ntype Vertex struct { X int Y int } å¦‚ä½•ä½¿ç”¨è¿™ä¸ªç»“æ„ä½“å‘¢ï¼Ÿåˆ›å»ºä¸€ä¸ªç»“æ„ä½“å˜é‡å¸¸ç”¨çš„æ–¹æ³•æœ‰ï¼š\nå®šä¹‰ç»“æ„ä½“ç±»å‹å˜é‡ var v1 Vertex v1.X = 1 v1.Y = 2 fmt.Println(v1) // è¾“å‡º {1 2} å®šä¹‰å˜é‡å¹¶èµ‹å€¼ ï¼ˆå¯ä»¥åªæŒ‡å®šéƒ¨åˆ†å­—æ®µçš„å€¼ï¼ŒæœªæŒ‡å®šçš„å­—æ®µé»˜è®¤ä¸ºè¯¥å­—æ®µç±»å‹çš„é›¶å€¼ï¼‰ v1 := Vertex{X:1,Y:2} v2 := Vertex{3,4} // ä¹Ÿå¯ä»¥ä¸æ˜¾ç¤ºå­—æ®µåï¼ŒæŒ‰å­—æ®µçš„é¡ºåºè¿›è¡Œèµ‹å€¼ fmt.Println(v1,v2,v3) // è¾“å‡º {1 2} {3 4} ä¹Ÿå¯ä»¥ä¸æ˜¾ç¤ºå­—æ®µåï¼Œç›´æ¥æŒ‰å­—æ®µçš„é¡ºåºè¿›è¡Œèµ‹å€¼ï¼ˆå¦‚v2ï¼‰ã€‚ä½†è¿™ç§æ–¹å¼å¯è¯»æ€§ä¼šå·®ä¸€äº›ï¼›\nç»“æ„ä½“æŒ‡é’ˆ å¯ä»¥é€šè¿‡ç»“æ„æŒ‡é’ˆè®¿é—®ç»“æ„å­—æ®µã€‚ï¼ˆ\u0026amp;è¿”å›ä¸€ä¸ªæŒ‡å‘ç»“æ„å€¼çš„æŒ‡é’ˆï¼‰\nv := Vertex{1, 2} p := \u0026amp;v p.X = 1e9 fmt.Println(v) //output {1000000000 2} å½“æˆ‘ä»¬é€šè¿‡ç»“æ„æŒ‡é’ˆpè®¿é—®ç»“æ„çš„å­—æ®µXï¼Œå¯ä»¥è¿™æ ·å†™ï¼ˆ*pï¼‰.Xã€‚ç„¶è€Œï¼Œè¿™ç§è¡¨ç¤ºæ³•å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥Goè¯­è¨€å…è®¸åªå†™p.Xï¼Œè€Œä¸æ˜¾å¼è§£å¼•ç”¨ã€‚\nStructs ç­‰äº Class å—ï¼Ÿ Goè¯­è¨€ä¸­æ²¡æœ‰ç±»çš„æ¦‚å¿µï¼Œè€Œæ˜¯æä¾›äº†ç»“æ„ä½“,ç»“æ„ä½“ä¸­å¯ä»¥æ·»åŠ æ–¹æ³•ï¼›è¿™ä¸€ç‚¹ä¸ç±»é¢‡ä¸ºç›¸ä¼¼ï¼›ä½†æ˜¯Goä¸­çš„ç»“æ„ä½“æ²¡æœ‰ç»§æ‰¿çš„æ¦‚å¿µï¼›ä»¥è‡³äºæœ‰äººé—®ï¼šIs Go an object-oriented language?ï¼ˆGoæ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„è¯­è¨€å—ï¼‰ æˆ‘ä»¬çœ‹ä¸€ä¸‹å®˜æ–¹çš„å›ç­”ï¼š å¯ä»¥è¯´æ˜¯ï¼Œä¹Ÿå¯ä»¥è¯´ä¸æ˜¯ã€‚è™½ç„¶ Go æœ‰ç±»å‹å’Œæ–¹æ³•ï¼Œæ”¯æŒé¢å‘å¯¹è±¡çš„ç¼–ç¨‹é£æ ¼ï¼Œä½†å´æ²¡æœ‰ç±»å‹çš„å±‚æ¬¡ç»“æ„ã€‚Go ä¸­çš„â€œæ¥å£â€æ¦‚å¿µæä¾›äº†ä¸€ç§ä¸ä¼—ä¸åŒçš„æ–¹å¼ï¼Œæˆ‘ä»¬è®¤ä¸ºè¿™ç§æ–¹å¼æ›´æ˜“äºä½¿ç”¨ï¼Œä¹Ÿæ›´ä¸ºé€šç”¨ã€‚Go ä¹Ÿå¯ä»¥å°†ç»“æ„ä½“åµŒå¥—ä½¿ç”¨ï¼Œè¿™ä¸å­ç±»åŒ–ï¼ˆSubclassingï¼‰ç±»ä¼¼ï¼Œä½†å¹¶ä¸å®Œå…¨ç›¸åŒã€‚æ­¤å¤–ï¼ŒGo æä¾›çš„ç‰¹æ€§æ¯” C++ æˆ– Java æ›´ä¸ºé€šç”¨ï¼šå­ç±»å¯ä»¥ç”±ä»»ä½•ç±»å‹çš„æ•°æ®æ¥å®šä¹‰ï¼Œç”šè‡³æ˜¯å†…å»ºç±»å‹ï¼ˆå¦‚ç®€å•çš„â€œæœªè£…ç®±çš„â€æ•´å‹ï¼‰ã€‚è¿™åœ¨ç»“æ„ä½“ï¼ˆç±»ï¼‰ä¸­æ²¡æœ‰å—åˆ°é™åˆ¶ã€‚ æ­¤å¤–ï¼Œç”±äºç¼ºä¹ç±»å‹å±‚æ¬¡ç»“æ„ï¼ŒGoä¸­çš„â€œå¯¹è±¡â€æ„Ÿè§‰æ¯”C++æˆ–Javaç­‰è¯­è¨€ä¸­çš„â€œå¯¹è±¡â€è½»é‡å¾—å¤šã€‚\nå› æ­¤åœ¨ä½¿ç”¨Goè¯­è¨€çš„ç»“æ„ä½“æ—¶éœ€è¦ç”¨Goçš„æ€ç»´æ–¹å¼å»ç¼–å†™ï¼›æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š\ntype Vertex struct { X int Y int } var v1 Vertex fmt.Println(v1) // è¾“å‡º {0 0} å¦‚æœæŸç±»å‹çš„é›¶å€¼ä¸å¯ç”¨ï¼Œéœ€è¦ç¨‹åºå‘˜æ¥éšè—è¯¥ç±»å‹ï¼Œé¿å…ä»å…¶ä»–åŒ…ç›´æ¥è®¿é—®ã€‚å¹¶ä¸”æä¾›ä¸€ä¸ªNew å‡½æ•°è®©è°ƒç”¨è€…æŒ‰ç…§è¦æ±‚åˆå§‹åŒ–ï¼Œä¾‹å¦‚ï¼š\ntype vertex struct { x int y int } func New(x,y int) vertex { return vertex{x:x,y:y} } func(v vertex) Mul() int { return v.x*v.y } è°ƒç”¨è€…éœ€è¦è¿™æ ·ä½¿ç”¨ï¼š\nv := New(10,10) m := v.Mul() fmt.Println(m) æ¬¢è¿å…³æ³¨\n"
},
{
	"uri": "http://blog.911015.com/tour/05.html",
	"title": "5ã€æ³›å‹",
	"tags": null,
	"description": "Goæ”¯æŒä½¿ç”¨ç±»å‹å‚æ•°è¿›è¡Œæ³›å‹ç¼–ç¨‹ã€‚æœ¬è¯¾å±•ç¤ºäº†åœ¨ä»£ç ä¸­ä½¿ç”¨æ³›å‹çš„ä¸€äº›ç¤ºä¾‹ã€‚",
	"content": " Goæ”¯æŒä½¿ç”¨ç±»å‹å‚æ•°è¿›è¡Œæ³›å‹ç¼–ç¨‹ã€‚æœ¬è¯¾å±•ç¤ºäº†åœ¨ä»£ç ä¸­ä½¿ç”¨æ³›å‹çš„ä¸€äº›ç¤ºä¾‹ã€‚\nç±»å‹å‚æ•° Goå‡½æ•°å¯ä»¥ä½¿ç”¨ç±»å‹å‚æ•°è®©å‡½æ•°æ”¯æŒå¤šä¸ªç±»å‹ã€‚å‡½æ•°çš„ç±»å‹å‚æ•°ç”¨ä¸­æ‹¬å·åŒ…è£¹ï¼Œä½äºå‡½æ•°çš„å‚æ•°ä¹‹å‰ã€‚\nfunc Index[T comparable](s []T, x T) int è¿™ä¸ªå£°æ˜æ„å‘³ç€sæ˜¯ä»»ä½•ç±»å‹Tçš„ä¸€ä¸ªåˆ‡ç‰‡ï¼Œå®ƒæ»¡è¶³comparableå†…ç½®çº¦æŸã€‚xä¹Ÿæ˜¯ç›¸åŒç±»å‹çš„å€¼ã€‚ compatibleæ˜¯ä¸€ä¸ªæœ‰ç”¨çš„çº¦æŸï¼Œå¯ä»¥ä½¿ç”¨==å’Œï¼=ç±»å‹å€¼ä¸Šçš„è¿ç®—ç¬¦ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å®ƒå°†ä¸€ä¸ªå€¼ä¸æ‰€æœ‰åˆ‡ç‰‡å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œç›´åˆ°æ‰¾åˆ°åŒ¹é…ã€‚æ­¤Indexå‡½æ•°é€‚ç”¨äºä»»ä½•æ”¯æŒæ¯”è¾ƒçš„ç±»å‹ã€‚\npackage main import \u0026#34;fmt\u0026#34; // Index returns the index of x in s, or -1 if not found. func Index[T comparable](s []T, x T) int { for i, v := range s { // v and x are type T, which has the comparable // constraint, so we can use == here. if v == x { return i } } return -1 } func main() { // Index works on a slice of ints si := []int{10, 20, 15, -10} fmt.Println(Index(si, 15)) // Index also works on a slice of strings ss := []string{\u0026#34;foo\u0026#34;, \u0026#34;bar\u0026#34;, \u0026#34;baz\u0026#34;} fmt.Println(Index(ss, \u0026#34;hello\u0026#34;)) } æ³›å‹ç±»å‹ é™¤äº†æ³›å‹å‡½æ•°å¤–ï¼ŒGoè¿˜æ”¯æŒæ³›å‹ç±»å‹ã€‚å¯ä»¥ä½¿ç”¨ç±»å‹å‚æ•°å¯¹ç±»å‹è¿›è¡Œå‚æ•°åŒ–ï¼Œè¿™å¯¹äºå®ç°æ³›å‹æ•°æ®ç»“æ„éå¸¸æœ‰ç”¨ã€‚\npackage main // List represents a singly-linked list that holds // values of any type. type List[T any] struct { next *List[T] val T } func main() { } æ­¤ç¤ºä¾‹æ¼”ç¤ºäº†ä¸€ä¸ªç®€å•çš„ç±»å‹å£°æ˜ï¼Œç”¨äºåŒ…å«ä»»ä½•ç±»å‹å€¼çš„å•é“¾åˆ—è¡¨ã€‚\n"
},
{
	"uri": "http://blog.911015.com/tour/",
	"title": "Go ç¼–ç¨‹è¯­è¨€ä¹‹æ—…",
	"tags": null,
	"description": "æ¬¢è¿æ¥åˆ°Go ç¼–ç¨‹è¯­è¨€ä¹‹æ—…ã€‚",
	"content": "æ¬¢è¿æ¥åˆ°Go ç¼–ç¨‹è¯­è¨€ä¹‹æ—…ã€‚ æ¬¢è¿æ¥åˆ° Go ä¹‹æ—…;å®˜æ–¹åœ°å€ï¼šA Tour of Go 1ã€åŸºç¡€ç¯‡ï¼ˆä¸€ï¼‰ï¼šåŒ…ã€å˜é‡å’Œæ–¹æ³• 2ã€åŸºç¡€ç¯‡ï¼ˆäºŒï¼‰ï¼šGoè¯­è¨€æµç¨‹æ§åˆ¶ 3ã€åŸºç¡€ç¯‡ï¼ˆä¸‰ï¼‰ï¼šæ›´å¤šç±»å‹: struct, slices, å’Œ map 4ã€æ–¹æ³•ä¸æ¥å£ 5ã€æ³›å‹ 6ã€å¹¶å‘ åŸºç¡€ç¯‡ å­¦ä¹ è¯­è¨€çš„æ‰€æœ‰åŸºç¡€çŸ¥è¯†ã€‚ å£°æ˜å˜é‡ã€è°ƒç”¨å‡½æ•°ä»¥åŠå­¦ä¹ ä¸‹ä¸€è¯¾ä¹‹å‰éœ€è¦äº†è§£çš„æ‰€æœ‰å†…å®¹ã€‚\råŒ…ã€å˜é‡å’Œå‡½æ•°ã€‚\räº†è§£ä»»ä½• Go ç¨‹åºçš„åŸºæœ¬ç»„ä»¶ã€‚\ræµç¨‹æ§åˆ¶è¯­å¥ï¼šforã€ifã€elseã€switch å’Œ defer\räº†è§£å¦‚ä½•ä½¿ç”¨æ¡ä»¶ã€å¾ªç¯ã€å¼€å…³å’Œå»¶è¿Ÿæ¥æ§åˆ¶ä»£ç æµã€‚\ræ›´å¤šç±»å‹ï¼šç»“æ„ã€åˆ‡ç‰‡å’Œæ˜ å°„ã€‚\räº†è§£å¦‚ä½•æ ¹æ®ç°æœ‰ç±»å‹å®šä¹‰ç±»å‹ï¼šæœ¬è¯¾ç¨‹æ¶µç›–ç»“æ„ã€æ•°ç»„ã€åˆ‡ç‰‡å’Œæ˜ å°„ã€‚\ræ–¹æ³•å’Œæ¥å£ äº†è§£å¦‚ä½•å®šä¹‰ç±»å‹çš„æ–¹æ³•ã€å¦‚ä½•å£°æ˜æ¥å£ä»¥åŠå¦‚ä½•å°†æ‰€æœ‰å†…å®¹ç»„åˆåœ¨ä¸€èµ·ã€‚\ræ–¹æ³•å’Œæ¥å£\ræœ¬è¯¾æ¶µç›–æ–¹æ³•å’Œæ¥å£ã€å®šä¹‰å¯¹è±¡åŠå…¶è¡Œä¸ºçš„ç»“æ„ã€‚\ræ³›å‹ äº†è§£å¦‚ä½•åœ¨ Go å‡½æ•°å’Œç»“æ„ä¸­ä½¿ç”¨ç±»å‹å‚æ•°ã€‚\ræ³›å‹\rGo æ”¯æŒä½¿ç”¨ç±»å‹å‚æ•°çš„æ³›å‹ç¼–ç¨‹ã€‚æœ¬è¯¾å±•ç¤ºäº†ä¸€äº›åœ¨ä»£ç ä¸­ä½¿ç”¨æ³›å‹çš„ç¤ºä¾‹ã€‚\rå¹¶å‘ Go æä¾›å¹¶å‘åŠŸèƒ½ä½œä¸ºæ ¸å¿ƒè¯­è¨€çš„ä¸€éƒ¨åˆ†ã€‚è¯¥æ¨¡å—ä»‹ç»äº† goroutines å’Œé€šé“ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬æ¥å®ç°ä¸åŒçš„å¹¶å‘æ¨¡å¼ã€‚\rå¹¶å‘\rGo æä¾›å¹¶å‘ç»“æ„ä½œä¸ºæ ¸å¿ƒè¯­è¨€çš„ä¸€éƒ¨åˆ†ã€‚æœ¬è¯¾å°†ä»‹ç»å®ƒä»¬å¹¶ç»™å‡ºä¸€äº›æœ‰å…³å¦‚ä½•ä½¿ç”¨å®ƒä»¬çš„ç¤ºä¾‹ã€‚\r"
},
{
	"uri": "http://blog.911015.com/go-zero/05.html",
	"title": "go-zero å¾®æœåŠ¡åº”ç”¨å®è·µï¼ˆäºŒï¼‰",
	"tags": null,
	"description": "å•ä½“åº”ç”¨å®è·µ",
	"content": "æœåŠ¡è°ƒç”¨ å®Œæˆrpcè®¿é—®åŠŸèƒ½åï¼Œè¿˜éœ€è¦è¿›è¡Œå®¢æˆ·ç«¯è°ƒç”¨ï¼Œä¼šç”¨åˆ°goctl çš„apiåŠŸèƒ½ï¼›åˆ›å»ºapiç›®å½•ç¼–å†™apiæ–‡ä»¶ï¼›apiç›¸å…³è¯­æ³•å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šapiè¯­æ³•ä»‹ç»\n1ã€APIæ–‡ä»¶ç¼–å†™ å…¶ä¸­ ç™»å½•æ³¨å†Œå¢åŠ äº†å‚æ•°éªŒè¯ï¼Œä½¿ç”¨ validator åŒ…è¿›è¡ŒéªŒè¯è¯¦ç»†ä½¿ç”¨æ–¹æ³•å¯ä»¥åˆ° github.com/go-playground/validator æŸ¥çœ‹\nsyntax = \u0026#34;v1\u0026#34; type ( LoginRequest { Email string `json:\u0026#34;Email\u0026#34; validate:\u0026#34;required,email\u0026#34;` Password string `json:\u0026#34;password\u0026#34; validate:\u0026#34;required,gte=8\u0026#34;` } LoginResponse { AccessToken string `json:\u0026#34;accessToken\u0026#34;` AccessExpire int64 `json:\u0026#34;accessExpire\u0026#34;` } RegisterRequest { Name string `json:\u0026#34;name\u0026#34; validate:\u0026#34;required,gte=2,lte=20\u0026#34;` Gender int64 `json:\u0026#34;gender\u0026#34; validate:\u0026#34;oneof=1 2\u0026#34;` Email string `json:\u0026#34;Email\u0026#34; validate:\u0026#34;required,email\u0026#34;` Password string `json:\u0026#34;password\u0026#34; validate:\u0026#34;required,gte=8\u0026#34;` } RegisterResponse { Id int64 `json:\u0026#34;id\u0026#34;` Name string `json:\u0026#34;name\u0026#34;` Gender int64 `json:\u0026#34;gender\u0026#34;` Email string `json:\u0026#34;Email\u0026#34;` } UserInfoRequest { } UserInfoResponse { Id int64 `json:\u0026#34;id\u0026#34;` Name string `json:\u0026#34;name\u0026#34;` Gender int64 `json:\u0026#34;gender\u0026#34;` Email string `json:\u0026#34;Email\u0026#34;` } ) service User { @handler Login post /api/user/login(LoginRequest) returns (LoginResponse) @handler Register post /api/user/register(RegisterRequest) returns (RegisterResponse) } @server( jwt: Auth ) service User { @handler UserInfo post /api/user/userinfo(UserInfoRequest) returns (UserInfoResponse) } 2ã€æ‰§è¡Œgoctlå‘½ä»¤ goctl api go -api ./api/user.api -dir ./api\næ‰§è¡Œåç”Ÿæˆç›®å½•å¦‚ä¸‹\napi â”œâ”€etc â””â”€internal â”œâ”€config â”œâ”€handler â”œâ”€logic â”œâ”€svc â””â”€types 3ã€Service å±‚å¢åŠ  UserRpc package svc import ( \u0026#34;github.com/zeromicro/go-zero/zrpc\u0026#34; \u0026#34;slowdown/user/api/internal/config\u0026#34; \u0026#34;slowdown/user/rpc/user\u0026#34; ) type ServiceContext struct { Config config.Config UserRpc user.User } func NewServiceContext(c config.Config) *ServiceContext { return \u0026amp;ServiceContext{ Config: c, UserRpc: user.NewUser(zrpc.MustNewClient(c.UserRpc)), } } 4ã€logic ä¸šåŠ¡é€»è¾‘å±‚ æ³¨å†Œé€»è¾‘\nfunc (l *RegisterLogic) Register(req *types.RegisterRequest) (resp *types.RegisterResponse, err error) { validate := validator.New() err = validate.Struct(req) if err != nil { return nil, err } res, err := l.svcCtx.UserRpc.Register(l.ctx, \u0026amp;user.RegisterRequest{ Name: req.Name, Email: req.Email, Gender: req.Gender, Password: req.Password, }) if err != nil { return nil, err } return \u0026amp;types.RegisterResponse{ Id: res.Id, Name: res.Name, Gender: res.Gender, Email: res.Email, }, nil } ç™»å½•é€»è¾‘\nfunc (l *LoginLogic) Login(req *types.LoginRequest) (resp *types.LoginResponse, err error) { res, err := l.svcCtx.UserRpc.Login(l.ctx, \u0026amp;user.LoginRequest{ Email: req.Email, Password: req.Password, }) if err != nil { return nil, err } now := time.Now().Unix() accessToken, err := jwtx.GetToken(l.svcCtx.Config.Auth.AccessSecret, now, l.svcCtx.Config.Auth.AccessExpire, res.Id) if err != nil { return nil, err } return \u0026amp;types.LoginResponse{ AccessExpire: l.svcCtx.Config.Auth.AccessExpire, AccessToken: accessToken, }, nil } è·å–ç”¨æˆ·ä¿¡æ¯\nfunc (l *UserInfoLogic) UserInfo() (resp *types.UserInfoResponse, err error) { uid, _ := l.ctx.Value(\u0026#34;uid\u0026#34;).(json.Number).Int64() res, err := l.svcCtx.UserRpc.UserInfo(l.ctx, \u0026amp;user.UserInfoRequest{ Id: uid, }) if err != nil { return nil, err } return \u0026amp;types.UserInfoResponse{ Id: res.Id, Name: res.Name, Gender: res.Gender, Email: res.Email, }, nil } 5ã€å¯åŠ¨æœåŠ¡æµ‹è¯• ä½¿ç”¨apifoxè¿›è¡Œæµ‹è¯• "
},
{
	"uri": "http://blog.911015.com/grpc/05.html",
	"title": "äº”ã€gRPC-Gateway",
	"tags": null,
	"description": "gRPC æ˜¯ Google å¼€å‘çš„ä¸€æ¬¾é«˜æ€§èƒ½ã€å¼€æºçš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰æ¡†æ¶ã€‚å®ƒä½¿ç”¨ Protocol Buffers ä½œä¸ºæ¥å£å®šä¹‰è¯­è¨€ï¼ˆIDLï¼‰ï¼Œå¯ä»¥åœ¨å¤šç§ç¼–ç¨‹è¯­è¨€å’Œå¹³å°ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚",
	"content": "ç®€ä»‹ gRPC-Gatewayæ˜¯protocçš„ä¸€ä¸ªæ’ä»¶ã€‚å®ƒè¯»å–gRPCæœåŠ¡å®šä¹‰å¹¶ç”Ÿæˆåå‘ä»£ç†æœåŠ¡å™¨ï¼Œè¯¥æœåŠ¡å™¨å°†RESTful JSON APIè½¬æ¢ä¸ºgRPCã€‚æ­¤æœåŠ¡å™¨æ ¹æ®gRPCå®šä¹‰ä¸­çš„è‡ªå®šä¹‰é€‰é¡¹ç”Ÿæˆã€‚\ngrpc-gatewayæ–‡æ¡£ å®‰è£…ä¾èµ– go get github.com/grpc-ecosystem/grpc-gateway/v2/protoc-gen-grpc-gateway\nproto æ–‡ä»¶ gateway/pb/gateway.proto æ–‡ä»¶ï¼›å…¶ä¸­ éœ€è¦ import google/api/annotations.protoï¼›å¯ä»¥å°† github.com\\grpc-ecosystem\\grpc-gateway ä¸‹çš„ third_party\\googleapis\\google\\api æ–‡ä»¶æ‹·è´åˆ°é¡¹ç›®ç›®å½•ä¸‹ï¼›æ‰§è¡Œprotocå‘½ä»¤\nprotoc -I=./gateway/pb/ -I=./third_party/ \u0026ndash;go_out=./gateway/ \u0026ndash;go-grpc_out=./gateway/ -grpc-gateway_out=./gateway/ ./gateway/pb/gateway.proto\nsyntax = \u0026#34;proto3\u0026#34;; package stream; option go_package = \u0026#34;pb/;gateway\u0026#34;; import \u0026#34;google/api/annotations.proto\u0026#34;; message Request { string name = 1; } message Reply { string content = 1; } service GatewayDemo { rpc Gate(Request) returns (Reply) { option (google.api.http) = { get: \u0026#34;/v1/gate/{name}\u0026#34; }; } } Serverç«¯ serverç«¯ä¸æ­£å¸¸gRPCæœåŠ¡æ²¡ä»€ä¹ˆå·®åˆ«ï¼›\npackage main import ( \u0026#34;context\u0026#34; \u0026#34;fmt\u0026#34; \u0026#34;net\u0026#34; gateway \u0026#34;github.com/grpc-demo/gateway/pb\u0026#34; \u0026#34;google.golang.org/grpc\u0026#34; \u0026#34;google.golang.org/grpc/reflection\u0026#34; ) type Gate struct { gateway.UnimplementedGatewayDemoServer } func (g Gate) Gate(ctx context.Context, req *gateway.Request) (*gateway.Reply, error) { return \u0026amp;gateway.Reply{ Content: fmt.Sprintf(\u0026#34;name:%s;\u0026#34;, req.Name), }, nil } func main() { server := grpc.NewServer() gateway.RegisterGatewayDemoServer(server, \u0026amp;Gate{}) reflection.Register(server) lis, _ := net.Listen(\u0026#34;tcp\u0026#34;, \u0026#34;:9000\u0026#34;) _ = server.Serve(lis) } HttpæœåŠ¡ç«¯ é€šè¿‡ gateway.RegisterGatewayDemoHandlerFromEndpoint å°†httpè¯·æ±‚ä»£ç†åˆ°ç»™RPCæœåŠ¡ï¼›\npackage main import ( \u0026#34;context\u0026#34; \u0026#34;net/http\u0026#34; gateway \u0026#34;github.com/grpc-demo/gateway/pb\u0026#34; \u0026#34;github.com/grpc-ecosystem/grpc-gateway/runtime\u0026#34; \u0026#34;google.golang.org/grpc\u0026#34; \u0026#34;google.golang.org/grpc/credentials/insecure\u0026#34; ) const ( // gRPCæœåŠ¡åœ°å€ ServerAddr = \u0026#34;127.0.0.1:9000\u0026#34; ClientAddr = \u0026#34;127.0.0.1:8000\u0026#34; ) func main() { ctx, cancelFunc := context.WithCancel(context.Background()) defer cancelFunc() mux := runtime.NewServeMux() opts := []grpc.DialOption{grpc.WithTransportCredentials(insecure.NewCredentials())} err := gateway.RegisterGatewayDemoHandlerFromEndpoint(ctx, mux, ServerAddr, opts) if err != nil { panic(err) } err = http.ListenAndServe(ClientAddr, mux) if err != nil { panic(err) } } å¯åŠ¨æµ‹è¯• go run server.go\nè®¿é—® 127.0.0.1:8000/v1/gate/grpc åŒæ—¶ä¹Ÿå¯ä»¥é€šè¿‡grpcurl æµ‹è¯•æœåŠ¡ç«¯\ngrpcurl -plaintext -d \u0026lsquo;{\u0026ldquo;name\u0026rdquo;:\u0026ldquo;grpc\u0026rdquo;}\u0026rsquo; localhost:9000 stream.GatewayDemo/Gate\n"
},
{
	"uri": "http://blog.911015.com/wx/20230526.html",
	"title": " Go è¯­è¨€å…¥é—¨ï¼šæ–¹æ³•",
	"tags": null,
	"description": "Goæ²¡æœ‰ç±»ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥åœ¨ç±»å‹ä¸Šå®šä¹‰æ–¹æ³•ã€‚ æ–¹æ³•æ˜¯ä¸€ä¸ªå…·æœ‰ç‰¹æ®Šæ¥æ”¶å™¨å‚æ•°çš„å‡½æ•°ã€‚ æ¥æ”¶å™¨å‡ºç°åœ¨è‡ªå·±çš„å‚æ•°åˆ—è¡¨ä¸­ï¼Œä½äºfuncå…³é”®å­—å’Œæ–¹æ³•åç§°ä¹‹é—´",
	"content": "æ–¹æ³• Methods Goæ²¡æœ‰ç±»ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥åœ¨ç±»å‹ä¸Šå®šä¹‰æ–¹æ³•ã€‚ æ–¹æ³•æ˜¯ä¸€ä¸ªå…·æœ‰ç‰¹æ®Šæ¥æ”¶å™¨å‚æ•°çš„å‡½æ•°ã€‚ æ¥æ”¶å™¨å‡ºç°åœ¨è‡ªå·±çš„å‚æ•°åˆ—è¡¨ä¸­ï¼Œä½äºfuncå…³é”®å­—å’Œæ–¹æ³•åç§°ä¹‹é—´ã€‚è¯­æ³•å¦‚ä¸‹\nfunc (t ç±»å‹) æ–¹æ³•å(å‚æ•°å å‚æ•°ç±»å‹ ...) [è¿”å›å€¼ç±»å‹]{ } ä¸€ä¸‹ä»£ç ä¸ºå®˜ç½‘ç¤ºä¾‹ï¼›å®šä¹‰äº†ä¸€ä¸ª Vertex ç±»åˆ—ï¼›åŒ…å«X Y ä¸¤ä¸ªå­—æ®µï¼›å®šä¹‰äº†ä¸€ä¸ªAbs æ–¹æ³•ï¼›è®¡ç®—åæ ‡ç‚¹åˆ°åŸç‚¹çš„è·ç¦»ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math\u0026#34; ) type Vertex struct { X, Y float64 } func (v Vertex) Abs() float64 { return math.Sqrt(v.X*v.X + v.Y*v.Y) } func main() { v := Vertex{3, 4} fmt.Println(v.Abs()) } åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒAbsæ–¹æ³•æœ‰ä¸€ä¸ªåä¸ºvçš„Vertexç±»å‹çš„æ¥æ”¶å™¨ã€‚ è¯·è®°ä½ï¼šæ–¹æ³•åªæ˜¯ä¸€ä¸ªå¸¦æœ‰æ¥æ”¶å™¨å‚æ•°çš„å‡½æ•°ã€‚ä¸‹é¢çš„Absæ˜¯ä½œä¸ºä¸€ä¸ªæ™®é€šå‡½æ•°ç¼–å†™çš„ï¼Œå‡½æ•°æœ¬èº«æ²¡æœ‰å˜åŒ–ã€‚\nfunc Abs(v Vertex) float64 { return math.Sqrt(v.X*v.X + v.Y*v.Y) } func main() { v := Vertex{3, 4} fmt.Println(Abs(v)) } æ‚¨ä¹Ÿå¯ä»¥åœ¨éç»“æ„ç±»å‹ä¸Šå£°æ˜ä¸€ä¸ªæ–¹æ³•ã€‚\ntype MyFloat float64 func (f MyFloat) Abs() float64 { if f \u0026lt; 0 { return float64(-f) } return float64(f) } åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°ä¸€ä¸ªå¸¦æœ‰Absæ–¹æ³•çš„æ•°å­—ç±»å‹MyFloatã€‚åªèƒ½å£°æ˜å…·æœ‰æ¥æ”¶å™¨çš„æ–¹æ³•ï¼Œè¯¥æ¥æ”¶å™¨çš„ç±»å‹ä¸è¯¥æ–¹æ³•åœ¨åŒä¸€ä¸ªåŒ…ä¸­å®šä¹‰ã€‚ä¸èƒ½ä½¿ç”¨ç±»å‹åœ¨å¦ä¸€ä¸ªåŒ…ï¼ˆåŒ…æ‹¬intç­‰å†…ç½®ç±»å‹ï¼‰ä¸­å®šä¹‰çš„æ¥æ”¶å™¨æ¥å£°æ˜æ–¹æ³•ã€‚\næŒ‡é’ˆæ¥æ”¶å™¨ ä¸Šé¢çš„å®šä¹‰æ–¹æ³•ä¾‹å­ä¸­æˆ‘ä»¬ä½¿ç”¨çš„éƒ½æ˜¯å€¼æ¥æ”¶å™¨ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶å™¨å£°æ˜æ–¹æ³•ã€‚è¿™æ„å‘³ç€æ¥æ”¶å™¨ç±»å‹æ˜¯ç±»å‹Tçš„æŒ‡é’ˆTã€‚ï¼ˆæ­¤å¤–ï¼ŒTæœ¬èº«ä¸èƒ½æ˜¯intä¹‹ç±»çš„æŒ‡é’ˆã€‚ï¼‰ ä¾‹å¦‚ï¼Œæ­¤å¤„çš„â€œScaleâ€æ–¹æ³•æ˜¯åœ¨â€œ*Vertexâ€ä¸Šå®šä¹‰çš„ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math\u0026#34; ) type Vertex struct { X, Y float64 } func (v Vertex) Abs() float64 { return math.Sqrt(v.X*v.X + v.Y*v.Y) } func (v *Vertex) Scale(f float64) { v.X = v.X * f v.Y = v.Y * f } func main() { v := Vertex{3, 4} v.Scale(10) fmt.Println(v.Abs()) } å¸¦æœ‰æŒ‡é’ˆæ¥æ”¶å™¨çš„æ–¹æ³•å¯ä»¥ä¿®æ”¹æ¥æ”¶å™¨æŒ‡å‘çš„å€¼ï¼ˆå°±åƒScaleåœ¨è¿™é‡Œæ‰€åšçš„é‚£æ ·ï¼‰ã€‚ç”±äºæ–¹æ³•é€šå¸¸éœ€è¦ä¿®æ”¹å…¶æ¥æ”¶å™¨ï¼Œå› æ­¤æŒ‡é’ˆæ¥æ”¶å™¨æ¯”å€¼æ¥æ”¶å™¨æ›´å¸¸è§ã€‚å¯ä»¥è¯•ä¸€ä¸‹å°† Scale æ–¹æ³•æ”¹ä¸º å€¼æ¥æ”¶å™¨æ–¹æ³•çœ‹ä¸€ä¸‹æ˜¯å¦èƒ½èµ·åˆ°ç›¸åŒçš„ä½œç”¨ã€‚ å¯¹äºå€¼æ¥æ”¶å™¨ï¼Œâ€œScaleâ€æ–¹æ³•å¯¹åŸå§‹â€œVertex â€å€¼çš„å‰¯æœ¬è¿›è¡Œæ“ä½œã€‚ï¼ˆè¿™ä¸ä»»ä½•å…¶ä»–å‡½æ•°å‚æ•°çš„è¡Œä¸ºç›¸åŒã€‚ï¼‰Scaleæ–¹æ³•å¿…é¡»æœ‰ä¸€ä¸ªæŒ‡é’ˆæ¥æ”¶å™¨æ‰èƒ½æ›´æ”¹ä¸»å‡½æ•°ä¸­å£°æ˜çš„Vertexå€¼ã€‚å› æ­¤ï¼š\nå¦‚æœæ–¹æ³•å†…éƒ¨éœ€è¦ä¿®æ”¹ç»“æ„çš„å­—æ®µå€¼ï¼Œå¹¶ä¸”å¯¹è°ƒç”¨æ–¹å¯åŠ åˆ™éœ€è¦ç”¨æŒ‡é’ˆæ¥æ”¶å™¨ã€‚ å¦å¤–å¦‚æœç»“æ„ä½“æœ‰å¾ˆå¤šçš„å­—æ®µï¼Œä½¿ç”¨å€¼æ¥æ”¶å™¨æ—¶ä¼šå‘ç”Ÿç»“æ„ä½“çš„æ•´ä½“æ‹·è´ï¼Œä¸ºäº†å‡å°‘æ‹·è´å¯ä»¥ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶å™¨ å…¶ä»–æƒ…å†µï¼Œå€¼æ¥æ”¶å™¨éƒ½å¯ä»¥è¢«ä½¿ç”¨ ç»™å®šç±»å‹ä¸Šçš„æ‰€æœ‰æ–¹æ³•éƒ½åº”è¯¥å…·æœ‰å€¼æˆ–æŒ‡é’ˆæ¥æ”¶å™¨ï¼Œä½†ä¸èƒ½åŒæ—¶å…·æœ‰è¿™ä¸¤è€… æŒ‡é’ˆå’Œå‡½æ•° ä¸‹é¢ï¼Œæˆ‘ä»¬æŠŠAbså’ŒScaleæ–¹æ³•è¢«é‡å†™ä¸ºå‡½æ•°åº”è¯¥æ˜¯æ€æ ·çš„å‘¢ï¼Ÿä»£ç å¦‚ä¸‹ï¼š\nfunc Abs(v Vertex) float64 { return math.Sqrt(v.X*v.X + v.Y*v.Y) } func Scale(v *Vertex, f float64) { v.X = v.X * f v.Y = v.Y * f } å¯ä»¥çœ‹åˆ° Abs å‡½æ•°ä½¿ç”¨çš„æ˜¯å€¼ç±»å‹å‚æ•°ï¼ŒScale ä½¿ç”¨çš„æ˜¯æŒ‡é’ˆç±»å‹å‚æ•°ï¼Œå› ä¸ºScaleéœ€è¦å¯¹ å‚æ•°çš„å€¼è¿›è¡Œä¿®æ”¹ï¼›å¦‚æœä¸ä½¿ç”¨æŒ‡é’ˆç±»å‹å‚æ•° Scale éœ€è¦é€šè¿‡è¿”å›å€¼çš„å½¢å¼ç»™è°ƒç”¨è€…è¿”å›ä¸€ä¸ªæ–°çš„ç»“æ„ä½“ï¼›\næ–¹æ³•å’ŒæŒ‡é’ˆé—´æ¥å¯»å€ æ¯”è¾ƒå‰ä¸¤ä¸ªç¨‹åºï¼Œæ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°å¸¦æœ‰æŒ‡é’ˆå‚æ•°çš„å‡½æ•°å¿…é¡»ä½¿ç”¨æŒ‡é’ˆ\npackage main import \u0026#34;fmt\u0026#34; type Vertex struct { X, Y float64 } func (v *Vertex) Scale(f float64) { v.X = v.X * f v.Y = v.Y * f } func ScaleFunc(v *Vertex, f float64) { v.X = v.X * f v.Y = v.Y * f } func main() { v := Vertex{3, 4} v.Scale(2) ScaleFunc(\u0026amp;v, 10) p := \u0026amp;Vertex{4, 3} p.Scale(3) ScaleFunc(p, 8) fmt.Println(v, p) } è€Œå…·æœ‰æŒ‡é’ˆæ¥æ”¶å™¨çš„æ–¹æ³•åœ¨è¢«è°ƒç”¨æ—¶é‡‡ç”¨å€¼æˆ–æŒ‡é’ˆä½œä¸ºæ¥æ”¶å™¨ï¼š\nvar v Vertex v.Scale(5) // OK p := \u0026amp;v p.Scale(10) // OK å¯¹äºv.Scaleï¼ˆ5ï¼‰è¯­å¥ï¼Œå³ä½¿væ˜¯ä¸€ä¸ªå€¼è€Œä¸æ˜¯æŒ‡é’ˆï¼Œä¹Ÿä¼šè‡ªåŠ¨è°ƒç”¨å¸¦æœ‰æŒ‡é’ˆæ¥æ”¶å™¨çš„æ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ºäº†æ–¹ä¾¿èµ·è§ï¼ŒGoå°†è¯­å¥v.Scaleï¼ˆ5ï¼‰è§£é‡Šä¸ºï¼ˆ\u0026amp;vï¼‰.Scaleï¼ˆ5ï¼‰ï¼Œå› ä¸ºScaleæ–¹æ³•æœ‰ä¸€ä¸ªæŒ‡é’ˆæ¥æ”¶å™¨ã€‚ åè¿‡æ¥ï¼Œé‡‡ç”¨å€¼å‚æ•°çš„å‡½æ•°å¿…é¡»é‡‡ç”¨è¯¥ç‰¹å®šç±»å‹çš„å€¼ï¼š\nvar v Vertex fmt.Println(AbsFunc(v)) // OK fmt.Println(AbsFunc(\u0026amp;v)) // Compile error! è€Œå…·æœ‰å€¼æ¥æ”¶å™¨çš„æ–¹æ³•åœ¨è¢«è°ƒç”¨æ—¶å¯ä»¥é‡‡ç”¨å€¼æˆ–æŒ‡é’ˆä½œä¸ºæ¥æ”¶å™¨ï¼š\nvar v Vertex fmt.Println(v.Abs()) // OK p := \u0026amp;v fmt.Println(p.Abs()) // OK åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ–¹æ³•è°ƒç”¨p.Absï¼ˆï¼‰è¢«è§£é‡Šä¸ºï¼ˆ*pï¼‰.Absï¼ˆï¼‰ã€‚è¿è¡Œä¸€ä¸‹ä¸‹é¢çš„ä»£ç æ›´å¥½çš„ç†è§£ä¸€ä¸‹å‡½æ•°ä¸æ–¹æ³•çš„å¼‚åŒã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math\u0026#34; ) type Vertex struct { X, Y float64 } func (v Vertex) Abs() float64 { return math.Sqrt(v.X*v.X + v.Y*v.Y) } func AbsFunc(v Vertex) float64 { return math.Sqrt(v.X*v.X + v.Y*v.Y) } func main() { v := Vertex{3, 4} fmt.Println(v.Abs()) fmt.Println(AbsFunc(v)) p := \u0026amp;Vertex{4, 3} fmt.Println(p.Abs()) fmt.Println(AbsFunc(*p)) } "
},
{
	"uri": "http://blog.911015.com/tour/06.html",
	"title": "6ã€å¹¶å‘",
	"tags": null,
	"description": "Goæä¾›çš„å¹¶å‘åŠŸèƒ½æ˜¯æ ¸å¿ƒè¯­è¨€çš„ä¸€éƒ¨åˆ†",
	"content": "Goæä¾›çš„å¹¶å‘åŠŸèƒ½æ˜¯æ ¸å¿ƒè¯­è¨€çš„ä¸€éƒ¨åˆ†ã€‚\nGoroutines goroutineæ˜¯ä¸€ä¸ªç”±Goè¿è¡Œæ—¶ç®¡ç†çš„è½»é‡çº§çº¿ç¨‹ã€‚\ngo f(x, y, z) å¼€å§‹è¿è¡Œæ–°çš„goroutine f(x, y, z) fã€xã€yå’Œzçš„æ±‚å€¼å‘ç”Ÿåœ¨å½“å‰goroutineä¸­ï¼Œfçš„æ‰§è¡Œå‘ç”Ÿåœ¨æ–°goroutineã€‚ Goroutinesåœ¨ç›¸åŒçš„åœ°å€ç©ºé—´ä¸­è¿è¡Œï¼Œå› æ­¤å¯¹å…±äº«å†…å­˜çš„è®¿é—®å¿…é¡»åŒæ­¥ã€‚syncåŒ…æä¾›äº†æœ‰ç”¨çš„å¹¶å‘åŸè¯­ï¼Œå°½ç®¡Goä¸­å¹¶ä¸éœ€è¦å®ƒä»¬ï¼Œå› ä¸ºè¿˜æœ‰å…¶ä»–åŸºå…ƒã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;time\u0026#34; ) func say(s string) { for i := 0; i \u0026lt; 5; i++ { time.Sleep(100 * time.Millisecond) fmt.Println(s) } } func main() { go say(\u0026#34;world\u0026#34;) say(\u0026#34;hello\u0026#34;) } Channels Channelæ˜¯ä¸€ç§ç±»å‹åŒ–çš„ç®¡é“ï¼Œé€šè¿‡å®ƒå¯ä»¥ä½¿ç”¨é€šé“æ“ä½œç¬¦\u0026lt;-å‘é€å’Œæ¥æ”¶å€¼ã€‚\nch \u0026lt;- v // Send v to channel ch. v := \u0026lt;-ch // Receive from ch, and // assign value to v. æ•°æ®æ²¿ç®­å¤´æ–¹å‘æµåŠ¨ã€‚ ä¸mapå’Œsliceä¸€æ ·ï¼Œ channelå¿…é¡»åœ¨ä½¿ç”¨å‰åˆå§‹åŒ–ï¼š\nch := make(chan int) é»˜è®¤æƒ…å†µä¸‹ï¼Œå‘é€å’Œæ¥æ”¶å—ï¼Œç›´åˆ°å¯¹æ–¹å‡†å¤‡å¥½ä¸ºæ­¢ã€‚è¿™å…è®¸goroutineåœ¨æ²¡æœ‰æ˜¾å¼é”æˆ–æ¡ä»¶å˜é‡çš„æƒ…å†µä¸‹è¿›è¡ŒåŒæ­¥ã€‚\npackage main import \u0026#34;fmt\u0026#34; func sum(s []int, c chan int) { sum := 0 for _, v := range s { sum += v } c \u0026lt;- sum // send sum to c } func main() { s := []int{7, 2, 8, -9, 4, 0} c := make(chan int) go sum(s[:len(s)/2], c) go sum(s[len(s)/2:], c) x, y := \u0026lt;-c, \u0026lt;-c // receive from c fmt.Println(x, y, x+y) } ç¤ºä¾‹ä»£ç å¯¹ä¸€ä¸ªåˆ‡ç‰‡ä¸­çš„æ•°å­—æ±‚å’Œï¼Œå°†å·¥ä½œåˆ†é…åˆ°ä¸¤ä¸ªgoroutineä¹‹é—´ã€‚ä¸€æ—¦ä¸¤ä¸ªgoroutineéƒ½å®Œæˆäº†è®¡ç®—ï¼Œå®ƒå°±ä¼šè®¡ç®—å‡ºæœ€ç»ˆç»“æœã€‚\nBuffered Channels é€šé“å¯ä»¥è¿›è¡Œç¼“å†²ã€‚æä¾›ç¼“å†²åŒºé•¿åº¦ä½œä¸ºåˆå§‹åŒ–ç¼“å†²é€šé“çš„ç¬¬äºŒä¸ªå‚æ•°ï¼š\nch := make(chan int, 100) ä»…å½“ç¼“å†²åŒºå·²æ»¡æ—¶å‘é€åˆ°ç¼“å†²é€šé“é˜»å¡ã€‚ç¼“å†²åŒºä¸ºç©ºæ—¶æ¥æ”¶é˜»å¡ã€‚ ä¿®æ”¹ç¤ºä¾‹ä»¥ä½¿ç¼“å†²åŒºæº¢å‡ºï¼Œç„¶åçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚\npackage main import \u0026#34;fmt\u0026#34; func main() { ch := make(chan int, 2) ch \u0026lt;- 1 ch \u0026lt;- 2 fmt.Println(\u0026lt;-ch) fmt.Println(\u0026lt;-ch) } Range and Close å‘é€æ–¹å¯ä»¥å…³é—­ä¸€ä¸ªé€šé“ï¼Œä»¥æŒ‡ç¤ºä¸å†å‘é€ä»»ä½•å€¼ã€‚æ¥æ”¶å™¨å¯ä»¥é€šè¿‡ä¸ºæ¥æ”¶è¡¨è¾¾å¼åˆ†é…ç¬¬äºŒä¸ªå‚æ•°æ¥æµ‹è¯•é€šé“æ˜¯å¦å·²å…³é—­ï¼šå¦‚ä¸‹\nv, ok := \u0026lt;-ch å¦‚æœæ²¡æœ‰æ›´å¤šçš„å€¼å¯æ¥æ”¶å¹¶ä¸”é€šé“å·²å…³é—­ï¼Œåˆ™okä¸ºfalseã€‚ è¿˜å¯ä»¥é€šè¿‡ iï¼š=range c çš„å¾ªç¯é‡å¤æ¥æ”¶æ¥è‡ªé€šé“çš„å€¼ï¼Œç›´åˆ°é€šé“å…³é—­ï¼Œå¾ªç¯é€€å‡ºã€‚\npackage main import ( \u0026#34;fmt\u0026#34; ) func fibonacci(n int, c chan int) { x, y := 0, 1 for i := 0; i \u0026lt; n; i++ { c \u0026lt;- x x, y = y, x+y } close(c) } func main() { c := make(chan int, 10) go fibonacci(cap(c), c) for i := range c { fmt.Println(i) } } æ³¨æ„ï¼š\nåªæœ‰å‘é€æ–¹åº”è¯¥å…³é—­é¢‘é“ï¼Œè€Œä¸æ˜¯æ¥æ”¶æ–¹ã€‚åœ¨å…³é—­çš„é¢‘é“ä¸Šå‘é€ä¼šå¼•èµ·panicã€‚ channelä¸åƒæ–‡ä»¶ï¼›é€šå¸¸ä¸éœ€è¦å…³é—­å®ƒä»¬ã€‚åªæœ‰å½“æ¥æ”¶å™¨å¿…é¡»è¢«å‘ŠçŸ¥æ²¡æœ‰æ›´å¤šçš„å€¼åˆ°æ¥æ—¶ï¼Œä¾‹å¦‚ç»ˆæ­¢rangeå¾ªç¯æ—¶ï¼Œæ‰éœ€è¦å…³é—­ã€‚ Select selectè¯­å¥å…è®¸goroutineç­‰å¾…å¤šä¸ªé€šä¿¡æ“ä½œã€‚ ä¸€ä¸ªselecté˜»å¡ï¼Œç›´åˆ°å®ƒçš„ä¸€ä¸ªcaseå¯ä»¥è¿è¡Œï¼Œç„¶åå®ƒæ‰§è¡Œé‚£ä¸ªcaseã€‚å¦‚æœå¤šä¸ªcaseå‡†å¤‡å¥½äº†ï¼Œå®ƒä¼šéšæœºé€‰æ‹©ä¸€ä¸ªã€‚\npackage main import \u0026#34;fmt\u0026#34; func fibonacci(c, quit chan int) { x, y := 0, 1 for { select { case c \u0026lt;- x: x, y = y, x+y case \u0026lt;-quit: fmt.Println(\u0026#34;quit\u0026#34;) return } } } func main() { c := make(chan int) quit := make(chan int) go func() { for i := 0; i \u0026lt; 10; i++ { fmt.Println(\u0026lt;-c) } quit \u0026lt;- 0 }() fibonacci(c, quit) } å¦‚æœæ²¡æœ‰å…¶ä»–æ¡ˆä¾‹å‡†å¤‡å°±ç»ªï¼Œåˆ™é€‰æ‹©ä¸­çš„é»˜è®¤æ¡ˆä¾‹å°†è¿è¡Œã€‚ä½¿ç”¨é»˜è®¤æƒ…å†µå°è¯•åœ¨ä¸é˜»æ­¢çš„æƒ…å†µä¸‹å‘é€æˆ–æ¥æ”¶ï¼š\nselect { case i := \u0026lt;-c: // use i default: // receiving from c would block } package main import ( \u0026#34;fmt\u0026#34; \u0026#34;time\u0026#34; ) func main() { tick := time.Tick(100 * time.Millisecond) boom := time.After(500 * time.Millisecond) for { select { case \u0026lt;-tick: fmt.Println(\u0026#34;tick.\u0026#34;) case \u0026lt;-boom: fmt.Println(\u0026#34;BOOM!\u0026#34;) return default: fmt.Println(\u0026#34; .\u0026#34;) time.Sleep(50 * time.Millisecond) } } } Exercise: Equivalent Binary Trees ç»ƒä¹ ï¼šç­‰ä»·äºŒå‰æ ‘ ä»£ç å·²åŒæ­¥ä»…ä¾›å‚è€ƒ github\nsync.Mutex æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†channelå¯¹äºgoroutinesä¹‹é—´çš„äº¤æµæ˜¯å¤šä¹ˆçš„å¥½ã€‚ ä½†å¦‚æœæˆ‘ä»¬ä¸éœ€è¦é€šè®¯å‘¢ï¼Ÿå¦‚æœæˆ‘ä»¬åªæƒ³ç¡®ä¿ä¸€æ¬¡åªæœ‰ä¸€ä¸ªgoroutineå¯ä»¥è®¿é—®ä¸€ä¸ªå˜é‡ä»¥é¿å…å†²çªï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ è¿™ä¸ªæ¦‚å¿µè¢«ç§°ä¸ºäº’æ–¥ï¼Œæä¾›äº’æ–¥çš„æ•°æ®ç»“æ„çš„ä¼ ç»Ÿåç§°æ˜¯_mutex_ã€‚ Goçš„æ ‡å‡†åº“é€šè¿‡sync.MutexåŠå…¶ä¸¤ç§æ–¹æ³•æä¾›äº’æ–¥ï¼š\nLock Unlock æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªè¦åœ¨äº’æ–¥ä¸­æ‰§è¡Œçš„ä»£ç å—ï¼Œæ–¹æ³•æ˜¯ç”¨Incæ–¹æ³•ä¸­æ‰€ç¤ºçš„Lockå’ŒUnlockè°ƒç”¨åŒ…å›´å®ƒã€‚ æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨deferæ¥ç¡®ä¿äº’æ–¥å¯¹è±¡å°†åƒValueæ–¹æ³•ä¸­é‚£æ ·è¢«è§£é”ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;sync\u0026#34; \u0026#34;time\u0026#34; ) // SafeCounter is safe to use concurrently. type SafeCounter struct { mu sync.Mutex v map[string]int } // Inc increments the counter for the given key. func (c *SafeCounter) Inc(key string) { c.mu.Lock() // Lock so only one goroutine at a time can access the map c.v. c.v[key]++ c.mu.Unlock() } // Value returns the current value of the counter for the given key. func (c *SafeCounter) Value(key string) int { c.mu.Lock() // Lock so only one goroutine at a time can access the map c.v. defer c.mu.Unlock() return c.v[key] } func main() { c := SafeCounter{v: make(map[string]int)} for i := 0; i \u0026lt; 1000; i++ { go c.Inc(\u0026#34;somekey\u0026#34;) } time.Sleep(time.Second) fmt.Println(c.Value(\u0026#34;somekey\u0026#34;)) } Exercise: Web Crawlerï¼ˆç½‘ç»œçˆ¬è™«ï¼‰ ä»£ç å·²åŒæ­¥ä»…ä¾›å‚è€ƒ Github\n"
},
{
	"uri": "http://blog.911015.com/grpc/06.html",
	"title": "å…­ã€è¯ä¹¦éªŒè¯",
	"tags": null,
	"description": "gRPC æ˜¯ Google å¼€å‘çš„ä¸€æ¬¾é«˜æ€§èƒ½ã€å¼€æºçš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰æ¡†æ¶ã€‚å®ƒä½¿ç”¨ Protocol Buffers ä½œä¸ºæ¥å£å®šä¹‰è¯­è¨€ï¼ˆIDLï¼‰ï¼Œå¯ä»¥åœ¨å¤šç§ç¼–ç¨‹è¯­è¨€å’Œå¹³å°ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚",
	"content": " è¿˜è®°å¾—å‰é¢ç« èŠ‚ä¸­gRPCçš„æœåŠ¡ä¸­å®¢æˆ·ç«¯åœ¨é“¾æ¥æœåŠ¡å™¨ä¸­é€šè¿‡ grpc.WithInsecure() é€‰é¡¹è·³è¿‡äº†å¯¹æœåŠ¡å™¨è¯ä¹¦çš„éªŒè¯å—ï¼Ÿä¸ºäº†ä¿éšœgRPCé€šä¿¡ä¸è¢«ç¬¬ä¸‰æ–¹ç›‘å¬ç¯¡æ”¹æˆ–ä¼ªé€ ï¼Œæˆ‘ä»¬è¯•ä¸€ä¸‹å¯¹æœåŠ¡å™¨å¯åŠ¨TLSåŠ å¯†ç‰¹æ€§ã€‚\nä¸€ã€ç”Ÿæˆè¯ä¹¦ é€šè¿‡ä¸€ä¸ªå®‰å…¨å¯é çš„æ ¹è¯ä¹¦åˆ†åˆ«å¯¹æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„è¯ä¹¦è¿›è¡Œç­¾åã€‚è¿™æ ·å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨åœ¨æ”¶åˆ°å¯¹æ–¹çš„è¯ä¹¦åå¯ä»¥é€šè¿‡æ ¹è¯ä¹¦è¿›è¡ŒéªŒè¯è¯ä¹¦çš„æœ‰æ•ˆæ€§ã€‚\n1ã€CAè¯ä¹¦ åˆ›å»º ca.conf\n[ req ] default_bits = 4096 distinguished_name = req_distinguished_name [ req_distinguished_name ] countryName = Country Name (2 letter code) countryName_default = CN stateOrProvinceName = State or Province Name (full name) stateOrProvinceName_default = Beiging localityName = Locality Name (eg, city) localityName_default = Beijing organizationName = Organization Name (eg, company) organizationName_default = company commonName = Common Name (e.g. server FQDN or YOUR name) commonName_max = 64 commonName_default = Ted CA Test ç”Ÿæˆcaæ ¹è¯ä¹¦\nSERVER_CN=localhost CLIENT_CN=localhost openssl genrsa -passout pass:1111 -des3 -out ca.key 4096 # Generates ca.crt openssl req -passin pass:1111 -new -x509 -days 365 -key ca.key -out ca.crt -subj \u0026#34;/CN=${SERVER_CN}\u0026#34; -config ./ca.conf 2ã€æœåŠ¡ç«¯è¯ä¹¦ æ³¨æ„ï¼šgo 1.15 ç‰ˆæœ¬å¼€å§‹åºŸå¼ƒ CommonNameï¼Œå› æ­¤æ¨èä½¿ç”¨ SAN è¯ä¹¦\nç¼–è¾‘server.conf æ–‡ä»¶ å…¶ä¸­ alt_names é…ç½®ä¸­çš„å†…å®¹ åé¢å®¢æˆ·ç«¯è¯·æ±‚ä¼šç”¨åˆ° [ req ] default_bits = 2048 distinguished_name = req_distinguished_name req_extensions = req_ext [ req_distinguished_name ] countryName = Country Name (2 letter code) countryName_default = CN stateOrProvinceName = State or Province Name (full name) stateOrProvinceName_default = JiangSu localityName = Locality Name (eg, city) localityName_default = NanJing organizationName = Organization Name (eg, company) organizationName_default = your_company commonName = Common Name (e.g. server FQDN or YOUR name) commonName_max = 64 commonName_default = www.eline.com [ req_ext ] subjectAltName = @alt_names [alt_names] DNS.1 = localhost DNS.2 = www.test.com ç”Ÿæˆserver ç«¯è¯ä¹¦æ–‡ä»¶ # Generate server key: openssl genrsa -passout pass:1111 -des3 -out server.key 4096 openssl req -passin pass:1111 -new -key server.key -out server.csr -subj \u0026#34;/CN=${SERVER_CN}\u0026#34; -config ./server.conf # Generates server.crt openssl x509 -req -passin pass:1111 -days 365 -in server.csr -CA ca.crt -CAkey ca.key -set_serial 01 -out server.crt -extfile ./server.conf -extensions req_ext # Remove passphrase from server key openssl rsa -passin pass:1111 -in server.key -out server.key 3ã€å®¢æˆ·ç«¯è¯ä¹¦\n# Generate client key openssl genrsa -passout pass:1111 -des3 -out client.key 4096 openssl req -passin pass:1111 -new -key client.key -out client.csr -subj \u0026#34;/CN=${CLIENT_CN}\u0026#34; -config ./server.conf # Generates client.crt openssl x509 -passin pass:1111 -req -days 365 -in client.csr -CA ca.crt -CAkey ca.key -set_serial 01 -out client.crt -extfile ./server.conf -extensions req_ext # Remove passphrase from client key: openssl rsa -passin pass:1111 -in client.key -out client.key æ³¨æ„ï¼š1ã€å‘½ä»¤ä¸­çš„ ${CLIENT_CN} ${SERVER_CN} éƒ½æ˜¯æœ€å¼€å§‹å®šä¹‰å¥½çš„shellå˜é‡ï¼›2ã€å¦‚æœæ˜¯winç³»ç»Ÿéœ€è¦å•ç‹¬å®‰è£…opensslï¼šä¸‹è½½OpenSSLï¼›\näºŒã€æœåŠ¡ç«¯ æœåŠ¡å™¨ç«¯ç”¨credentials.NewTLSå‡½æ•°ç”Ÿæˆè¯ä¹¦ï¼Œé€šè¿‡ClientCAsé€‰æ‹©CAæ ¹è¯ä¹¦ï¼Œå¹¶é€šè¿‡ClientAuthé€‰é¡¹å¯ç”¨å¯¹å®¢æˆ·ç«¯è¿›è¡ŒéªŒè¯ã€‚\ntype SafetyServer struct { pb.UnsafeSafetyDemoServer } func (s SafetyServer) Secret(ctx context.Context, in *pb.Request) (*pb.Reply, error) { return \u0026amp;pb.Reply{ Content: \u0026#34;Secret Contentï¼š \u0026#34; + in.Name, }, nil } func main() { certificate, err := tls.LoadX509KeyPair(\u0026#34;keys/server.crt\u0026#34;, \u0026#34;keys/server.key\u0026#34;) if err != nil { log.Fatal(err) } certPool := x509.NewCertPool() ca, err := ioutil.ReadFile(\u0026#34;keys/ca.crt\u0026#34;) if err != nil { log.Fatal(err) } if ok := certPool.AppendCertsFromPEM(ca); !ok { log.Fatal(\u0026#34; failed to append certs \u0026#34;) } creds := credentials.NewTLS(\u0026amp;tls.Config{ Certificates: []tls.Certificate{certificate}, ClientAuth: tls.RequireAndVerifyClientCert, ClientCAs: certPool, }) server := grpc.NewServer(grpc.Creds(creds)) pb.RegisterSafetyDemoServer(server, \u0026amp;SafetyServer{}) reflection.Register(server) lis, _ := net.Listen(\u0026#34;tcp\u0026#34;, \u0026#34;:9090\u0026#34;) server.Serve(lis) } ä¸‰ã€å®¢æˆ·ç«¯ å®¢æˆ·ç«¯é€šè¿‡ credentials.NewTLSå‡½æ•°è°ƒç”¨ï¼Œå¼•å…¥ä¸€ä¸ªCAæ ¹è¯ä¹¦å’ŒæœåŠ¡å™¨ï¼ˆServerName ï¼‰çš„åå­—æ¥å®ç°å¯¹æœåŠ¡å™¨è¿›è¡ŒéªŒè¯ã€‚å®¢æˆ·ç«¯åœ¨é“¾æ¥æœåŠ¡å™¨æ—¶ä¼šé¦–å…ˆè¯·æ±‚æœåŠ¡å™¨çš„è¯ä¹¦ï¼Œç„¶åä½¿ç”¨CAæ ¹è¯ä¹¦å¯¹æ”¶åˆ°çš„æœåŠ¡å™¨ç«¯è¯ä¹¦è¿›è¡ŒéªŒè¯ã€‚\nfunc main() { certificate, err := tls.LoadX509KeyPair(\u0026#34;keys/client.crt\u0026#34;, \u0026#34;keys/client.key\u0026#34;) if err != nil { log.Fatal(err) } certPool := x509.NewCertPool() ca, err := ioutil.ReadFile(\u0026#34;keys/ca.crt\u0026#34;) if err != nil { log.Fatal(err) } if ok := certPool.AppendCertsFromPEM(ca); !ok { log.Fatal(\u0026#34; failed to append certs \u0026#34;) } creds := credentials.NewTLS(\u0026amp;tls.Config{ Certificates: []tls.Certificate{certificate}, ServerName: \u0026#34;www.test.com\u0026#34;, // NOTE: éœ€è¦ä¸ç”Ÿæˆè¯ä¹¦çš„é…ç½®åŒ¹é… RootCAs: certPool, }) opt := []grpc.DialOption{ grpc.WithTransportCredentials(creds), } conn, _ := grpc.Dial(\u0026#34;:9090\u0026#34;, opt...) defer conn.Close() client := pb.NewSafetyDemoClient(conn) speak, err := client.Secret(context.Background(), \u0026amp;pb.Request{Name: \u0026#34;golang\u0026#34;}) if err != nil { log.Println(\u0026#34;error\u0026#34;) log.Fatal(err) return } log.Println(speak) } ServerName éœ€è¦ä¸ç”Ÿæˆè¯ä¹¦çš„é…ç½®åŒ¹é…;æ¯”åŒ¹é…æ˜¯ä¼šè¿”å›é”™è¯¯ï¼š\nrpc error: code = Unavailable desc = connection error: desc = \u0026ldquo;transport: authentication handshake failed: x509: certificate is valid for localhost, www.test.com, not www.test.com1\u0026rdquo;\nè·å–ä»£ç ï¼šé“¾æ¥\n"
},
{
	"uri": "http://blog.911015.com/wx/20230527.html",
	"title": " Go è¯­è¨€ä¸­çš„æ¥å£ï¼šInterface",
	"tags": null,
	"description": "æ¥å£ç±»å‹è¢«å®šä¹‰ä¸ºä¸€ç»„æ–¹æ³•ç­¾åã€‚ æ¥å£ç±»å‹çš„å€¼å¯ä»¥åŒ…å«å®ç°è¿™äº›æ–¹æ³•çš„ä»»ä½•å€¼ã€‚",
	"content": "Interfaces æ¥å£ç±»å‹è¢«å®šä¹‰ä¸ºä¸€ç»„æ–¹æ³•ç­¾åã€‚ æ¥å£ç±»å‹çš„å€¼å¯ä»¥åŒ…å«å®ç°è¿™äº›æ–¹æ³•çš„ä»»ä½•å€¼ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math\u0026#34; ) type Abser interface { Abs() float64 } func main() { var a Abser f := MyFloat(-math.Sqrt2) v := Vertex{3, 4} a = f // a MyFloat implements Abser a = \u0026amp;v // a *Vertex implements Abser // In the following line, v is a Vertex (not *Vertex) // and does NOT implement Abser. a = v fmt.Println(a.Abs()) } type MyFloat float64 func (f MyFloat) Abs() float64 { if f \u0026lt; 0 { return float64(-f) } return float64(f) } type Vertex struct { X, Y float64 } func (v *Vertex) Abs() float64 { return math.Sqrt(v.X*v.X + v.Y*v.Y) } æ³¨æ„ï¼šç¬¬22è¡Œçš„ç¤ºä¾‹ä»£ç ä¸­æœ‰ä¸€ä¸ªé”™è¯¯ã€‚Vertexï¼ˆå€¼ç±»å‹ï¼‰ä¸å®ç°Abserï¼Œå› ä¸ºAbsæ–¹æ³•ä»…åœ¨*Vertexï¼ˆæŒ‡é’ˆç±»å‹ï¼‰ä¸Šå®šä¹‰ã€‚\næ¥å£æ˜¯éšå¼å®ç°çš„ ç±»å‹é€šè¿‡å®ç°å…¶æ–¹æ³•æ¥å®ç°æ¥å£ã€‚æ²¡æœ‰æ˜ç¡®çš„æ„å‘å£°æ˜ï¼Œä¹Ÿæ²¡æœ‰â€œimplementsâ€å…³é”®å­—ã€‚éšå¼æ¥å£å°†æ¥å£çš„å®šä¹‰ä¸å…¶å®ç°è§£è€¦ï¼Œç„¶åæ¥å£å¯ä»¥åœ¨æ²¡æœ‰é¢„å…ˆå®‰æ’çš„æƒ…å†µä¸‹å‡ºç°åœ¨ä»»ä½•åŒ…ä¸­ã€‚\npackage main import \u0026#34;fmt\u0026#34; type I interface { M() } type T struct { S string } // This method means type T implements the interface I, // but we don\u0026#39;t need to explicitly declare that it does so. func (t T) M() { fmt.Println(t.S) } func main() { var i I = T{\u0026#34;hello\u0026#34;} i.M() } æ¥å£å€¼ æ¥å£å€¼å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå€¼å’Œä¸€ä¸ªå…·ä½“ç±»å‹çš„å…ƒç»„ (value, type) æ¥å£å€¼åŒ…å«ç‰¹å®šåŸºç¡€å…·ä½“ç±»å‹çš„å€¼ã€‚å¯¹æ¥å£å€¼è°ƒç”¨æ–¹æ³•ä¼šåœ¨å…¶åŸºç¡€ç±»å‹ä¸Šæ‰§è¡Œç›¸åŒåç§°çš„æ–¹æ³•ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math\u0026#34; ) type I interface { M() } type T struct { S string } func (t *T) M() { fmt.Println(t.S) } type F float64 func (f F) M() { fmt.Println(f) } func main() { var i I i = \u0026amp;T{\u0026#34;Hello\u0026#34;} describe(i) i.M() i = F(math.Pi) describe(i) i.M() } func describe(i I) { fmt.Printf(\u0026#34;(%v, %T)\\n\u0026#34;, i, i) } åŸºæœ¬å€¼ä¸ºnilçš„æ¥å£å€¼ å¦‚æœæ¥å£å†…éƒ¨çš„å…·ä½“å€¼ä¸ºnilï¼Œé‚£ä¹ˆå°†ä½¿ç”¨nilæ¥æ”¶å™¨è°ƒç”¨è¯¥æ–¹æ³•ã€‚åœ¨æŸäº›è¯­è¨€ä¸­ï¼Œè¿™ä¼šè§¦å‘nullæŒ‡é’ˆå¼‚å¸¸ï¼Œä½†åœ¨Goä¸­ï¼Œé€šå¸¸ä¼šç¼–å†™ä¸€äº›æ–¹æ³•æ¥ä¼˜é›…åœ°å¤„ç†ä½¿ç”¨nilæ¥æ”¶å™¨è°ƒç”¨çš„æƒ…å†µï¼ˆå¦‚æœ¬ä¾‹ä¸­çš„æ–¹æ³•Mï¼‰\npackage main import \u0026#34;fmt\u0026#34; type I interface { M() } type T struct { S string } func (t *T) M() { if t == nil { fmt.Println(\u0026#34;\u0026lt;nil\u0026gt;\u0026#34;) return } fmt.Println(t.S) } func main() { var i I var t *T i = t describe(i) i.M() i = \u0026amp;T{\u0026#34;hello\u0026#34;} describe(i) i.M() } func describe(i I) { fmt.Printf(\u0026#34;(%v, %T)\\n\u0026#34;, i, i) } è¯·æ³¨æ„ï¼ŒæŒæœ‰nilå…·ä½“å€¼çš„æ¥å£å€¼æœ¬èº«å°±æ˜¯énilã€‚\nNilæ¥å£å€¼ nilæ¥å£å€¼æ—¢ä¸åŒ…å«å€¼ï¼Œä¹Ÿä¸åŒ…å«å…·ä½“ç±»å‹ã€‚åœ¨nilæ¥å£ä¸Šè°ƒç”¨æ–¹æ³•æ˜¯ä¸€ä¸ªè¿è¡Œæ—¶é”™è¯¯ï¼Œå› ä¸ºæ¥å£å…ƒç»„ä¸­æ²¡æœ‰æŒ‡ç¤ºè¦è°ƒç”¨å“ªä¸ªå…·ä½“æ–¹æ³•çš„ç±»å‹ã€‚\npackage main import \u0026#34;fmt\u0026#34; type I interface { M() } func main() { var i I describe(i) i.M() } func describe(i I) { fmt.Printf(\u0026#34;(%v, %T)\\n\u0026#34;, i, i) } ç©ºæ¥å£ æŒ‡å®šé›¶æ–¹æ³•çš„æ¥å£ç±»å‹ç§°ä¸ºç©ºæ¥å£ï¼šinterface{} ç©ºæ¥å£å¯ä»¥åŒ…å«ä»»ä½•ç±»å‹çš„å€¼ã€‚ï¼ˆæ¯ä¸ªç±»å‹è‡³å°‘å®ç°é›¶ä¸ªæ–¹æ³•ã€‚ï¼‰ ç©ºæ¥å£åœ¨ç¨‹åºå¤„ç†æœªçŸ¥ç±»å‹å€¼çš„æ—¶å€™ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œfmt.Printæ¥å—ä»»æ„æ•°é‡çš„æ¥å£ï½›ï½ç±»å‹çš„å‚æ•°ã€‚\npackage main import \u0026#34;fmt\u0026#34; func main() { var i interface{} describe(i) i = 42 describe(i) i = \u0026#34;hello\u0026#34; describe(i) } func describe(i interface{}) { fmt.Printf(\u0026#34;(%v, %T)\\n\u0026#34;, i, i) } ç±»å‹æ–­è¨€ ç±»å‹æ–­è¨€æä¾›äº†è®¿é—®æ¥å£å€¼çš„åº•å±‚å…·ä½“å€¼çš„æ–¹æ³•ã€‚\nt := i.(T) è¯¥è¯­å¥æ–­è¨€æ¥å£å€¼iåŒ…å«å…·ä½“ç±»å‹Tï¼Œå¹¶å°†åº•å±‚Tå€¼åˆ†é…ç»™å˜é‡tã€‚å¦‚æœä¸æ˜¯Tç±»å‹ï¼Œé‚£ä¹ˆè¿™ä¸ªè¯­å¥å°†å¼•å‘panicã€‚ ä¸ºäº†æµ‹è¯•æ¥å£å€¼æ˜¯å¦åŒ…å«ç‰¹å®šç±»å‹ï¼Œç±»å‹æ–­è¨€å¯ä»¥è¿”å›ä¸¤ä¸ªå€¼ï¼šåŸºç¡€å€¼å’ŒæŠ¥å‘Šæ–­è¨€æ˜¯å¦æˆåŠŸçš„å¸ƒå°”å€¼ã€‚\nt, ok := i.(T) å¦‚æœæ˜¯Tç±»å‹ï¼Œé‚£ä¹ˆtè¢«èµ‹å€¼å€¼ï¼Œokå°†ä¸ºtrue å¦‚æœä¸æ˜¯ï¼Œokå°†ä¸ºfalseï¼Œtå°†æ˜¯ç±»å‹Tçš„é›¶å€¼ï¼Œå¹¶ä¸”ä¸ä¼šå‘ç”Ÿpanicã€‚ æ³¨æ„è¿™ä¸ªè¯­æ³•å’Œä»mapçš„è¯­æ³•ä¹‹é—´çš„ç›¸ä¼¼æ€§ã€‚\npackage main import \u0026#34;fmt\u0026#34; func main() { var i interface{} = \u0026#34;hello\u0026#34; s := i.(string) fmt.Println(s) s, ok := i.(string) fmt.Println(s, ok) f, ok := i.(float64) fmt.Println(f, ok) f = i.(float64) // panic fmt.Println(f) } ç±»å‹è½¬æ¢ ç±»å‹è½¬æ¢æ˜¯ä¸€ç§å…è®¸å¤šä¸ªç±»å‹æ–­è¨€ä¸²è”çš„æ„é€ ã€‚ ç±»å‹è½¬æ¢ç±»ä¼¼äºå¸¸è§„switchè¯­å¥ï¼Œä½†ç±»å‹è½¬æ¢ä¸­çš„caseæŒ‡å®šç±»å‹ï¼ˆè€Œä¸æ˜¯å€¼ï¼‰ï¼Œå¹¶å°†è¿™äº›å€¼ä¸ç»™å®šæ¥å£å€¼æ‰€æŒæœ‰çš„å€¼çš„ç±»å‹è¿›è¡Œæ¯”è¾ƒã€‚\nswitch v := i.(type) { case T: // here v has type T case S: // here v has type S default: // no match; here v has the same type as i } ç±»å‹è½¬æ¢ä¸­çš„å£°æ˜ä¸ç±»å‹æ–­è¨€iå…·æœ‰ç›¸åŒçš„è¯­æ³• i.(T)ï¼Œä½†ç‰¹å®šç±»å‹Tè¢«å…³é”®å­— type æ‰€å–ä»£ã€‚\npackage main import \u0026#34;fmt\u0026#34; func do(i interface{}) { switch v := i.(type) { case int: fmt.Printf(\u0026#34;Twice %v is %v\\n\u0026#34;, v, v*2) case string: fmt.Printf(\u0026#34;%q is %v bytes long\\n\u0026#34;, v, len(v)) default: fmt.Printf(\u0026#34;I don\u0026#39;t know about type %T!\\n\u0026#34;, v) } } func main() { do(21) do(\u0026#34;hello\u0026#34;) do(true) } æ­¤switchè¯­å¥æµ‹è¯•æ¥å£å€¼iæ˜¯å¦æŒæœ‰Tæˆ–Sç±»å‹çš„å€¼ã€‚åœ¨Tå’ŒSçš„æ¯ç§æƒ…å†µä¸‹ï¼Œå˜é‡vå°†åˆ†åˆ«ä¸ºTæˆ–Så‹ï¼Œå¹¶æŒæœ‰iæŒæœ‰çš„å€¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ˆä¸åŒ¹é…ï¼‰ï¼Œå˜é‡vä¸iå…·æœ‰ç›¸åŒçš„æ¥å£ç±»å‹å’Œå€¼ã€‚\nStringer æ¥å£ fmtåŒ…å®šä¹‰çš„Stringeræ˜¯æœ€æ™®éçš„æ¥å£ä¹‹ä¸€ã€‚\ntype Stringer interface { String() string } Stringeræ˜¯ä¸€ç§å¯ä»¥å°†è‡ªå·±æè¿°ä¸ºå­—ç¬¦ä¸²çš„ç±»å‹ã€‚fmtåŒ…ï¼ˆä»¥åŠè®¸å¤šå…¶ä»–åŒ…ï¼‰æŸ¥æ‰¾æ­¤æ¥å£ä»¥æ‰“å°å€¼ã€‚\npackage main import \u0026#34;fmt\u0026#34; type Person struct { Name string Age int } func (p Person) String() string { return fmt.Sprintf(\u0026#34;%v (%v years)\u0026#34;, p.Name, p.Age) } func main() { a := Person{\u0026#34;Arthur Dent\u0026#34;, 42} z := Person{\u0026#34;Zaphod Beeblebrox\u0026#34;, 9001} fmt.Println(a, z) } ç»ƒä¹ ï¼šStringer ä½¿IPAddrç±»å‹å®ç°fmt.Stringerï¼Œä»¥å°†åœ°å€æ‰“å°ä¸ºç‚¹å››å…ƒç»„ã€‚ä¾‹å¦‚ï¼ŒIPAddrï½›1ï¼Œ2ï¼Œ3ï¼Œ4ï½åº”æ‰“å°ä¸ºâ€œ1.2.3.4â€ã€‚ ä»£ç ä»…ä¾›å‚è€ƒ\npackage main import \u0026#34;fmt\u0026#34; type IPAddr [4]byte // TODO: Add a \u0026#34;String() string\u0026#34; method to IPAddr. func (ip IPAddr) String() string { return fmt.Sprintf(\u0026#34;%d.%d.%d.%d\u0026#34;, ip[0], ip[1], ip[2], ip[3]) } func main() { hosts := map[string]IPAddr{ \u0026#34;loopback\u0026#34;: {127, 0, 0, 1}, \u0026#34;googleDNS\u0026#34;: {8, 8, 8, 8}, } for name, ip := range hosts { fmt.Printf(\u0026#34;%v: %v\\n\u0026#34;, name, ip) } } Errors æ¥å£ Goç¨‹åºç”¨é”™è¯¯å€¼è¡¨ç¤ºé”™è¯¯çŠ¶æ€ã€‚é”™è¯¯ç±»å‹æ˜¯ä¸€ä¸ªç±»ä¼¼äºfmt.Stringerçš„å†…ç½®æ¥å£ã€‚ï¼š\ntype error interface { Error() string } ï¼ˆä¸fmt.Stringerä¸€æ ·ï¼ŒfmtåŒ…åœ¨æ‰“å°å€¼æ—¶ä¼šæŸ¥æ‰¾erroræ¥å£ã€‚ï¼‰ å‡½æ•°é€šå¸¸è¿”å›ä¸€ä¸ªé”™è¯¯å€¼ï¼Œè°ƒç”¨ä»£ç åº”è¯¥é€šè¿‡æµ‹è¯•é”™è¯¯æ˜¯å¦ç­‰äºé›¶æ¥å¤„ç†é”™è¯¯ã€‚\ni, err := strconv.Atoi(\u0026#34;42\u0026#34;) if err != nil { fmt.Printf(\u0026#34;couldn\u0026#39;t convert number: %v\\n\u0026#34;, err) return } fmt.Println(\u0026#34;Converted integer:\u0026#34;, i) nil è¡¨ç¤ºæˆåŠŸï¼›é nil è¡¨ç¤ºå¤±è´¥ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;time\u0026#34; ) type MyError struct { When time.Time What string } func (e *MyError) Error() string { return fmt.Sprintf(\u0026#34;at %v, %s\u0026#34;, e.When, e.What) } func run() error { return \u0026amp;MyError{ time.Now(), \u0026#34;it didn\u0026#39;t work\u0026#34;, } } func main() { if err := run(); err != nil { fmt.Println(err) } } ç»ƒä¹ ï¼šerror å¤åˆ¶å‰é¢ç»ƒä¹ ä¸­çš„Sqrtå‡½æ•°ï¼Œå¹¶å¯¹å…¶è¿›è¡Œä¿®æ”¹ä»¥è¿”å›é”™è¯¯å€¼ã€‚å½“ç»™å®šè´Ÿæ•°æ—¶ï¼ŒSqrtåº”è¯¥è¿”å›ä¸€ä¸ªéé›¶é”™è¯¯å€¼ï¼Œå› ä¸ºå®ƒä¸æ”¯æŒå¤æ•°ã€‚åˆ›å»ºæ–°ç±»å‹\ntype ErrNegativeSqrt float64 å®ç°error æ¥å£\nfunc (e ErrNegativeSqrt) Error() string ä½¿å¾—ErrNegativeSqrtï¼ˆ-2ï¼‰.Errorï¼ˆï¼‰è¿”å›\u0026quot;cannot Sqrt negative number: -2\u0026quot;.ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math\u0026#34; ) type ErrNegativeSqrt float64 func (e ErrNegativeSqrt) Error() string { return fmt.Sprintf(\u0026#34;cannot Sqrt negative number: %v\u0026#34;, float64(e)) } func Sqrt(x float64) (float64, error) { if x \u0026lt; 0 { return 0, ErrNegativeSqrt(x) } var z = 1.0 var old float64 for math.Abs(old-z) \u0026gt;= 0.000001 { old = z z -= (z*z - x) / (2 * z) } return z, nil } func main() { fmt.Println(Sqrt(2)) fmt.Println(Sqrt(-2)) } Reader æ¥å£ ioåŒ…æŒ‡å®šio.Readeræ¥å£ï¼Œè¯¥æ¥å£è¡¨ç¤ºæ•°æ®æµçš„è¯»å–ç«¯ã€‚Goæ ‡å‡†åº“åŒ…å«è¯¥æ¥å£çš„è®¸å¤šå®ç°ï¼ŒåŒ…æ‹¬æ–‡ä»¶ã€ç½‘ç»œè¿æ¥ã€å‹ç¼©å™¨ã€å¯†ç ç­‰ã€‚io.Readeræ¥å£æœ‰ä¸€ä¸ªReadæ–¹æ³•ï¼š\nfunc (T) Read(b []byte) (n int, err error) Readç”¨æ•°æ®å¡«å……ç»™å®šçš„å­—èŠ‚ç‰‡ï¼Œå¹¶è¿”å›å¡«å……çš„å­—èŠ‚æ•°å’Œé”™è¯¯å€¼ã€‚å½“æµç»“æŸæ—¶ï¼Œå®ƒè¿”å›ä¸€ä¸ªio.EOFé”™è¯¯ã€‚ ç¤ºä¾‹ä»£ç åˆ›å»ºä¸€ä¸ªstrings.Readerï¼Œå¹¶ä¸€æ¬¡æ¶ˆè€—å…¶è¾“å‡ºçš„8ä¸ªå­—èŠ‚ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;io\u0026#34; \u0026#34;strings\u0026#34; ) func main() { r := strings.NewReader(\u0026#34;Hello, Reader!\u0026#34;) b := make([]byte, 8) for { n, err := r.Read(b) fmt.Printf(\u0026#34;n = %v err = %v b = %v\\n\u0026#34;, n, err, b) fmt.Printf(\u0026#34;b[:n] = %q\\n\u0026#34;, b[:n]) if err == io.EOF { break } } } ç»ƒä¹ ï¼šReader å®ç°ä¸€ä¸ªReaderç±»å‹ï¼Œè¯¥ç±»å‹å‘å‡ºASCIIå­—ç¬¦â€œaâ€çš„æ— é™æµã€‚ å‚è€ƒ\npackage main import \u0026#34;golang.org/x/tour/reader\u0026#34; type MyReader struct{} // TODO: Add a Read([]byte) (int, error) method to MyReader. func (mr MyReader) Read(b []byte) (int, error) { for i := range b { b[i] = \u0026#39;A\u0026#39; } return len(b), nil } func main() { reader.Validate(MyReader{}) } ç»ƒä¹ ï¼šrot13Reader ä¸€ç§å¸¸è§çš„æ¨¡å¼æ˜¯ä¸€ä¸ªio.Readerï¼Œå®ƒåŒ…è£…å¦ä¸€ä¸ªio.Leaderï¼Œä»¥æŸç§æ–¹å¼ä¿®æ”¹æµã€‚ä¾‹å¦‚ï¼Œgzip.NewReaderå‡½æ•°æ¥å—ä¸€ä¸ªio.Readerï¼ˆå‹ç¼©æ•°æ®æµï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ª*gzip.Readerï¼Œè¯¥å‡½æ•°è¿˜å®ç°äº†io.Readersï¼ˆè§£å‹ç¼©æ•°æ®æµï¼‰ã€‚å®ç°ä¸€ä¸ªrot13Readerï¼Œå®ƒå®ç°io.Readerå¹¶ä»io.Readersè¯»å–ï¼Œé€šè¿‡å°†rot13æ›¿æ¢å¯†ç åº”ç”¨äºæ‰€æœ‰å­—æ¯å­—ç¬¦æ¥ä¿®æ”¹æµã€‚rot13Readerç±»å‹æ˜¯ä¸ºæ‚¨æä¾›çš„ã€‚é€šè¿‡å®ç°å®ƒçš„Readæ–¹æ³•ï¼Œä½¿å®ƒæˆä¸ºä¸€ä¸ªio.Readerã€‚\npackage main import ( \u0026#34;io\u0026#34; \u0026#34;os\u0026#34; \u0026#34;strings\u0026#34; ) type rot13Reader struct { r io.Reader } func (rr *rot13Reader) Read(p []byte) (n int, err error) { for { b := make([]byte, 1024, 2048) read, err1 := rr.r.Read(b) if err1 == io.EOF { break } for i, b2 := range b[:read] { p[i] = rot13byte(b2) } n += read } return n, nil } func rot13byte(b byte) byte { s := rune(b) if s \u0026gt;= \u0026#39;a\u0026#39; \u0026amp;\u0026amp; s \u0026lt;= \u0026#39;m\u0026#39; || s \u0026gt;= \u0026#39;A\u0026#39; \u0026amp;\u0026amp; s \u0026lt;= \u0026#39;M\u0026#39; { b += 13 } if s \u0026gt;= \u0026#39;n\u0026#39; \u0026amp;\u0026amp; s \u0026lt;= \u0026#39;z\u0026#39; || s \u0026gt;= \u0026#39;N\u0026#39; \u0026amp;\u0026amp; s \u0026lt;= \u0026#39;Z\u0026#39; { b -= 13 } return b } func main() { s := strings.NewReader(\u0026#34;Lbh penpxrq gur pbqr!\u0026#34;) r := rot13Reader{s} io.Copy(os.Stdout, \u0026amp;r) } Images image åŒ…å®šä¹‰ image æ¥å£ï¼š\npackage image type Image interface { ColorModel() color.Model Bounds() Rectangle At(x, y int) color.Color } æ³¨æ„ï¼šBoundsæ–¹æ³•çš„Rectangleè¿”å›å€¼å®é™…ä¸Šæ˜¯ä¸€ä¸ªå›¾åƒã€‚Rectangleï¼Œå› ä¸ºå£°æ˜åœ¨åŒ…å›¾åƒä¸­ã€‚color.colorå’Œcolor.Modelç±»å‹ä¹Ÿæ˜¯æ¥å£ï¼Œä½†æˆ‘ä»¬å°†é€šè¿‡ä½¿ç”¨é¢„å®šä¹‰çš„å®ç°color.RGBAå’Œcolor.RGBAModelæ¥å¿½ç•¥è¿™ä¸€ç‚¹ã€‚è¿™äº›æ¥å£å’Œç±»å‹ç”± image/color åŒ…æŒ‡å®š\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;image\u0026#34; ) func main() { m := image.NewRGBA(image.Rect(0, 0, 100, 100)) fmt.Println(m.Bounds()) fmt.Println(m.At(0, 0).RGBA()) } ç»ƒä¹ ï¼šimage è¿˜è®°å¾—ä½ ä¹‹å‰å†™çš„å›¾ç‰‡ç”Ÿæˆå™¨å—ï¼Ÿè®©æˆ‘ä»¬å†å†™ä¸€ä¸ªï¼Œä½†è¿™æ¬¡å®ƒå°†è¿”å›image.imageçš„å®ç°ï¼Œè€Œä¸æ˜¯æ•°æ®åˆ‡ç‰‡ã€‚ å®šä¹‰æ‚¨è‡ªå·±çš„å›¾åƒç±»å‹ï¼Œå®ç°å¿…è¦çš„æ–¹æ³•ï¼Œç„¶åè°ƒç”¨pic.ShowImageã€‚ Boundsåº”è¯¥è¿”å›ä¸€ä¸ª image.Rectangleï¼Œç±»ä¼¼äºå›¾åƒã€‚çŸ©å½¢ï¼ˆ0ï¼Œ0ï¼Œwï¼Œhï¼‰ã€‚ ColorModelåº”è¿”å›color.RGBAModelã€‚ Atåº”è¯¥è¿”å›ä¸€ç§é¢œè‰²ï¼›æœ€åä¸€ä¸ªå›¾ç‰‡ç”Ÿæˆå™¨ä¸­çš„å€¼vå¯¹åº”äºé¢œè‰²ã€‚RGBA{vï¼Œvï¼Œ255ï¼Œ255}ã€‚\npackage main import ( \u0026#34;image\u0026#34; \u0026#34;image/color\u0026#34; \u0026#34;golang.org/x/tour/pic\u0026#34; ) type Image struct{} func (i Image) ColorModel() color.Model { return color.RGBAModel } func (i Image) Bounds() image.Rectangle { return image.Rect(0, 0, 200, 200) } func (i Image) At(x, y int) color.Color { return color.RGBA{uint8(x % 255), uint8(y % 255), 255, 255} } func main() { m := Image{} pic.ShowImage(m) } "
},
{
	"uri": "http://blog.911015.com/wx/20230528.html",
	"title": " Goè¯­è¨€æ³›å‹å…¥é—¨",
	"tags": null,
	"description": "Goè¯­è¨€åœ¨ 1.18ä¸­å¼•å…¥äº†å¯¹ä½¿ç”¨å‚æ•°åŒ–ç±»å‹çš„æ³›å‹ä»£ç çš„æ–°æ”¯æŒã€‚æ³›å‹æ˜¯ä¸€ç§ç¼–å†™ä»£ç çš„æ–¹å¼ï¼Œä¸æ‰€ä½¿ç”¨çš„ç‰¹å®šç±»å‹æ— å…³ã€‚",
	"content": "Goè¯­è¨€æ³›å‹å…¥é—¨ Goè¯­è¨€åœ¨ 1.18ä¸­å¼•å…¥äº†å¯¹ä½¿ç”¨å‚æ•°åŒ–ç±»å‹çš„æ³›å‹ä»£ç çš„æ–°æ”¯æŒã€‚æ³›å‹æ˜¯ä¸€ç§ç¼–å†™ä»£ç çš„æ–¹å¼ï¼Œä¸æ‰€ä½¿ç”¨çš„ç‰¹å®šç±»å‹æ— å…³ã€‚å‡½æ•°å’Œç±»å‹ç°åœ¨å¯ä»¥è¢«ç¼–å†™ä¸ºä½¿ç”¨ä¸€ç»„ç±»å‹ä¸­çš„ä»»ä½•ä¸€ä¸ªã€‚æœ¬è¯¾å±•ç¤ºäº†åœ¨ä»£ç ä¸­ä½¿ç”¨æ³›å‹çš„ä¸€äº›ç¤ºä¾‹ã€‚\nç±»å‹å‚æ•°æ³›å‹ Goå‡½æ•°å¯ä»¥ä½¿ç”¨ç±»å‹å‚æ•°è®©å‡½æ•°æ”¯æŒå¤šä¸ªç±»å‹ã€‚å‡½æ•°çš„ç±»å‹å‚æ•°ç”¨ä¸­æ‹¬å·åŒ…è£¹ï¼Œä½äºå‡½æ•°çš„å‚æ•°ä¹‹å‰ã€‚\nfunc Index[T comparable](s []T, x T) int è¿™ä¸ªå£°æ˜æ„å‘³ç€sæ˜¯ä»»ä½•ç±»å‹Tçš„ä¸€ä¸ªåˆ‡ç‰‡ï¼Œå®ƒæ»¡è¶³comparableå†…ç½®çº¦æŸã€‚xä¹Ÿæ˜¯ç›¸åŒç±»å‹çš„å€¼ã€‚ compatibleæ˜¯ä¸€ä¸ªæœ‰ç”¨çš„çº¦æŸï¼Œå¯ä»¥ä½¿ç”¨==å’Œ!=ç±»å‹å€¼ä¸Šçš„è¿ç®—ç¬¦ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å®ƒå°†ä¸€ä¸ªå€¼ä¸æ‰€æœ‰åˆ‡ç‰‡å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œç›´åˆ°æ‰¾åˆ°åŒ¹é…ã€‚æ­¤Indexå‡½æ•°é€‚ç”¨äºä»»ä½•æ”¯æŒæ¯”è¾ƒçš„ç±»å‹ã€‚\npackage main import \u0026#34;fmt\u0026#34; // Index returns the index of x in s, or -1 if not found. func Index[T comparable](s []T, x T) int { for i, v := range s { // v and x are type T, which has the comparable // constraint, so we can use == here. if v == x { return i } } return -1 } func main() { // Index works on a slice of ints si := []int{10, 20, 15, -10} fmt.Println(Index(si, 15)) // Index also works on a slice of strings ss := []string{\u0026#34;foo\u0026#34;, \u0026#34;bar\u0026#34;, \u0026#34;baz\u0026#34;} fmt.Println(Index(ss, \u0026#34;hello\u0026#34;)) } æ³›å‹ç±»å‹ é™¤äº†æ³›å‹å‡½æ•°å¤–ï¼ŒGoè¿˜æ”¯æŒæ³›å‹ç±»å‹ã€‚å¯ä»¥ä½¿ç”¨ç±»å‹å‚æ•°å¯¹ç±»å‹è¿›è¡Œå‚æ•°åŒ–ï¼Œè¿™å¯¹äºå®ç°æ³›å‹æ•°æ®ç»“æ„éå¸¸æœ‰ç”¨ã€‚æ­¤ç¤ºä¾‹æ¼”ç¤ºäº†ä¸€ä¸ªç®€å•çš„ç±»å‹\npackage main // List represents a singly-linked list that holds // values of any type. type List[T any] struct { next *List[T] val T } func main() { } å£°æ˜ç±»å‹çº¦æŸ æˆ‘ä»¬å¯ä»¥å°†ç±»å‹çº¦æŸå£°æ˜ä¸ºæ¥å£ã€‚çº¦æŸå…è®¸å®ç°æ¥å£çš„ä»»ä½•ç±»å‹ã€‚ï¼Œä»¥ä¸‹ä»£ç å£°æ˜ç±»å‹çº¦æŸï¼š\ntype Number interface { int64 | float64 } è¿™æ ·ï¼Œç±»å‹å‚æ•°çº¦æŸä¸ºint64æˆ–float64æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ­¤Numberç±»å‹çº¦æŸï¼Œè€Œä¸æ˜¯å†™å‡ºint64|float64ã€‚ä¸‹é¢ä½¿ç”¨Numberç±»å‹å‚æ•°å®ç°ä¸€ä¸ªSumNumberå‡½æ•°\nfunc SumNumbers[K comparable, V Number](m map[K]V) V { var s V for _, v := range m { s += v } return s } ç»ƒä¹  å®ç°ä¸€ä¸ªæ³›å‹ç‰ˆæ±‚è¾ƒå°å€¼çš„å‡½æ•°Min()ï¼Œè¦æ±‚æ”¯æŒ int int8 int32 int64å››ç§ç±»å‹ï¼› å‚è€ƒä»£ç è§Github\n"
},
{
	"uri": "http://blog.911015.com/wx/20230529.html",
	"title": " Goè¯­è¨€å¹¶å‘å…¥é—¨",
	"tags": null,
	"description": "Goæä¾›çš„å¹¶å‘åŠŸèƒ½æ˜¯æ ¸å¿ƒè¯­è¨€çš„ä¸€éƒ¨åˆ†ã€‚goroutineæ˜¯ä¸€ä¸ªç”±Goè¿è¡Œæ—¶ç®¡ç†çš„è½»é‡çº§çº¿ç¨‹ã€‚",
	"content": "å¹¶å‘å…¥é—¨ Goæä¾›çš„å¹¶å‘åŠŸèƒ½æ˜¯æ ¸å¿ƒè¯­è¨€çš„ä¸€éƒ¨åˆ†ã€‚\nGoroutines goroutineæ˜¯ä¸€ä¸ªç”±Goè¿è¡Œæ—¶ç®¡ç†çš„è½»é‡çº§çº¿ç¨‹ã€‚\ngo f(x, y, z) å¼€å§‹è¿è¡Œæ–°çš„goroutine f(x, y, z) fã€xã€yå’Œzçš„æ±‚å€¼å‘ç”Ÿåœ¨å½“å‰goroutineä¸­ï¼Œfçš„æ‰§è¡Œå‘ç”Ÿåœ¨æ–°goroutineã€‚ Goroutinesåœ¨ç›¸åŒçš„åœ°å€ç©ºé—´ä¸­è¿è¡Œï¼Œå› æ­¤å¯¹å…±äº«å†…å­˜çš„è®¿é—®å¿…é¡»åŒæ­¥ã€‚syncåŒ…æä¾›äº†æœ‰ç”¨çš„å¹¶å‘åŸè¯­ï¼Œå°½ç®¡Goä¸­å¹¶ä¸éœ€è¦å®ƒä»¬ï¼Œå› ä¸ºè¿˜æœ‰å…¶ä»–åŸºå…ƒã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;time\u0026#34; ) func say(s string) { for i := 0; i \u0026lt; 5; i++ { time.Sleep(100 * time.Millisecond) fmt.Println(s) } } func main() { go say(\u0026#34;world\u0026#34;) say(\u0026#34;hello\u0026#34;) } Channels Channelæ˜¯ä¸€ç§ç±»å‹åŒ–çš„ç®¡é“ï¼Œé€šè¿‡å®ƒå¯ä»¥ä½¿ç”¨é€šé“æ“ä½œç¬¦\u0026lt;-å‘é€å’Œæ¥æ”¶å€¼ã€‚\nch \u0026lt;- v // Send v to channel ch. v := \u0026lt;-ch // Receive from ch, and // assign value to v. æ•°æ®æ²¿ç®­å¤´æ–¹å‘æµåŠ¨ã€‚ ä¸mapå’Œsliceä¸€æ ·ï¼Œ channelå¿…é¡»åœ¨ä½¿ç”¨å‰åˆå§‹åŒ–ï¼š\nch := make(chan int) é»˜è®¤æƒ…å†µä¸‹ï¼Œå‘é€å’Œæ¥æ”¶å—ï¼Œç›´åˆ°å¯¹æ–¹å‡†å¤‡å¥½ä¸ºæ­¢ã€‚è¿™å…è®¸goroutineåœ¨æ²¡æœ‰æ˜¾å¼é”æˆ–æ¡ä»¶å˜é‡çš„æƒ…å†µä¸‹è¿›è¡ŒåŒæ­¥ã€‚\npackage main import \u0026#34;fmt\u0026#34; func sum(s []int, c chan int) { sum := 0 for _, v := range s { sum += v } c \u0026lt;- sum // send sum to c } func main() { s := []int{7, 2, 8, -9, 4, 0} c := make(chan int) go sum(s[:len(s)/2], c) go sum(s[len(s)/2:], c) x, y := \u0026lt;-c, \u0026lt;-c // receive from c fmt.Println(x, y, x+y) } ç¤ºä¾‹ä»£ç å¯¹ä¸€ä¸ªåˆ‡ç‰‡ä¸­çš„æ•°å­—æ±‚å’Œï¼Œå°†å·¥ä½œåˆ†é…åˆ°ä¸¤ä¸ªgoroutineä¹‹é—´ã€‚ä¸€æ—¦ä¸¤ä¸ªgoroutineéƒ½å®Œæˆäº†è®¡ç®—ï¼Œå®ƒå°±ä¼šè®¡ç®—å‡ºæœ€ç»ˆç»“æœã€‚\nBuffered Channels é€šé“å¯ä»¥è¿›è¡Œç¼“å†²ã€‚æä¾›ç¼“å†²åŒºé•¿åº¦ä½œä¸ºåˆå§‹åŒ–ç¼“å†²é€šé“çš„ç¬¬äºŒä¸ªå‚æ•°ï¼š\nch := make(chan int, 100) ä»…å½“ç¼“å†²åŒºå·²æ»¡æ—¶å‘é€åˆ°ç¼“å†²é€šé“é˜»å¡ã€‚ç¼“å†²åŒºä¸ºç©ºæ—¶æ¥æ”¶é˜»å¡ã€‚ ä¿®æ”¹ç¤ºä¾‹ä»¥ä½¿ç¼“å†²åŒºæº¢å‡ºï¼Œç„¶åçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚\npackage main import \u0026#34;fmt\u0026#34; func main() { ch := make(chan int, 2) ch \u0026lt;- 1 ch \u0026lt;- 2 fmt.Println(\u0026lt;-ch) fmt.Println(\u0026lt;-ch) } Range and Close å‘é€æ–¹å¯ä»¥å…³é—­ä¸€ä¸ªé€šé“ï¼Œä»¥æŒ‡ç¤ºä¸å†å‘é€ä»»ä½•å€¼ã€‚æ¥æ”¶å™¨å¯ä»¥é€šè¿‡ä¸ºæ¥æ”¶è¡¨è¾¾å¼åˆ†é…ç¬¬äºŒä¸ªå‚æ•°æ¥æµ‹è¯•é€šé“æ˜¯å¦å·²å…³é—­ï¼šå¦‚ä¸‹\nv, ok := \u0026lt;-ch å¦‚æœæ²¡æœ‰æ›´å¤šçš„å€¼å¯æ¥æ”¶å¹¶ä¸”é€šé“å·²å…³é—­ï¼Œåˆ™okä¸ºfalseã€‚ è¿˜å¯ä»¥é€šè¿‡ iï¼š=range c çš„å¾ªç¯é‡å¤æ¥æ”¶æ¥è‡ªé€šé“çš„å€¼ï¼Œç›´åˆ°é€šé“å…³é—­ï¼Œå¾ªç¯é€€å‡ºã€‚\npackage main import ( \u0026#34;fmt\u0026#34; ) func fibonacci(n int, c chan int) { x, y := 0, 1 for i := 0; i \u0026lt; n; i++ { c \u0026lt;- x x, y = y, x+y } close(c) } func main() { c := make(chan int, 10) go fibonacci(cap(c), c) for i := range c { fmt.Println(i) } } æ³¨æ„ï¼š\nåªæœ‰å‘é€æ–¹åº”è¯¥å…³é—­é¢‘é“ï¼Œè€Œä¸æ˜¯æ¥æ”¶æ–¹ã€‚åœ¨å…³é—­çš„é¢‘é“ä¸Šå‘é€ä¼šå¼•èµ·panicã€‚ channelä¸åƒæ–‡ä»¶ï¼›é€šå¸¸ä¸éœ€è¦å…³é—­å®ƒä»¬ã€‚åªæœ‰å½“æ¥æ”¶å™¨å¿…é¡»è¢«å‘ŠçŸ¥æ²¡æœ‰æ›´å¤šçš„å€¼åˆ°æ¥æ—¶ï¼Œä¾‹å¦‚ç»ˆæ­¢rangeå¾ªç¯æ—¶ï¼Œæ‰éœ€è¦å…³é—­ã€‚ Select selectè¯­å¥å…è®¸goroutineç­‰å¾…å¤šä¸ªé€šä¿¡æ“ä½œã€‚ ä¸€ä¸ªselecté˜»å¡ï¼Œç›´åˆ°å®ƒçš„ä¸€ä¸ªcaseå¯ä»¥è¿è¡Œï¼Œç„¶åå®ƒæ‰§è¡Œé‚£ä¸ªcaseã€‚å¦‚æœå¤šä¸ªcaseå‡†å¤‡å¥½äº†ï¼Œå®ƒä¼šéšæœºé€‰æ‹©ä¸€ä¸ªã€‚\npackage main import \u0026#34;fmt\u0026#34; func fibonacci(c, quit chan int) { x, y := 0, 1 for { select { case c \u0026lt;- x: x, y = y, x+y case \u0026lt;-quit: fmt.Println(\u0026#34;quit\u0026#34;) return } } } func main() { c := make(chan int) quit := make(chan int) go func() { for i := 0; i \u0026lt; 10; i++ { fmt.Println(\u0026lt;-c) } quit \u0026lt;- 0 }() fibonacci(c, quit) } å¦‚æœæ²¡æœ‰å…¶ä»–æ¡ˆä¾‹å‡†å¤‡å°±ç»ªï¼Œåˆ™é€‰æ‹©ä¸­çš„é»˜è®¤æ¡ˆä¾‹å°†è¿è¡Œã€‚ä½¿ç”¨é»˜è®¤æƒ…å†µå°è¯•åœ¨ä¸é˜»æ­¢çš„æƒ…å†µä¸‹å‘é€æˆ–æ¥æ”¶ï¼š\nselect { case i := \u0026lt;-c: // use i default: // receiving from c would block } package main import ( \u0026#34;fmt\u0026#34; \u0026#34;time\u0026#34; ) func main() { tick := time.Tick(100 * time.Millisecond) boom := time.After(500 * time.Millisecond) for { select { case \u0026lt;-tick: fmt.Println(\u0026#34;tick.\u0026#34;) case \u0026lt;-boom: fmt.Println(\u0026#34;BOOM!\u0026#34;) return default: fmt.Println(\u0026#34; .\u0026#34;) time.Sleep(50 * time.Millisecond) } } } Exercise: Equivalent Binary Trees ç»ƒä¹ ï¼šç­‰ä»·äºŒå‰æ ‘ ä»£ç å·²åŒæ­¥ä»…ä¾›å‚è€ƒ github\nsync.Mutex æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†channelå¯¹äºgoroutinesä¹‹é—´çš„äº¤æµæ˜¯å¤šä¹ˆçš„å¥½ã€‚ ä½†å¦‚æœæˆ‘ä»¬ä¸éœ€è¦é€šè®¯å‘¢ï¼Ÿå¦‚æœæˆ‘ä»¬åªæƒ³ç¡®ä¿ä¸€æ¬¡åªæœ‰ä¸€ä¸ªgoroutineå¯ä»¥è®¿é—®ä¸€ä¸ªå˜é‡ä»¥é¿å…å†²çªï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ è¿™ä¸ªæ¦‚å¿µè¢«ç§°ä¸ºäº’æ–¥ï¼Œæä¾›äº’æ–¥çš„æ•°æ®ç»“æ„çš„ä¼ ç»Ÿåç§°æ˜¯_mutex_ã€‚ Goçš„æ ‡å‡†åº“é€šè¿‡sync.MutexåŠå…¶ä¸¤ç§æ–¹æ³•æä¾›äº’æ–¥ï¼š\nLock Unlock æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªè¦åœ¨äº’æ–¥ä¸­æ‰§è¡Œçš„ä»£ç å—ï¼Œæ–¹æ³•æ˜¯ç”¨Incæ–¹æ³•ä¸­æ‰€ç¤ºçš„Lockå’ŒUnlockè°ƒç”¨åŒ…å›´å®ƒã€‚ æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨deferæ¥ç¡®ä¿äº’æ–¥å¯¹è±¡å°†åƒValueæ–¹æ³•ä¸­é‚£æ ·è¢«è§£é”ã€‚\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;sync\u0026#34; \u0026#34;time\u0026#34; ) // SafeCounter is safe to use concurrently. type SafeCounter struct { mu sync.Mutex v map[string]int } // Inc increments the counter for the given key. func (c *SafeCounter) Inc(key string) { c.mu.Lock() // Lock so only one goroutine at a time can access the map c.v. c.v[key]++ c.mu.Unlock() } // Value returns the current value of the counter for the given key. func (c *SafeCounter) Value(key string) int { c.mu.Lock() // Lock so only one goroutine at a time can access the map c.v. defer c.mu.Unlock() return c.v[key] } func main() { c := SafeCounter{v: make(map[string]int)} for i := 0; i \u0026lt; 1000; i++ { go c.Inc(\u0026#34;somekey\u0026#34;) } time.Sleep(time.Second) fmt.Println(c.Value(\u0026#34;somekey\u0026#34;)) } Exercise: Web Crawlerï¼ˆç½‘ç»œçˆ¬è™«ï¼‰ ä»£ç å·²åŒæ­¥ä»…ä¾›å‚è€ƒ Github\n"
},
{
	"uri": "http://blog.911015.com/contact.html",
	"title": "ä¸æˆ‘è”ç³»",
	"tags": null,
	"description": "è”ç³»æ–¹å¼",
	"content": "\rEmailï¼š\rcreate98715@duck.com\rQQï¼š\r3336449889\rå…³æ³¨å…¬ä¼—å·é¢†å–Goå­¦ä¹ èµ„æ–™\nå…³æ³¨å…¬ä¼—å·é¢†å–Goå­¦ä¹ èµ„æ–™\n"
},
{
	"uri": "http://blog.911015.com/wx/",
	"title": "å…¬ä¼—å·æ–‡ç« ",
	"tags": null,
	"description": "Goè¯­è¨€å…¥é—¨ä¹‹è·¯å…¬ä¼—å·æ–‡ç« ",
	"content": "\rGoè¯­è¨€æµç¨‹æ§åˆ¶:Defer ç¼–ç¨‹è¯­è¨€è¿™ä¹ˆå¤šæ€ä¹ˆé€‰ï¼Ÿ Goè¯­è¨€æ•°æ®ç»“æ„ï¼š Array å’ŒSlice Go è¯­è¨€æ•°æ®ç»“æ„ï¼šMaps Go è¯­è¨€æ•°æ®ç»“æ„ï¼šç»“æ„ä½“ Go è¯­è¨€å…¥é—¨ï¼šæ–¹æ³• Go è¯­è¨€ä¸­çš„æ¥å£ï¼šInterface Goè¯­è¨€æ³›å‹å…¥é—¨ Goè¯­è¨€å¹¶å‘å…¥é—¨ "
},
{
	"uri": "http://blog.911015.com/categories/",
	"title": "Categories",
	"tags": null,
	"description": "",
	"content": ""
},
{
	"uri": "http://blog.911015.com/tags/",
	"title": "Tags",
	"tags": null,
	"description": "",
	"content": ""
}]
