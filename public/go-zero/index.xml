<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>go-zeroåº”ç”¨å®è·µ on Goè¯­è¨€å…¥é—¨</title>
    <link>http://blog.911015.com/go-zero/</link>
    <description>Recent content in go-zeroåº”ç”¨å®è·µ on Goè¯­è¨€å…¥é—¨</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language><atom:link href="http://blog.911015.com/go-zero/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>go-zero å•ä½“åº”ç”¨å®è·µï¼ˆä¸€ï¼‰</title>
      <link>http://blog.911015.com/go-zero/01.html</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>http://blog.911015.com/go-zero/01.html</guid>
      <description>ç¯å¢ƒæ­å»º å®˜æ–¹æ–‡æ¡£
Golang ç¯å¢ƒå®‰è£… ğŸ‘‰ golang Go Moduleè®¾ç½® go env -w GO111MODULE=&amp;quot;on&amp;quot; goctlå®‰è£… ğŸ‘‰ goctl protoc &amp;amp; protoc-gen-goå®‰è£… goctl env check -i -f --verbose etcdï¼Œredisï¼Œmysql ç­‰å¼€å‘å·¥å…·å¯ä»¥é€šè¿‡Docker å¿«é€Ÿæ­å»ºï¼›å¯å‚è€ƒğŸ‘‰ gonivinck
åˆ›å»ºå•ä½“åº”ç”¨ 1ã€åˆ›å»ºç›®å½• mkdir user-login cd user-login go mod init user-login 2ã€ç¼–è¾‘apiæ–‡ä»¶ userlogin.api apiè¯­æ³•ä»‹ç»
type ( RegisterRequest { Name string `json:&amp;#34;name&amp;#34;` Email string `json:&amp;#34;email&amp;#34;` Password string `json:&amp;#34;password&amp;#34;` } RegisterResponse { ID int `json:&amp;#34;id&amp;#34;` Name string `json:&amp;#34;name&amp;#34;` Email string `json:&amp;#34;email&amp;#34;` } LoginRequest { Email string `json:&amp;#34;email&amp;#34;` Password string `json:&amp;#34;password&amp;#34;` } LoginResponse { Token string `json:&amp;#34;token&amp;#34;` Expire int64 `json:&amp;#34;expire&amp;#34;` } ) service userlogin-api { @handler RegisterHandler post /api/register(RegisterRequest) returns (RegisterResponse); @handler LoginHandler post /api/login(LoginRequest) returns (LoginResponse); } 3ã€æ‰§è¡Œç”Ÿæˆä»£ç å‘½ä»¤ goctl api go -api userlogin.</description>
    </item>
    
    <item>
      <title>go-zero å•ä½“åº”ç”¨å®è·µï¼ˆäºŒï¼‰</title>
      <link>http://blog.911015.com/go-zero/02.html</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>http://blog.911015.com/go-zero/02.html</guid>
      <description>ä¸­é—´ä»¶ä½¿ç”¨ åœ¨go-zeroä¸­ï¼Œä¸­é—´ä»¶å¯ä»¥åˆ†ä¸ºè·¯ç”±ä¸­é—´ä»¶å’Œå…¨å±€ä¸­é—´ä»¶ï¼Œè·¯ç”±ä¸­é—´ä»¶æ˜¯æŒ‡æŸä¸€äº›ç‰¹å®šè·¯ç”±éœ€è¦å®ç°ä¸­é—´ä»¶é€»è¾‘ï¼Œå…¶å’Œjwtç±»ä¼¼ï¼Œæ²¡æœ‰æ”¾åœ¨jwt:xxxä¸‹çš„è·¯ç”±ä¸ä¼šä½¿ç”¨ä¸­é—´ä»¶åŠŸèƒ½ï¼Œ è€Œå…¨å±€ä¸­é—´ä»¶çš„æœåŠ¡èŒƒå›´åˆ™æ˜¯æ•´ä¸ªæœåŠ¡ã€‚
è·¯ç”±ä¸­é—´ä»¶ 1ã€ç¼–è¾‘ api æ–‡ä»¶ userlogin/userlogin.api ç”Ÿå‘½æ¥å£éœ€è¦æ·»åŠ çš„ä¸­é—´ä»¶ï¼Œå¤šä¸ªä¸­é—´ä»¶ç”¨é€—å·åˆ†éš”
@server( middleware : Tagging,Version ) service userlogin-api { @handler Tags get /api/tags returns (TagResponse) } 2ã€goctl api å‘½ä»¤é‡æ–°æ‰§è¡Œ ç”Ÿæˆmiddleware æ–‡ä»¶
userlogin/internal/middleware/taggingmiddleware.go userlogin/internal/middleware/versionmiddleware.go å¯ä»¥çœ‹åˆ°è·¯ç”±æ–‡ä»¶ä¸­userlogin/internal/handler/routes.go æ–°å¢äº†ä¸€ä¸‹ä»£ç 
server.AddRoutes( rest.WithMiddlewares( []rest.Middleware{serverCtx.Tagging, serverCtx.Version}, []rest.Route{ { Method: http.MethodGet, Path: &amp;#34;/api/tags&amp;#34;, Handler: TagsHandler(serverCtx), }, }..., ), ) 3ã€ æ–‡ä»¶ä¸­æ·»åŠ ä¸­é—´ä»¶ä¾èµ– userlogin/internal/svc/servicecontext.go
type ServiceContext struct { Config config.Config Tagging rest.Middleware Version rest.Middleware UserModel user.UserModel } func NewServiceContext(c config.Config) *ServiceContext { conn := sqlx.</description>
    </item>
    
    <item>
      <title>go-zero å•ä½“åº”ç”¨å®è·µï¼ˆä¸‰ï¼‰</title>
      <link>http://blog.911015.com/go-zero/03.html</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>http://blog.911015.com/go-zero/03.html</guid>
      <description>åˆ—è¡¨æ•°æ®åˆ†é¡µ 1ã€api å®šä¹‰ Pager api å¯ä»¥å•ç‹¬ä¸€ä¸ªæ–‡ä»¶ï¼›æ­¤æ—¶ userlogin.api éœ€è¦ import &amp;ldquo;api/pager.api&amp;rdquo;
Pager { Page int `form:&amp;#34;page,default=1&amp;#34;` PageSize int `form:&amp;#34;page_size,default=10&amp;#34;` TotalSize int `form:&amp;#34;total_size,default=0&amp;#34;` } TagListRequest { Name string `form:&amp;#34;name,optional&amp;#34;` Pager } TagListResponse { List []TagResponse `json:&amp;#34;list&amp;#34;` Matedata Pager `json:&amp;#34;matedata&amp;#34;` } service userlogin-api { @handler Tags get /api/tag/list(TagListRequest) returns (TagListResponse) } 2ã€model æ–‡ä»¶ï¼šBlogTagModelå¢åŠ TageListæ–¹æ³•ï¼›åŒæ—¶ customBlogTagModel.TagList å®ç°å…·ä½“é€»è¾‘
BlogTagModel interface { blogTagModel TagList(context.Context, *types.TagListRequest) (*types.TagListResponse, error) } func (c *customBlogTagModel) TagList(ctx context.Context, request *types.TagListRequest) (*types.TagListResponse, error) { result := &amp;amp;types.</description>
    </item>
    
    <item>
      <title>go-zero å¾®æœåŠ¡åº”ç”¨å®è·µï¼ˆä¸€ï¼‰</title>
      <link>http://blog.911015.com/go-zero/04.html</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>http://blog.911015.com/go-zero/04.html</guid>
      <description>ç®€ä»‹ go-zero æ˜¯ä¸€ä¸ªé›†æˆäº†å„ç§å·¥ç¨‹å®è·µçš„ web å’Œ rpc æ¡†æ¶ã€‚é€šè¿‡å¼¹æ€§è®¾è®¡ä¿éšœäº†å¤§å¹¶å‘æœåŠ¡ç«¯çš„ç¨³å®šæ€§ï¼Œç»å—äº†å……åˆ†çš„å®æˆ˜æ£€éªŒã€‚
æœ¬èŠ‚å°†ç”¨go-zero å¼€å‘ä¸€ä¸ªç”¨æˆ·æœåŠ¡ï¼›ä¸»è¦åŒ…æ‹¬æ³¨å†Œã€ç™»å½•ã€ç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢åŠŸèƒ½
åˆå§‹åŒ–é¡¹ç›® //åˆ›å»ºç›®å½• madir project &amp;amp;&amp;amp; cd project //åˆå§‹åŒ–é¡¹ç›® go mod init project ç”¨æˆ·æœåŠ¡ 0ã€ç¯å¢ƒå‡†å¤‡ protoc &amp;amp; protoc-gen-goå®‰è£…
protocæ˜¯ä¸€æ¬¾ç”¨C++ç¼–å†™çš„å·¥å…·ï¼Œå…¶å¯ä»¥å°†protoæ–‡ä»¶ç¿»è¯‘ä¸ºæŒ‡å®šè¯­è¨€çš„ä»£ç ã€‚åœ¨go-zeroçš„å¾®æœåŠ¡ä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨grpcè¿›è¡ŒæœåŠ¡é—´çš„é€šä¿¡ï¼Œè€Œgrpcçš„ç¼–å†™å°±éœ€è¦ç”¨åˆ°protocå’Œç¿»è¯‘æˆgoè¯­è¨€rpc stubä»£ç çš„æ’ä»¶protoc-gen-goã€‚
1ã€åˆ›å»ºproto æ–‡ä»¶ user/rpc/user.proto
syntax = &amp;#34;proto3&amp;#34;; package user; option go_package = &amp;#34;./user&amp;#34;; message RegisterRequest { string Name = 1; int64 Gender = 2; string Email = 3; string Password = 4; } message RegisterResponse { int64 Id = 1; string Name = 2; int64 Gender = 3; string Email = 4; } message LoginRequest { string Email = 1; string Password = 2; } message LoginResponse { int64 Id = 1; string Name = 2; int64 Gender = 3; string Email = 4; } message UserInfoRequest { int64 Id = 1; } message UserInfoResponse { int64 Id = 1; string Name = 2; int64 Gender = 3; string Email = 4; } service User { rpc Register(RegisterRequest) returns(RegisterResponse); rpc Login(LoginRequest) returns(LoginResponse); rpc UserInfo(UserInfoRequest) returns(UserInfoResponse); } 2ã€åˆ›å»º user/generate.</description>
    </item>
    
    <item>
      <title>go-zero å¾®æœåŠ¡åº”ç”¨å®è·µï¼ˆäºŒï¼‰</title>
      <link>http://blog.911015.com/go-zero/05.html</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>http://blog.911015.com/go-zero/05.html</guid>
      <description>æœåŠ¡è°ƒç”¨ å®Œæˆrpcè®¿é—®åŠŸèƒ½åï¼Œè¿˜éœ€è¦è¿›è¡Œå®¢æˆ·ç«¯è°ƒç”¨ï¼Œä¼šç”¨åˆ°goctl çš„apiåŠŸèƒ½ï¼›åˆ›å»ºapiç›®å½•ç¼–å†™apiæ–‡ä»¶ï¼›apiç›¸å…³è¯­æ³•å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šapiè¯­æ³•ä»‹ç»
1ã€APIæ–‡ä»¶ç¼–å†™ å…¶ä¸­ ç™»å½•æ³¨å†Œå¢åŠ äº†å‚æ•°éªŒè¯ï¼Œä½¿ç”¨ validator åŒ…è¿›è¡ŒéªŒè¯è¯¦ç»†ä½¿ç”¨æ–¹æ³•å¯ä»¥åˆ° github.com/go-playground/validator æŸ¥çœ‹
syntax = &amp;#34;v1&amp;#34; type ( LoginRequest { Email string `json:&amp;#34;Email&amp;#34; validate:&amp;#34;required,email&amp;#34;` Password string `json:&amp;#34;password&amp;#34; validate:&amp;#34;required,gte=8&amp;#34;` } LoginResponse { AccessToken string `json:&amp;#34;accessToken&amp;#34;` AccessExpire int64 `json:&amp;#34;accessExpire&amp;#34;` } RegisterRequest { Name string `json:&amp;#34;name&amp;#34; validate:&amp;#34;required,gte=2,lte=20&amp;#34;` Gender int64 `json:&amp;#34;gender&amp;#34; validate:&amp;#34;oneof=1 2&amp;#34;` Email string `json:&amp;#34;Email&amp;#34; validate:&amp;#34;required,email&amp;#34;` Password string `json:&amp;#34;password&amp;#34; validate:&amp;#34;required,gte=8&amp;#34;` } RegisterResponse { Id int64 `json:&amp;#34;id&amp;#34;` Name string `json:&amp;#34;name&amp;#34;` Gender int64 `json:&amp;#34;gender&amp;#34;` Email string `json:&amp;#34;Email&amp;#34;` } UserInfoRequest { } UserInfoResponse { Id int64 `json:&amp;#34;id&amp;#34;` Name string `json:&amp;#34;name&amp;#34;` Gender int64 `json:&amp;#34;gender&amp;#34;` Email string `json:&amp;#34;Email&amp;#34;` } ) service User { @handler Login post /api/user/login(LoginRequest) returns (LoginResponse) @handler Register post /api/user/register(RegisterRequest) returns (RegisterResponse) } @server( jwt: Auth ) service User { @handler UserInfo post /api/user/userinfo(UserInfoRequest) returns (UserInfoResponse) } 2ã€æ‰§è¡Œgoctlå‘½ä»¤ goctl api go -api .</description>
    </item>
    
  </channel>
</rss>
